const _0x16f155=_0x3b10;(function(_0xdcf339,_0x1f6f5e){const _0x12c16c=_0x3b10,_0x90f88a=_0xdcf339();while(!![]){try{const _0x41c4fd=-parseInt(_0x12c16c(0x163))/0x1*(-parseInt(_0x12c16c(0x12f))/0x2)+parseInt(_0x12c16c(0xb7))/0x3*(-parseInt(_0x12c16c(0x199))/0x4)+-parseInt(_0x12c16c(0xcb))/0x5+parseInt(_0x12c16c(0x152))/0x6+-parseInt(_0x12c16c(0x1a3))/0x7*(parseInt(_0x12c16c(0xae))/0x8)+-parseInt(_0x12c16c(0x156))/0x9*(-parseInt(_0x12c16c(0xca))/0xa)+parseInt(_0x12c16c(0x18a))/0xb;if(_0x41c4fd===_0x1f6f5e)break;else _0x90f88a['push'](_0x90f88a['shift']());}catch(_0x3c61fc){_0x90f88a['push'](_0x90f88a['shift']());}}}(_0x373b,0x9d1ef));const _0x310d32=function(){let _0x838d38=!![];return function(_0x4485c0,_0x1fa7da){const _0x221445=_0x838d38?function(){const _0x2aa8a3=_0x3b10;if(_0x1fa7da){const _0x448d00=_0x1fa7da[_0x2aa8a3(0x97)](_0x4485c0,arguments);return _0x1fa7da=null,_0x448d00;}}:function(){};return _0x838d38=![],_0x221445;};}(),_0x2da1cb=_0x310d32(this,function(){const _0x56a983=_0x3b10;return _0x2da1cb[_0x56a983(0x133)]()[_0x56a983(0x17b)]('(((.+)+)+)+$')['toString']()[_0x56a983(0xa8)](_0x2da1cb)[_0x56a983(0x17b)](_0x56a983(0xb9));});_0x2da1cb();function _0x373b(){const _0x143cb1=['env','/:bot/portfolio','bot','logged\x20out','15\x20min','padStart','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Invalid\x20IP\x20address','auth','bot-','get','Unauthorized\x20attempt\x20to\x20store\x20configuration','timestamp','getSeconds','emitHistory','-config.json','Token\x20blacklisted','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','storeHeadless','2FA\x20login\x20rejected','parse','RSA-OAEP','\x20/\x20','blacklist','answerCallbackQuery','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','uuid','generateKeyPairAsync','<b>Telegram\x20bot\x20status:</b>\x0a','whitelistEnabled','log','/off\x20-\x20stop\x20bot(s)\x0a','find','pidExpireLogin','readdirSync','length','temporary\x20token\x20generated','running','Unauthorized\x20login\x20attempt\x20(public\x20key)','add-bot','alerts','show','get-starting-balances','status','page','all','order','bb-settings.json','toIPv4Address','idling\x20bot\x20\x20\x20|\x20Bot\x20','placeOrder','remove','match','Invalid\x20authentication\x20token\x20(2)','privateKey','jsonwebtoken','/:bot','whitelist','analytics','-performance.json','stopped','RSA','-events.json','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','telegramEnabled','polling_error','once','settings','/status\x20-\x20show\x20bot(s)\x20status\x0a','Ok,\x20will\x20send\x20order\x20notifications\x20only','notification','build2','date-fns','send','delete-bot','3602XYsYHR','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','new','toString','default','************','telegramChatId','password','sendFile','write','store-headless','</b>\x20?','allow','telegramIpApproval','fork','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Unauthorized\x20attempt\x20to\x20get\x20logs','hex','headers','sortBy','args','set','publicKey','reload','showname','sha256','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','join','disconnect','build','Login\x20accepted','SIGTERM','createServer','reject','6257574PlUzHG','bbPassword','getPortfolio','entries','5349816BLzJWn','login','isIPv4MappedAddress','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','type','secret','store','hasOwnProperty','5\x20min','clients','All','botmanager','176sEXipC','disabled','::1','use','success','Notifications\x20disabled','Balance\x20Bot\x20Server','-----------------------------------------------------------------------------------','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','copyFileSync','then','HTML','name','restarting\x20Bot\x20','referer','exp','enabled\x20Bot\x20','Password\x20reset\x20rejected','yes','2FA\x20login\x20required','Notifications\x20disabled\x0a','callback_query','temporaryAccessAllowed','botname','search','bot.js','getMonth','2FA\x20login\x20token\x20generated','logout','invalid\x20credentials','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','SIGINT','-results.json','Invalid\x20username\x20or\x20IP\x20address','2FA\x20required','unlinkSync',',\x20must\x20be\x20a\x204\x20digit\x20number','telegramEvents','All\x20bots','17016087bXAwsp','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Notifications\x20types:\x20','getTime','sendMessage','Unauthorized\x20attempt\x20to\x20log\x20out','\x20|\x20','/:bot/coins','assign','exit','Error:\x20Invalid\x20argument\x20','404\x20Not\x20Found','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','access','bb-secure.json','92028SaZtYy','getMinutes','getUTCHours',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','ipv6','reset-password','token','getHours','getStartingBalances','new-disabled','1652XuTJpe','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Unauthorized\x20attempt\x20to\x20update\x20bot','Notifications\x20enabled\x0a','disabled\x20Bot\x20','timeshift','login\x20required','Balance\x20Bot','secure','encryptedUuid','3000','starting\x20new\x20bot\x20|\x20Bot\x20','split','::ffff:127.0.0.1','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','sockets','ipc','socket.io','Bot\x20Mgr\x20>\x20','All\x20bots\x20running\x20right\x20now','login\x20token\x20valid','30\x20min','port','stop','accept','conn','/:bot/history','Invalid\x20Telegram\x20token','isDirectory','Login\x20rejected','clientip','Temporary\x20access\x20rejected','/restart\x20-\x20restart\x20bot(s)\x0a','Crypt','reason','version','bbUsername','orders','node-telegram-bot-api','index.html','removeAllListeners','username','connected','mkdirSync','/on\x20-\x20start\x20bot(s)\x0a','telegram','getFullYear','connection','starting\x20bot\x20|\x20Bot\x20','removeListener','expiry','compareSync','\x20>\x20','slice','started','config/','catch','Invalid\x20authentication\x20token\x20(1)','1000','function','host','/enable\x20-\x20enable\x20notifications\x0a','enabled','remoteAddress','yargs/yargs','inherit','decrypt','/disable\x20-\x20disable\x20notifications\x0a','apply','cancel-loading','defaults','store-settings','http','bb-config.json','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','get-portfolio','listen','static','No\x20authentication\x20token','Unauthorized\x20login\x20attempt\x20(timeout)','cloneDeep','version.json','test','telegramUsername','kill','constructor','f2aRequired','No\x20bots\x20running\x20right\x20now','emit','temporary\x20access\x20not\x20allowed','message','32784FORuRB','Unauthorized\x20attempt\x20to\x20delete\x20bot','Bot\x20','stopPolling','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','live','login\x20not\x20required','backup/','141ENhBSB','Password\x20has\x20been\x20reset\x20to:\x20','(((.+)+)+)+$','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','\x20only\x0a','hybrid-crypto-js','botID','existsSync','kind','telegramToken','login\x20token\x20generated','server','onText','pidRefreshToken','child_process','value','chat','user','forEach','10aZSOCV','4046110HewgPo','telegram2FaApproval','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Unauthorized\x20attempt\x20to\x20get\x20portfolio','argv','Unauthorized\x20attempt\x20to\x20update\x20settings','bots','place-order','/:bot/performance','restart','loginRequired','getDate','hashSync','settings.','handshake','event','data','from','verify','store-configuration','bb/','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','push',':\x20Bot\x20Mgr\x20>\x20','NTBA_FIX_319'];_0x373b=function(){return _0x143cb1;};return _0x373b();}'use strict';process[_0x16f155(0xe4)][_0x16f155(0xe3)]=0x1;const childProcess=require(_0x16f155(0xc5)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x16f155(0x12c)),low=require('lowdb'),path=require('path'),crypto=require('crypto'),Crypt=require(_0x16f155(0xbc))[_0x16f155(0x1c6)],RSA=require('hybrid-crypto-js')[_0x16f155(0x121)],bcrypt=require('bcryptjs'),jwt=require(_0x16f155(0x11b)),analyticsLib=require(_0x16f155(0x11e))[_0x16f155(0x134)],googleAnalytics=require('@analytics/google-analytics')[_0x16f155(0x134)],ipaddr=require('ipaddr.js'),argv=require(_0x16f155(0x93))(process[_0x16f155(0xcf)][_0x16f155(0x88)](0x2))[_0x16f155(0xcf)],PORT=argv[_0x16f155(0x1bb)]||_0x16f155(0x1af),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x16f155(0xa5)](PORT))return console[_0x16f155(0x102)](_0x16f155(0x194)+PORT+_0x16f155(0x187)),process[_0x16f155(0x193)](0x1);const HOST=argv[_0x16f155(0x8f)]||null,userID=argv[_0x16f155(0xc8)]||'';let bbpath=_0x16f155(0xdf);const botfile=_0x16f155(0x17c),configfile=_0x16f155(0x9c),settingsfile=_0x16f155(0x113),securefile=_0x16f155(0x198);!fs[_0x16f155(0xbe)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath+_0x16f155(0x160)),configpath=userID?bbpath+_0x16f155(0x8a)+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x16f155(0xb6);!fs[_0x16f155(0xbe)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x16f155(0xbe)](configbackuppath)&&fs[_0x16f155(0x1d0)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x16f155(0x99)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x16f155(0x99)]({'settings':{'timeshift':0x0}})[_0x16f155(0x139)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x16f155(0x99)]({'secure':{},'blacklist':[]})[_0x16f155(0x139)]();let crypt=new Crypt({'md':_0x16f155(0x149),'rsaStandard':_0x16f155(0xf9)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath+_0x16f155(0xa4))[_0x16f155(0x1c8)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require(_0x16f155(0x9b))[_0x16f155(0x150)](app);app['use'](express['static'](path[_0x16f155(0x14b)](__dirname,bbpath,'build2'))),app[_0x16f155(0x166)](express[_0x16f155(0xa0)](path['join'](__dirname,bbpath,_0x16f155(0x14d)))),app[_0x16f155(0xee)]('/',function(_0x59a7c5,_0x1dfe91){const _0x2d00eb=_0x16f155;_0x1dfe91['sendFile'](path[_0x2d00eb(0x14b)](__dirname,bbpath,_0x2d00eb(0x12b),'index.html'));}),app[_0x16f155(0xee)](_0x16f155(0x11c),function(_0x12fe35,_0xc74c84){const _0x222e7b=_0x16f155;_0xc74c84[_0x222e7b(0x138)](path['join'](__dirname,bbpath,_0x222e7b(0x14d),_0x222e7b(0x1cc)));}),app['get'](_0x16f155(0xe5),(_0x3fd5b9,_0x2aaf0c)=>{const _0x48f738=_0x16f155;_0x2aaf0c[_0x48f738(0x138)](path['join'](__dirname,bbpath,_0x48f738(0x14d),_0x48f738(0x1cc)));}),app[_0x16f155(0xee)](_0x16f155(0xd3),(_0x574a48,_0x26840b)=>{const _0x4482db=_0x16f155;_0x26840b[_0x4482db(0x138)](path[_0x4482db(0x14b)](__dirname,bbpath,'build',_0x4482db(0x1cc)));}),app[_0x16f155(0xee)](_0x16f155(0x191),(_0x8d1dce,_0x12c513)=>{const _0x4aa0fc=_0x16f155;_0x12c513[_0x4aa0fc(0x138)](path[_0x4aa0fc(0x14b)](__dirname,bbpath,'build',_0x4aa0fc(0x1cc)));}),app[_0x16f155(0xee)](_0x16f155(0x1bf),(_0x472c95,_0x500139)=>{const _0x41ae00=_0x16f155;_0x500139[_0x41ae00(0x138)](path[_0x41ae00(0x14b)](__dirname,bbpath,_0x41ae00(0x14d),_0x41ae00(0x1cc)));}),app[_0x16f155(0xee)]('/:bot/configuration',(_0x412d9e,_0x4026d7)=>{const _0x17153d=_0x16f155;_0x4026d7[_0x17153d(0x138)](path[_0x17153d(0x14b)](__dirname,bbpath,_0x17153d(0x14d),_0x17153d(0x1cc)));}),app[_0x16f155(0xee)]('/:bot/support',(_0x53af87,_0x43fea5)=>{const _0x5d302c=_0x16f155;_0x43fea5[_0x5d302c(0x138)](path[_0x5d302c(0x14b)](__dirname,bbpath,_0x5d302c(0x14d),_0x5d302c(0x1cc)));});if(HOST)http[_0x16f155(0x9f)](PORT,HOST);else http[_0x16f155(0x9f)](PORT);const io=require(_0x16f155(0x1b6))(http,{}),analytics=analyticsLib({'app':_0x16f155(0x1ac),'plugins':[googleAnalytics({'trackingId':'UA-192771731-1'})]}),TelegramBot=require(_0x16f155(0x1cb));let tgBot;if(settings[_0x16f155(0xc0)]&&settings[_0x16f155(0xc0)]!=''&&settings['telegramUsername']&&settings[_0x16f155(0xa6)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function _0x3b10(_0x3740e2,_0x42a5e8){const _0x47f686=_0x373b();return _0x3b10=function(_0x2da1cb,_0x310d32){_0x2da1cb=_0x2da1cb-0x80;let _0x373b82=_0x47f686[_0x2da1cb];return _0x373b82;},_0x3b10(_0x3740e2,_0x42a5e8);}function startServer(){const _0x3e5184=_0x16f155;console[_0x3e5184(0x102)](''),console[_0x3e5184(0x102)]('-----------------------------------------------------------------------------------'),logging(_0x3e5184(0xb3)+PORT),console[_0x3e5184(0x102)](_0x3e5184(0x16a));if(config['length']!=0x0)config[_0x3e5184(0xc9)](_0x3f4161=>{const _0x184179=_0x3e5184;if(_0x3f4161[_0x184179(0x10f)]==_0x184179(0x91)||_0x3f4161[_0x184179(0x10f)]==_0x184179(0x132))logging(_0x184179(0x83)+_0x3f4161[_0x184179(0xbd)]+_0x184179(0x190)+_0x3f4161['botname']),startBot([_0x3f4161['botID'],userID],{'cwd':bbpath},function(_0x358363){if(_0x358363)logging(_0x358363);});else(_0x3f4161[_0x184179(0x10f)]==_0x184179(0x164)||_0x3f4161[_0x184179(0x10f)]=='new-disabled')&&logging(_0x184179(0x115)+_0x3f4161[_0x184179(0xbd)]+_0x184179(0x190)+_0x3f4161[_0x184179(0x17a)]);});else!newBot&&console['log'](_0x3e5184(0xfd));if(newBot)addBot();console[_0x3e5184(0x102)](_0x3e5184(0x16a)),console[_0x3e5184(0x102)]('');}function startSocket(){const _0x4ad62e=_0x16f155;io['on'](_0x4ad62e(0x82),_0x1a313a=>{const _0x2bbaa3=_0x4ad62e;let _0x322aa9,_0x127a02,_0x551357,_0x4dd2fe,_0x1d646c;const _0x505ce1=_0x1a313a[_0x2bbaa3(0xd9)][_0x2bbaa3(0x142)][_0x2bbaa3(0x171)];_0x127a02=_0x505ce1[_0x2bbaa3(0x118)](/bot[0-9]{3}/);if(_0x127a02)_0x551357=_0x127a02[0x0][_0x2bbaa3(0x118)](/[0-9]{3}/);if(_0x551357)_0x322aa9=_0x551357[0x0];else _0x322aa9=_0x2bbaa3(0x162);const _0x5c42d7=_0x1a313a[_0x2bbaa3(0xd9)][_0x2bbaa3(0xec)][_0x2bbaa3(0x1ae)];if(!_0x5c42d7)_0x1a313a[_0x2bbaa3(0xab)](_0x2bbaa3(0x10f),{'publicKey':secure['publicKey']});else{_0x4dd2fe=timelyDecrypt(_0x5c42d7,![]);if(!_0x4dd2fe)logging(_0x2bbaa3(0x10a));else{_0x1d646c=normalizeIP(_0x1a313a[_0x2bbaa3(0x1be)][_0x2bbaa3(0x92)])[_0x2bbaa3(0x15d)];if(!devices[_0x4dd2fe])devices[_0x4dd2fe]={'uuid':_0x4dd2fe,'access':{'token':null}};devices[_0x4dd2fe]['ip']=_0x1d646c;const _0xe7253a=addClient(_0x1a313a['id'],_0x4dd2fe,_0x322aa9);setAccess(_0xe7253a),_0x1a313a['on'](_0x2bbaa3(0x157),_0x2e1581=>{const _0x3bd12a=_0x2bbaa3,_0x15b339=timelyDecrypt(_0x2e1581['password']);if(_0x15b339){_0x2e1581={'username':_0x2e1581['username'],'password':_0x15b339},devices[_0x4dd2fe]['access']=validateCredentials(_0x2e1581,_0x4dd2fe);if(devices[_0x4dd2fe]['access'][_0x3bd12a(0x13c)]==![]&&devices[_0x4dd2fe][_0x3bd12a(0x197)][_0x3bd12a(0x1c7)]==_0x3bd12a(0x176))_0x1a313a[_0x3bd12a(0xab)](_0x3bd12a(0x10f),{'access':devices[_0x4dd2fe][_0x3bd12a(0x197)]}),loginAccess2FA(_0x4dd2fe,_0x1d646c);else{if(devices[_0x4dd2fe][_0x3bd12a(0x197)]['allow']==![]&&devices[_0x4dd2fe][_0x3bd12a(0x197)]['reason']=='invalid\x20credentials')_0x1a313a[_0x3bd12a(0xab)](_0x3bd12a(0x10f),{'access':devices[_0x4dd2fe]['access']});else devices[_0x4dd2fe][_0x3bd12a(0x197)][_0x3bd12a(0x13c)]&&devices[_0x4dd2fe][_0x3bd12a(0x197)][_0x3bd12a(0x1c7)]==_0x3bd12a(0xc1)&&(getClientsWithUuid(_0x4dd2fe)[_0x3bd12a(0xc9)](_0x1c8d5d=>{setAccess(_0x1c8d5d);}),setTokenRefresh(_0x4dd2fe),setSessionTimeout(_0x3bd12a(0x157),_0x4dd2fe));}}else logging(_0x3bd12a(0xa2));}),_0x1a313a['on'](_0x2bbaa3(0x19e),()=>{resetPassword();}),_0x1a313a['on'](_0x2bbaa3(0x14c),_0x224818=>{removeClient(_0x1a313a['id']);});}}});}function initClient(_0x587e78){if(_0x587e78!='botmanager'&&config['apiKey']!=''){if(pid[_0x587e78])pid[_0x587e78]['send']({'function':'initclient','args':null});}}function getSocket(_0x4e5a8b){const _0x5307a7=_0x16f155;return io[_0x5307a7(0x1b4)][_0x5307a7(0x1b4)][_0x5307a7(0xee)](_0x4e5a8b);}function setAccess(_0x4961a4){const _0x5a1feb=_0x16f155,_0x54fecc=getSocket(_0x4961a4['id']),_0x141d9c=_0x4961a4[_0x5a1feb(0xfe)],_0x692097=_0x4961a4[_0x5a1feb(0xe6)];devices[_0x141d9c][_0x5a1feb(0x197)]=validateAccess(devices[_0x141d9c][_0x5a1feb(0x197)]['token'],_0x141d9c),_0x54fecc[_0x5a1feb(0x14b)](_0x141d9c);if(devices[_0x141d9c][_0x5a1feb(0x197)][_0x5a1feb(0x13c)]){_0x54fecc[_0x5a1feb(0x14b)](_0x692097);if(_0x692097==_0x5a1feb(0x162))initializeSocketBotManager(_0x54fecc);else initializeSocketBot(_0x54fecc);initClient(_0x692097);}devices[_0x141d9c][_0x5a1feb(0x197)]['token']&&devices[_0x141d9c][_0x5a1feb(0x197)][_0x5a1feb(0x1c7)]==_0x5a1feb(0x108)&&setSessionTimeout('2FA',_0x141d9c),devices[_0x141d9c][_0x5a1feb(0x197)][_0x5a1feb(0x19f)]&&devices[_0x141d9c][_0x5a1feb(0x197)][_0x5a1feb(0x1c7)]==_0x5a1feb(0x17e)&&setSessionTimeout(_0x5a1feb(0x157),_0x141d9c),_0x54fecc[_0x5a1feb(0xab)](_0x5a1feb(0x10f),{'status':_0x4961a4[_0x5a1feb(0xc2)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x141d9c][_0x5a1feb(0x197)],'externalip':devices[_0x141d9c]['ip'],'publicKey':secure[_0x5a1feb(0x146)]}),devices[_0x141d9c][_0x5a1feb(0x197)][_0x5a1feb(0x13c)]==![]&&devices[_0x141d9c]['access']['reason']==_0x5a1feb(0x185)&&temporaryAccess2FA(_0x141d9c,devices[_0x141d9c]['ip']);}function setSessionTimeout(_0x1bf29c,_0x34f04a){const _0x5ecbab=_0x16f155;let _0x21bb62;if(_0x1bf29c=='login')_0x21bb62=loginExpiry*0x3c*0x3e8;else _0x21bb62=devices[_0x34f04a][_0x5ecbab(0x13d)]['expiry']*0x3c*0x3e8-(new Date()[_0x5ecbab(0x18d)]()-devices[_0x34f04a][_0x5ecbab(0x13d)]['timestamp']);if(devices[_0x34f04a][_0x5ecbab(0x105)])clearTimeout(devices[_0x34f04a]['pidExpireLogin']);devices[_0x34f04a][_0x5ecbab(0x105)]=setTimeout(()=>{const _0x6c47fd=_0x5ecbab;if(devices[_0x34f04a][_0x6c47fd(0xc4)])clearTimeout(devices[_0x34f04a][_0x6c47fd(0xc4)]);removeSocketListeners(_0x34f04a),addBlacklist(_0x34f04a),devices[_0x34f04a][_0x6c47fd(0x13d)]=null,devices[_0x34f04a][_0x6c47fd(0xcc)]=null,devices[_0x34f04a][_0x6c47fd(0x197)][_0x6c47fd(0x19f)]=null,devices[_0x34f04a][_0x6c47fd(0x197)]=validateAccess(devices[_0x34f04a][_0x6c47fd(0x197)][_0x6c47fd(0x19f)],_0x34f04a),!(devices[_0x34f04a][_0x6c47fd(0x197)][_0x6c47fd(0x13c)]&&devices[_0x34f04a]['access'][_0x6c47fd(0x1c7)]==_0x6c47fd(0xb5))&&(_0x1bf29c=='login'?io['to'](_0x34f04a)[_0x6c47fd(0xab)](_0x6c47fd(0x10f),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x34f04a)[_0x6c47fd(0xab)](_0x6c47fd(0x10f),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x34f04a]['access']['token']=null;},_0x21bb62);}function setTokenRefresh(_0x317f8b){const _0x1fdb50=_0x16f155;if(devices[_0x317f8b][_0x1fdb50(0xc4)])clearTimeout(devices[_0x317f8b][_0x1fdb50(0xc4)]);devices[_0x317f8b][_0x1fdb50(0xc4)]=setTimeout(()=>{const _0x1e3bae=_0x1fdb50;getClientsWithUuid(_0x317f8b)[_0x1e3bae(0x107)]!=0x0?(devices[_0x317f8b][_0x1e3bae(0x197)]=refreshToken(_0x317f8b),io['to'](_0x317f8b)[_0x1e3bae(0xab)](_0x1e3bae(0x10f),{'status':_0x1e3bae(0x1cf),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x317f8b][_0x1e3bae(0x197)],'externalip':devices[_0x317f8b]['ip'],'publicKey':secure[_0x1e3bae(0x146)]}),setTokenRefresh(_0x317f8b)):clearTimeout(devices[_0x317f8b]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0xcc95ac){const _0x257172=_0x16f155,_0x10dc4c=getClient(_0xcc95ac['id'])[_0x257172(0xfe)];_0xcc95ac[_0x257172(0xab)](_0x257172(0xd1),config),_0xcc95ac[_0x257172(0xab)](_0x257172(0x127),cleanSettings()),_0xcc95ac['on'](_0x257172(0x10b),_0x587482=>{const _0xd59bc4=_0x257172;if(validateAccess(_0x587482,_0x10dc4c)[_0xd59bc4(0x13c)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0xcc95ac['on']('update-bot',(_0x520a0a,_0x54ef3b)=>{const _0x4da660=_0x257172;if(validateAccess(_0x54ef3b,_0x10dc4c)['allow'])toggleBot(_0x520a0a[_0x4da660(0xbd)],_0x520a0a[_0x4da660(0x10f)],_0x520a0a[_0x4da660(0xb4)]);else logging(_0x4da660(0x1a7));}),_0xcc95ac['on'](_0x257172(0x12e),(_0x37448d,_0x258d2b)=>{const _0x543957=_0x257172;if(validateAccess(_0x258d2b,_0x10dc4c)['allow'])deleteBot(_0x37448d);else logging(_0x543957(0xaf));}),_0xcc95ac['on'](_0x257172(0x9a),(_0x44378b,_0x189fe2)=>{const _0x2565f6=_0x257172;if(validateAccess(_0x189fe2,_0x10dc4c)['allow'])storeSettings(_0x44378b,!![]);else logging(_0x2565f6(0xd0));}),_0xcc95ac['on']('logout',_0x4f6fa4=>{const _0x3571f9=_0x257172;if(validateAccess(_0x4f6fa4,_0x10dc4c)[_0x3571f9(0x13c)]){if(devices[_0x10dc4c][_0x3571f9(0xc4)])clearTimeout(devices[_0x10dc4c][_0x3571f9(0xc4)]);if(devices[_0x10dc4c][_0x3571f9(0x105)])clearTimeout(devices[_0x10dc4c][_0x3571f9(0x105)]);removeSocketListeners(getClient(_0xcc95ac['id'])[_0x3571f9(0xfe)]),addBlacklist(_0x10dc4c),devices[_0x10dc4c]['telegramIpApproval']=null,devices[_0x10dc4c][_0x3571f9(0xcc)]=null,devices[_0x10dc4c][_0x3571f9(0x197)][_0x3571f9(0x19f)]=null,io['to'](getClient(_0xcc95ac['id'])[_0x3571f9(0xfe)])['emit'](_0x3571f9(0x10f),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x3571f9(0x18f));});}function initializeSocketBot(_0x8a41ad){const _0x20cb7b=_0x16f155,_0xf884c0=getClient(_0x8a41ad['id'])[_0x20cb7b(0xe6)],_0x4ca1d3=getClient(_0x8a41ad['id'])[_0x20cb7b(0xfe)];_0x8a41ad['on']('get-logs',(_0x18013c,_0x532f40)=>{const _0x541df4=_0x20cb7b;if(validateAccess(_0x532f40,_0x4ca1d3)[_0x541df4(0x13c)]){if(pid[_0xf884c0])pid[_0xf884c0][_0x541df4(0x12d)]({'function':_0x541df4(0xf2),'args':_0x18013c});}else logging(_0x541df4(0x140));}),_0x8a41ad['on'](_0x20cb7b(0x9e),(_0x1f87fa,_0x461965)=>{const _0x592548=_0x20cb7b;if(validateAccess(_0x461965,_0x4ca1d3)[_0x592548(0x13c)]){if(pid[_0xf884c0])pid[_0xf884c0][_0x592548(0x12d)]({'function':_0x592548(0x154),'args':_0x1f87fa});}else logging(_0x592548(0xce));}),_0x8a41ad['on'](_0x20cb7b(0xde),(_0x1645bf,_0x261992)=>{const _0x38eb2c=_0x20cb7b;if(validateAccess(_0x261992,_0x4ca1d3)[_0x38eb2c(0x13c)]){if(pid[_0xf884c0])pid[_0xf884c0][_0x38eb2c(0x12d)]({'function':'storeConfiguration','args':_0x1645bf});}else logging(_0x38eb2c(0xef));}),_0x8a41ad['on'](_0x20cb7b(0x13a),(_0x28acaf,_0x37b30b)=>{const _0x5f58d3=_0x20cb7b;if(validateAccess(_0x37b30b,_0x4ca1d3)[_0x5f58d3(0x13c)]){if(pid[_0xf884c0])pid[_0xf884c0][_0x5f58d3(0x12d)]({'function':_0x5f58d3(0xf6),'args':_0x28acaf});}else logging(_0x5f58d3(0x9d));}),_0x8a41ad['on'](_0x20cb7b(0x10e),_0x2b5e2e=>{const _0x33c64a=_0x20cb7b;if(validateAccess(_0x2b5e2e,_0x4ca1d3)[_0x33c64a(0x13c)]){if(pid[_0xf884c0])pid[_0xf884c0][_0x33c64a(0x12d)]({'function':_0x33c64a(0x1a1),'args':null});}else logging(_0x33c64a(0x1a6));}),_0x8a41ad['on'](_0x20cb7b(0xd2),(_0x36e300,_0x4a364a)=>{const _0x1d3dfb=_0x20cb7b;if(validateAccess(_0x4a364a,_0x4ca1d3)['allow']){if(pid[_0xf884c0])pid[_0xf884c0][_0x1d3dfb(0x12d)]({'function':_0x1d3dfb(0x116),'args':_0x36e300});}else logging(_0x1d3dfb(0x18b));}),_0x8a41ad['on'](_0x20cb7b(0x98),_0x85c32e=>{const _0xbcbba7=_0x20cb7b;if(validateAccess(_0x85c32e,_0x4ca1d3)[_0xbcbba7(0x13c)]){if(pid[_0xf884c0])pid[_0xf884c0]['send']({'function':'cancelLoading','args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x8a41ad['on'](_0x20cb7b(0x17f),_0x279457=>{const _0x12d9b1=_0x20cb7b;if(validateAccess(_0x279457,_0x4ca1d3)['allow']){if(devices[_0x4ca1d3][_0x12d9b1(0xc4)])clearTimeout(devices[_0x4ca1d3][_0x12d9b1(0xc4)]);if(devices[_0x4ca1d3][_0x12d9b1(0x105)])clearTimeout(devices[_0x4ca1d3]['pidExpireLogin']);removeSocketListeners(getClient(_0x8a41ad['id'])[_0x12d9b1(0xfe)]),addBlacklist(_0x4ca1d3),devices[_0x4ca1d3]['telegramIpApproval']=null,devices[_0x4ca1d3][_0x12d9b1(0xcc)]=null,devices[_0x4ca1d3][_0x12d9b1(0x197)][_0x12d9b1(0x19f)]=null,io['to'](getClient(_0x8a41ad['id'])[_0x12d9b1(0xfe)])[_0x12d9b1(0xab)](_0x12d9b1(0x10f),{'access':{'allow':![],'reason':_0x12d9b1(0xe7),'token':null}});}else logging(_0x12d9b1(0x18f));});}function removeSocketListeners(_0x463fb8){const _0x255fae=_0x16f155;getClientsWithUuid(_0x463fb8)[_0x255fae(0xc9)](_0x4d6f93=>{const _0x20375a=_0x255fae;getSocket(_0x4d6f93['id'])[_0x20375a(0x1cd)]();});}function cleanSettings(){const _0x1847a1=_0x16f155;let _0x24ac4f=settings;return settings['telegramToken']&&settings[_0x1847a1(0xc0)]!=''&&(_0x24ac4f={..._0x24ac4f,'telegramToken':_0x1847a1(0x135)}),settings['bbPassword']&&settings[_0x1847a1(0x153)]!=''&&(_0x24ac4f={..._0x24ac4f,'bbPassword':_0x1847a1(0x135)}),_0x24ac4f;}function startBot(_0x25b686,_0x113c25,_0x39b377){const _0xd5bfd4=_0x16f155;let _0x1d4da2=![];const _0x5eacb6=_0x25b686[0x0];_0x113c25={..._0x113c25,'stdio':[_0xd5bfd4(0x94),_0xd5bfd4(0x94),_0xd5bfd4(0x94),_0xd5bfd4(0x1b5)]},pid[_0x5eacb6]=childProcess[_0xd5bfd4(0x13e)](botfile,_0x25b686,_0x113c25),pid[_0x5eacb6]['on'](_0xd5bfd4(0xad),_0x30026e=>{const _0x2d4d15=_0xd5bfd4;switch(Object['keys'](_0x30026e)[0x0]){case _0x2d4d15(0x17a):updateBotName(_0x5eacb6,_0x30026e['botname']);break;case'status':updateStatus(_0x5eacb6,_0x30026e[_0x2d4d15(0x10f)]);break;case _0x2d4d15(0xb4):updateLive(_0x5eacb6,_0x30026e['live']);break;case _0x2d4d15(0x89):updateLive(_0x5eacb6,_0x30026e[_0x2d4d15(0x89)]),io['to'](_0x5eacb6)[_0x2d4d15(0xab)](_0x2d4d15(0x10f),{'access':{'allow':![],'reason':_0x2d4d15(0x147),'token':null}});break;case'stop':_0x30026e[_0x2d4d15(0x1bc)]==_0x2d4d15(0xd4)&&stopBot(_0x5eacb6);_0x30026e[_0x2d4d15(0x1bc)]==_0x2d4d15(0xa7)&&toggleBot(_0x5eacb6,_0x2d4d15(0x164),_0x2d4d15(0x120));break;case _0x2d4d15(0x80):sendTelegram(_0x5eacb6,_0x30026e[_0x2d4d15(0x80)]);break;case _0x2d4d15(0x8e):io['to'](_0x5eacb6)[_0x2d4d15(0xab)](_0x30026e[_0x2d4d15(0x8e)],_0x30026e[_0x2d4d15(0x144)]);break;}}),pid[_0x5eacb6]['on']('error',function(_0x7ef404){if(_0x1d4da2)return;_0x1d4da2=!![],_0x39b377(_0x7ef404);}),pid[_0x5eacb6]['on'](_0xd5bfd4(0x193),function(_0x2cc7ab){const _0x5752cf=_0xd5bfd4;if(_0x1d4da2)return;_0x1d4da2=!![],_0x39b377(null);const _0x182fd2=dbConfig['get'](_0x5752cf(0xd1))[_0x5752cf(0x104)]({'botID':_0x5eacb6})[_0x5752cf(0xc6)]();_0x182fd2&&(_0x182fd2[_0x5752cf(0x10f)]==_0x5752cf(0x91)||_0x182fd2[_0x5752cf(0x10f)]==_0x5752cf(0x132))&&(updateLive(_0x5eacb6,_0x5752cf(0x120)),logging(_0x5752cf(0x170)+_0x5eacb6),startBot([_0x5eacb6,userID],{'cwd':bbpath},function(_0xffaf3c){if(_0xffaf3c)logging(_0xffaf3c);}));});}function stopBot(_0x384221){const _0x3e401e=_0x16f155;getClientsWithBotID(_0x384221)[_0x3e401e(0xc9)](_0x11cb23=>{getSocket(_0x11cb23['id'])['disconnect'](!![]),removeClient(_0x11cb23['id']);});if(pid[_0x384221])pid[_0x384221][_0x3e401e(0xa7)]();}function addBot(){const _0x13a0c8=_0x16f155;let _0x1c6336;for(let _0x2d53ec=0x1;_0x2d53ec<0x3e9;_0x2d53ec++){_0x1c6336=_0x2d53ec['toString']()[_0x13a0c8(0xe9)](0x3,'0');let _0x453808=config[_0x13a0c8(0x104)](_0x488cb8=>_0x488cb8['botID']==_0x1c6336);if(!_0x453808)break;}if(_0x1c6336===_0x13a0c8(0x8d)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging(_0x13a0c8(0x1b0)+_0x1c6336),dbConfig[_0x13a0c8(0xee)]('bots')[_0x13a0c8(0xe1)]({'botID':_0x1c6336,'botname':'Bot\x20'+_0x1c6336,'status':_0x13a0c8(0x132),'live':''})[_0x13a0c8(0x139)](),startBot([_0x1c6336,userID],{'cwd':bbpath},function(_0x20bcb1){if(_0x20bcb1)logging(_0x20bcb1);}),config=getConfiguration(),io['to'](_0x13a0c8(0x162))[_0x13a0c8(0xab)]('bots',config);}function deleteBot(_0x500922){const _0x1e51bf=_0x16f155;getClientsWithBotID(_0x500922)[_0x1e51bf(0xc9)](_0x357080=>{const _0x2c33af=_0x1e51bf;getSocket(_0x357080['id'])[_0x2c33af(0x14c)](!![]),removeClient(_0x357080['id']);}),dbConfig['get'](_0x1e51bf(0xd1))[_0x1e51bf(0x117)]({'botID':_0x500922})[_0x1e51bf(0x139)](),logging('deleted\x20Bot\x20'+_0x500922),stopBot(_0x500922);try{fs[_0x1e51bf(0x186)](path[_0x1e51bf(0x14b)](configpath,_0x1e51bf(0xed)+_0x500922+_0x1e51bf(0xf3))),fs[_0x1e51bf(0x186)](path[_0x1e51bf(0x14b)](configpath,_0x1e51bf(0xed)+_0x500922+_0x1e51bf(0x122))),fs[_0x1e51bf(0x186)](path['join'](configpath,_0x1e51bf(0xed)+_0x500922+_0x1e51bf(0x11f))),fs[_0x1e51bf(0x186)](path[_0x1e51bf(0x14b)](configpath,'bot-'+_0x500922+_0x1e51bf(0x183)));}catch(_0xfa172e){if(_0xfa172e)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0xfa172e);}config=getConfiguration(),io['to'](_0x1e51bf(0x162))['emit'](_0x1e51bf(0xd1),config);}function toggleBot(_0x5419c8,_0x958e2b,_0x5d93ec){const _0x53f48d=_0x16f155;dbConfig[_0x53f48d(0xee)](_0x53f48d(0xd1))[_0x53f48d(0x104)]({'botID':_0x5419c8})[_0x53f48d(0x192)]({'status':_0x958e2b})['assign']({'live':_0x5d93ec})[_0x53f48d(0x139)]();if(_0x958e2b==_0x53f48d(0x91)||_0x958e2b==_0x53f48d(0x132))logging(_0x53f48d(0x173)+_0x5419c8),startBot([_0x5419c8,userID],{'cwd':bbpath},function(_0x44ca2c){if(_0x44ca2c)logging(_0x44ca2c);});else(_0x958e2b==_0x53f48d(0x164)||_0x958e2b==_0x53f48d(0x1a2))&&(logging(_0x53f48d(0x1a9)+_0x5419c8),stopBot(_0x5419c8));config=getConfiguration(),io['to']('botmanager')['emit'](_0x53f48d(0xd1),config);}function toggleStatus(_0x39ddfe){const _0x66affa=_0x16f155;let _0x185692=dbConfig[_0x66affa(0xee)]('bots')[_0x66affa(0x104)]({'botID':_0x39ddfe})[_0x66affa(0xc6)](),_0x3d63f4;if(_0x185692['status']===_0x66affa(0x91))_0x3d63f4=_0x66affa(0x164);else{if(_0x185692[_0x66affa(0x10f)]==='new')_0x3d63f4=_0x66affa(0x1a2);else{if(_0x185692[_0x66affa(0x10f)]===_0x66affa(0x1a2))_0x3d63f4=_0x66affa(0x132);else{if(_0x185692[_0x66affa(0x10f)]===_0x66affa(0x164))_0x3d63f4='enabled';}}}return _0x3d63f4;}function updateStatus(_0x4683fb,_0x47461f){const _0xef3cf9=_0x16f155;dbConfig['get'](_0xef3cf9(0xd1))[_0xef3cf9(0x104)]({'botID':_0x4683fb})['assign']({'status':_0x47461f})[_0xef3cf9(0x139)](),config=getConfiguration(),io['to']('botmanager')[_0xef3cf9(0xab)](_0xef3cf9(0xd1),config);}function updateLive(_0x337bc1,_0x5abad4){const _0x347ab5=_0x16f155;dbConfig[_0x347ab5(0xee)](_0x347ab5(0xd1))['find']({'botID':_0x337bc1})[_0x347ab5(0x192)]({'live':_0x5abad4})[_0x347ab5(0x139)](),config=getConfiguration(),io['to'](_0x347ab5(0x162))[_0x347ab5(0xab)](_0x347ab5(0xd1),config);}function updateBotName(_0x40de46,_0x22fd09){const _0x5540fd=_0x16f155;dbConfig[_0x5540fd(0xee)](_0x5540fd(0xd1))['find']({'botID':_0x40de46})[_0x5540fd(0x192)]({'botname':_0x22fd09})[_0x5540fd(0x139)](),config=getConfiguration(),io['to'](_0x5540fd(0x162))['emit'](_0x5540fd(0xd1),config);}function telegramError(_0x52732a){const _0x5836d7=_0x16f155;console[_0x5836d7(0x102)](getTimeStamp()+_0x5836d7(0x19c));}function validateTelegram(_0x2b4147){const _0x437659=_0x16f155;if(_0x2b4147[_0x437659(0xdc)][_0x437659(0x1ce)]!=settings[_0x437659(0xa6)]&&'@'+_0x2b4147[_0x437659(0xdc)][_0x437659(0x1ce)]!=settings[_0x437659(0xa6)])return tgBot['sendMessage'](_0x2b4147[_0x437659(0xc7)]['id'],_0x437659(0x15a),{'parse_mode':_0x437659(0x16e)})['catch'](_0x345185=>{telegramError(_0x345185);}),![];return!![];}async function initTelegram(){const _0x147f3f=_0x16f155;if(tgBot)tgBot[_0x147f3f(0xb1)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x147f3f(0xc0)],{'polling':!![]});let _0x284aa0=_0x147f3f(0x13f);_0x284aa0+='\x0a',_0x284aa0+=_0x147f3f(0x90),_0x284aa0+=_0x147f3f(0x96),_0x284aa0+=_0x147f3f(0x196),_0x284aa0+=_0x147f3f(0x1c5),_0x284aa0+=_0x147f3f(0x1d1),_0x284aa0+=_0x147f3f(0x103),_0x284aa0+=_0x147f3f(0x128),_0x284aa0+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x533349=_0x147f3f(0xe0);_0x533349+='\x0a',_0x533349+=_0x284aa0,tgBot[_0x147f3f(0xc3)](/\/start/,_0x4cc0e3=>{const _0xc7306f=_0x147f3f;if(!validateTelegram(_0x4cc0e3))return;if(settings[_0xc7306f(0x136)]!=_0x4cc0e3[_0xc7306f(0xc7)]['id'])updateSetting(_0xc7306f(0x136),_0x4cc0e3['chat']['id']);updateSetting(_0xc7306f(0x124),!![]),tgBot[_0xc7306f(0x18e)](_0x4cc0e3[_0xc7306f(0xc7)]['id'],_0x533349)[_0xc7306f(0x8b)](_0x5d4941=>{telegramError(_0x5d4941);});}),tgBot[_0x147f3f(0xc3)](/\/enable/,_0x349fc2=>{const _0x3ccdac=_0x147f3f;if(!validateTelegram(_0x349fc2))return;if(settings['telegramChatId']!=_0x349fc2[_0x3ccdac(0xc7)]['id'])updateSetting(_0x3ccdac(0x136),_0x349fc2['chat']['id']);updateSetting(_0x3ccdac(0x124),!![]),tgBot[_0x3ccdac(0x18e)](_0x349fc2['chat']['id'],'Notifications\x20enabled')[_0x3ccdac(0x8b)](_0x4546b1=>{telegramError(_0x4546b1);});}),tgBot[_0x147f3f(0xc3)](/\/config/,async _0x400cdd=>{const _0x46ba1f=_0x147f3f;if(!validateTelegram(_0x400cdd))return;tgBot[_0x46ba1f(0x84)](_0x46ba1f(0x178)),tgBot[_0x46ba1f(0x18e)](_0x400cdd[_0x46ba1f(0xc7)]['id'],_0x46ba1f(0x130),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':'orders'},{'text':'Alerts','callback_data':_0x46ba1f(0x10c)},{'text':_0x46ba1f(0x161),'callback_data':_0x46ba1f(0x111)}]]}})[_0x46ba1f(0x8b)](_0x6c7207=>{telegramError(_0x6c7207);}),tgBot['on'](_0x46ba1f(0x178),async _0x1980ee=>{const _0x23c3d1=_0x46ba1f,_0xcec13=_0x1980ee['data'],_0x547e15=_0x1980ee[_0x23c3d1(0xad)];tgBot['answerCallbackQuery'](_0x1980ee['id'])[_0x23c3d1(0x16d)](async()=>{const _0x3e0fb8=_0x23c3d1;_0xcec13=='orders'&&(updateSetting(_0x3e0fb8(0x188),_0x3e0fb8(0x1ca)),updateSetting('telegramEnabled',!![]),await tgBot[_0x3e0fb8(0x18e)](_0x547e15['chat']['id'],_0x3e0fb8(0x129))[_0x3e0fb8(0x8b)](_0x180e17=>{telegramError(_0x180e17);}));_0xcec13=='alerts'&&(updateSetting(_0x3e0fb8(0x188),_0x3e0fb8(0x10c)),updateSetting('telegramEnabled',!![]),await tgBot[_0x3e0fb8(0x18e)](_0x547e15[_0x3e0fb8(0xc7)]['id'],_0x3e0fb8(0x159))['catch'](_0x358cb2=>{telegramError(_0x358cb2);}));_0xcec13=='all'&&(updateSetting(_0x3e0fb8(0x188),_0x3e0fb8(0x111)),updateSetting(_0x3e0fb8(0x124),!![]),await tgBot[_0x3e0fb8(0x18e)](_0x547e15[_0x3e0fb8(0xc7)]['id'],_0x3e0fb8(0x181))[_0x3e0fb8(0x8b)](_0x4c2ebf=>{telegramError(_0x4c2ebf);}));if(!settings[_0x3e0fb8(0x136)])tgBot[_0x3e0fb8(0x18e)](_0x547e15[_0x3e0fb8(0xc7)]['id'],_0x3e0fb8(0xf5))[_0x3e0fb8(0x8b)](_0x4bb1ec=>{telegramError(_0x4bb1ec);});}),tgBot[_0x23c3d1(0x84)](_0x23c3d1(0x178));});}),tgBot[_0x147f3f(0xc3)](/\/status/,_0x212b10=>{const _0xba242d=_0x147f3f;if(!validateTelegram(_0x212b10))return;let _0xee774a='<b>Balance\x20Bot\x20status:</b>\x0a';config[_0xba242d(0xc9)](_0x44b6e3=>{const _0x4f1bb0=_0xba242d;_0xee774a+='Bot\x20'+_0x44b6e3[_0x4f1bb0(0xbd)]+_0x4f1bb0(0x190)+_0x44b6e3[_0x4f1bb0(0x17a)]+':\x20'+_0x44b6e3['status']+_0x4f1bb0(0xfa)+_0x44b6e3[_0x4f1bb0(0xb4)]+'\x0a';}),_0xee774a+='\x0a',_0xee774a+=_0xba242d(0x100),_0xee774a+=!settings[_0xba242d(0x124)]?_0xba242d(0x177):_0xba242d(0x1a8),_0xee774a+=settings[_0xba242d(0x124)]?settings[_0xba242d(0x188)]==_0xba242d(0x111)?_0xba242d(0x16b):_0xba242d(0x18c)+settings[_0xba242d(0x188)]+_0xba242d(0xbb):'',tgBot[_0xba242d(0x18e)](_0x212b10[_0xba242d(0xc7)]['id'],_0xee774a,{'parse_mode':_0xba242d(0x16e)})[_0xba242d(0x8b)](_0xc44a8=>{telegramError(_0xc44a8);});}),tgBot[_0x147f3f(0xc3)](/\/restart/,_0x5cf7e0=>{const _0x23609e=_0x147f3f;if(!validateTelegram(_0x5cf7e0))return;tgBot['removeListener']('callback_query');const _0xb7cf3c=getEnabledBots();if(_0xb7cf3c[_0x23609e(0x107)]==0x0)tgBot[_0x23609e(0x18e)](_0x5cf7e0['chat']['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x582623=>{telegramError(_0x582623);});else{if(_0xb7cf3c['length']>0x1)_0xb7cf3c[_0x23609e(0xe1)]({'botID':_0x23609e(0x111)});let _0x2bce36=[],_0x5b6452=[];const _0x4cf565=_0xb7cf3c['length']%0x4==0x0||_0xb7cf3c[_0x23609e(0x107)]%0x4==0x3||_0xb7cf3c[_0x23609e(0x107)]%0x3==0x1?0x4:0x3;let _0x10d3eb=0x0;_0xb7cf3c[_0x23609e(0xc9)]((_0x2e7088,_0x1828eb)=>{const _0x4ec488=_0x23609e;if(_0x1828eb%_0x4cf565==0x0)_0x5b6452=[];_0x5b6452[_0x4ec488(0xe1)]({'text':_0x2e7088[_0x4ec488(0xbd)]==_0x4ec488(0x111)?_0x4ec488(0x189):'Bot\x20'+_0x2e7088['botID'],'callback_data':_0x2e7088['botID']}),_0x1828eb%_0x4cf565==0x0&&(_0x2bce36[_0x10d3eb]=_0x5b6452,_0x10d3eb++);}),tgBot[_0x23609e(0x18e)](_0x5cf7e0[_0x23609e(0xc7)]['id'],_0x23609e(0xb2),{'reply_markup':{'inline_keyboard':_0x2bce36}})[_0x23609e(0x8b)](_0x556074=>{telegramError(_0x556074);}),tgBot['on'](_0x23609e(0x178),async _0x3c872c=>{const _0x384c6d=_0x23609e,_0x1b024a=_0x3c872c[_0x384c6d(0xdb)],_0x1430e4=_0x3c872c[_0x384c6d(0xad)];tgBot['answerCallbackQuery'](_0x3c872c['id'])['then'](async()=>{const _0x381c98=_0x384c6d;if(_0x1b024a==_0x381c98(0x111)){if(settings[_0x381c98(0x188)]==_0x381c98(0x1ca))tgBot[_0x381c98(0x18e)](_0x1430e4[_0x381c98(0xc7)]['id'],_0x381c98(0x123))['catch'](_0x4a4958=>{telegramError(_0x4a4958);});config[_0x381c98(0xc9)](_0x3ac45f=>{const _0x1c7107=_0x381c98;stopBot(_0x3ac45f[_0x1c7107(0xbd)]);});}else{if(settings[_0x381c98(0x188)]==_0x381c98(0x1ca))tgBot[_0x381c98(0x18e)](_0x1430e4[_0x381c98(0xc7)]['id'],_0x381c98(0xba)+_0x1b024a)[_0x381c98(0x8b)](_0x2597ea=>{telegramError(_0x2597ea);});stopBot(_0x1b024a);}}),tgBot['removeListener'](_0x384c6d(0x178));});}}),tgBot[_0x147f3f(0xc3)](/\/on/,_0x3a14c8=>{const _0x1a509f=_0x147f3f;if(!validateTelegram(_0x3a14c8))return;tgBot['removeListener'](_0x1a509f(0x178));const _0x468545=getDisabledBots();if(_0x468545[_0x1a509f(0x107)]==0x0)tgBot['sendMessage'](_0x3a14c8[_0x1a509f(0xc7)]['id'],_0x1a509f(0x1b8))['catch'](_0x54ffa4=>{telegramError(_0x54ffa4);});else{if(_0x468545[_0x1a509f(0x107)]>0x1)_0x468545[_0x1a509f(0xe1)]({'botID':_0x1a509f(0x111)});let _0x2dc0d7=[],_0x261ef8=[];const _0xa41b42=_0x468545[_0x1a509f(0x107)]%0x4==0x0||_0x468545[_0x1a509f(0x107)]%0x4==0x3||_0x468545[_0x1a509f(0x107)]%0x3==0x1?0x4:0x3;let _0xcc968=0x0;_0x468545['forEach']((_0x28290f,_0x36e747)=>{const _0x42e488=_0x1a509f;if(_0x36e747%_0xa41b42==0x0)_0x261ef8=[];_0x261ef8[_0x42e488(0xe1)]({'text':_0x28290f['botID']=='all'?_0x42e488(0x189):'Bot\x20'+_0x28290f[_0x42e488(0xbd)],'callback_data':_0x28290f[_0x42e488(0xbd)]}),_0x36e747%_0xa41b42==0x0&&(_0x2dc0d7[_0xcc968]=_0x261ef8,_0xcc968++);}),tgBot['sendMessage'](_0x3a14c8[_0x1a509f(0xc7)]['id'],_0x1a509f(0xcd),{'reply_markup':{'inline_keyboard':_0x2dc0d7}})['catch'](_0x30b162=>{telegramError(_0x30b162);}),tgBot['on'](_0x1a509f(0x178),async _0x17336f=>{const _0x7f0af3=_0x1a509f,_0x34b0ad=_0x17336f[_0x7f0af3(0xdb)],_0x1087a6=_0x17336f[_0x7f0af3(0xad)];tgBot[_0x7f0af3(0xfc)](_0x17336f['id'])['then'](async()=>{const _0x20660a=_0x7f0af3;if(_0x34b0ad==_0x20660a(0x111)){if(settings[_0x20660a(0x188)]=='orders')tgBot[_0x20660a(0x18e)](_0x1087a6[_0x20660a(0xc7)]['id'],_0x20660a(0x1a5))[_0x20660a(0x8b)](_0x365738=>{telegramError(_0x365738);});_0x468545[_0x20660a(0xc9)](_0x3bb0b4=>{const _0x7e9010=_0x20660a;if(_0x3bb0b4[_0x7e9010(0xbd)]!=_0x7e9010(0x111))toggleBot(_0x3bb0b4[_0x7e9010(0xbd)],toggleStatus(_0x3bb0b4[_0x7e9010(0xbd)]),'stopped');});}else{if(settings[_0x20660a(0x188)]==_0x20660a(0x1ca))tgBot[_0x20660a(0x18e)](_0x1087a6[_0x20660a(0xc7)]['id'],_0x20660a(0x1b3)+_0x34b0ad)['catch'](_0xcb021f=>{telegramError(_0xcb021f);});toggleBot(_0x34b0ad,toggleStatus(_0x34b0ad),_0x20660a(0x120));}}),tgBot[_0x7f0af3(0x84)](_0x7f0af3(0x178));});}}),tgBot[_0x147f3f(0xc3)](/\/off/,_0x58a703=>{const _0x30bcbe=_0x147f3f;if(!validateTelegram(_0x58a703))return;tgBot[_0x30bcbe(0x84)](_0x30bcbe(0x178));const _0x359a32=getEnabledBots();if(_0x359a32[_0x30bcbe(0x107)]==0x0)tgBot['sendMessage'](_0x58a703[_0x30bcbe(0xc7)]['id'],_0x30bcbe(0xaa))['catch'](_0x1b072e=>{telegramError(_0x1b072e);});else{if(_0x359a32[_0x30bcbe(0x107)]>0x1)_0x359a32[_0x30bcbe(0xe1)]({'botID':_0x30bcbe(0x111)});let _0x1ab0dc=[],_0x224917=[];const _0x55e7d0=_0x359a32[_0x30bcbe(0x107)]%0x4==0x0||_0x359a32[_0x30bcbe(0x107)]%0x4==0x3||_0x359a32[_0x30bcbe(0x107)]%0x3==0x1?0x4:0x3;let _0x29946a=0x0;_0x359a32[_0x30bcbe(0xc9)]((_0x4e3d7d,_0x3a8c03)=>{const _0x1cd5d5=_0x30bcbe;if(_0x3a8c03%_0x55e7d0==0x0)_0x224917=[];_0x224917[_0x1cd5d5(0xe1)]({'text':_0x4e3d7d[_0x1cd5d5(0xbd)]==_0x1cd5d5(0x111)?'All\x20bots':_0x1cd5d5(0xb0)+_0x4e3d7d[_0x1cd5d5(0xbd)],'callback_data':_0x4e3d7d[_0x1cd5d5(0xbd)]}),_0x3a8c03%_0x55e7d0==0x0&&(_0x1ab0dc[_0x29946a]=_0x224917,_0x29946a++);}),tgBot[_0x30bcbe(0x18e)](_0x58a703[_0x30bcbe(0xc7)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x1ab0dc}})['catch'](_0x35fa09=>{telegramError(_0x35fa09);}),tgBot['on'](_0x30bcbe(0x178),async _0x53eca3=>{const _0x4f5e7b=_0x30bcbe,_0x5ac3aa=_0x53eca3['data'],_0x367775=_0x53eca3['message'];tgBot[_0x4f5e7b(0xfc)](_0x53eca3['id'])[_0x4f5e7b(0x16d)](async()=>{const _0xdd2fa7=_0x4f5e7b;if(_0x5ac3aa==_0xdd2fa7(0x111)){if(settings[_0xdd2fa7(0x188)]==_0xdd2fa7(0x1ca))tgBot['sendMessage'](_0x367775[_0xdd2fa7(0xc7)]['id'],_0xdd2fa7(0x14a))[_0xdd2fa7(0x8b)](_0x1404bd=>{telegramError(_0x1404bd);});_0x359a32[_0xdd2fa7(0xc9)](_0x4d8044=>{const _0x1249bb=_0xdd2fa7;if(_0x4d8044[_0x1249bb(0xbd)]!=_0x1249bb(0x111))toggleBot(_0x4d8044[_0x1249bb(0xbd)],toggleStatus(_0x4d8044[_0x1249bb(0xbd)]),_0x1249bb(0x120));});}else{if(settings['telegramEvents']==_0xdd2fa7(0x1ca))tgBot[_0xdd2fa7(0x18e)](_0x367775['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x5ac3aa)[_0xdd2fa7(0x8b)](_0x596b03=>{telegramError(_0x596b03);});toggleBot(_0x5ac3aa,toggleStatus(_0x5ac3aa),_0xdd2fa7(0x120));}}),tgBot[_0x4f5e7b(0x84)](_0x4f5e7b(0x178));});}}),tgBot[_0x147f3f(0xc3)](/\/disable/,_0x1418bc=>{const _0x263305=_0x147f3f;if(!validateTelegram(_0x1418bc))return;tgBot[_0x263305(0x18e)](_0x1418bc[_0x263305(0xc7)]['id'],_0x263305(0x168))[_0x263305(0x8b)](_0x1b4b58=>{telegramError(_0x1b4b58);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x147f3f(0xc3)](/\/help/,_0x135158=>{const _0x4d2117=_0x147f3f;if(!validateTelegram(_0x135158))return;tgBot[_0x4d2117(0x18e)](_0x135158['chat']['id'],_0x284aa0)[_0x4d2117(0x8b)](_0x30765b=>{telegramError(_0x30765b);});}),tgBot['on'](_0x147f3f(0x125),_0xa28293=>{const _0x563410=_0x147f3f;_0xa28293[_0x563410(0x133)]()['includes'](_0x563410(0x195))&&(logging(_0x563410(0x1c0)),tgBot[_0x563410(0xb1)](),tgBot=null,io['to']('botmanager')[_0x563410(0xab)](_0x563410(0x12a),'Invalid\x20Telegram\x20token'));}),process[_0x147f3f(0x126)](_0x147f3f(0x182),()=>{const _0x11f94b=_0x147f3f;if(tgBot)tgBot['stopPolling']();process[_0x11f94b(0x193)](0x1);}),process[_0x147f3f(0x126)](_0x147f3f(0x14f),()=>{const _0x24ce7d=_0x147f3f;if(tgBot)tgBot['stopPolling']();process[_0x24ce7d(0x193)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x24de29,_0x32b3c9){const _0x305742=_0x16f155;if(settings['telegramEnabled']){if(settings[_0x305742(0x188)]==_0x305742(0x111)||(_0x32b3c9[_0x305742(0x15b)]=='error'||_0x32b3c9['type']==_0x305742(0x167))&&settings[_0x305742(0x188)]=='alerts'||_0x32b3c9[_0x305742(0x15b)]==_0x305742(0x112)&&settings[_0x305742(0x188)]==_0x305742(0x1ca)){if(tgBot&&settings[_0x305742(0x136)]){if(_0x32b3c9[_0x305742(0x148)])tgBot[_0x305742(0x18e)](settings[_0x305742(0x136)],_0x32b3c9['botname']+_0x305742(0x87)+_0x32b3c9[_0x305742(0xda)])[_0x305742(0x8b)](_0x5a48f4=>{telegramError(_0x5a48f4);});else tgBot['sendMessage'](settings[_0x305742(0x136)],'Bot\x20'+_0x24de29+_0x305742(0x87)+_0x32b3c9[_0x305742(0xda)])[_0x305742(0x8b)](_0x3c512a=>{telegramError(_0x3c512a);});}}}}function getDeviceWithIp(_0x2450bb){const _0x3b4d21=_0x16f155;return devices[_0x3b4d21(0x104)](_0x8947e3=>_0x8947e3['ip']===_0x2450bb);}function temporaryAccess2FA(_0x3d45aa,_0x456e2c){const _0x4a22b7=_0x16f155;let _0xbac6fb=new Date(),_0x193463=![];if(lastIpApproval){if(_0xbac6fb-lastIpApproval<0x1388)_0x193463=!![];}lastIpApproval=new Date();if(_0x193463)return;tgBot&&settings[_0x4a22b7(0x136)]&&(tgBot[_0x4a22b7(0x84)](_0x4a22b7(0x178)),tgBot[_0x4a22b7(0x18e)](settings[_0x4a22b7(0x136)],_0x4a22b7(0x1a4)+normalizeIP(_0x456e2c)[_0x4a22b7(0x10d)]+_0x4a22b7(0x13b),{'parse_mode':_0x4a22b7(0x16e),'reply_markup':{'inline_keyboard':[[{'text':_0x4a22b7(0x15f),'callback_data':'5'},{'text':_0x4a22b7(0xe8),'callback_data':'15'},{'text':_0x4a22b7(0x1ba),'callback_data':'30'},{'text':_0x4a22b7(0x151),'callback_data':_0x4a22b7(0x151)}]]}})[_0x4a22b7(0x8b)](_0x2209b1=>{telegramError(_0x2209b1);}),tgBot['on']('callback_query',async _0x3bd2d9=>{const _0x4963bb=_0x4a22b7,_0x4c1425=_0x3bd2d9[_0x4963bb(0xdb)],_0x3136df=_0x3bd2d9['message'];tgBot[_0x4963bb(0xfc)](_0x3bd2d9['id'])['then'](async()=>{const _0x48d05e=_0x4963bb;devices[_0x3d45aa][_0x48d05e(0x13d)]={'clientip':_0x456e2c,'timestamp':new Date()['getTime'](),'expiry':_0x4c1425},_0x4c1425!=_0x48d05e(0x151)?(await tgBot[_0x48d05e(0x18e)](_0x3136df[_0x48d05e(0xc7)]['id'],'Access\x20enabled\x20for\x20'+_0x4c1425+'\x20minutes',{'parse_mode':_0x48d05e(0x16e)})[_0x48d05e(0x8b)](_0x1c2425=>{telegramError(_0x1c2425);}),io['to'](_0x3d45aa)[_0x48d05e(0xab)](_0x48d05e(0x10f),{'access':{'allow':![],'reason':_0x48d05e(0x147),'token':null}})):(await tgBot['sendMessage'](_0x3136df[_0x48d05e(0xc7)]['id'],_0x48d05e(0x1c4))[_0x48d05e(0x8b)](_0x290a1d=>{telegramError(_0x290a1d);}),io['to'](_0x3d45aa)[_0x48d05e(0xab)](_0x48d05e(0x10f),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x4963bb(0x84)](_0x4963bb(0x178));}));}function loginAccess2FA(_0x2fd8b3,_0x165d42){const _0x1058d8=_0x16f155;tgBot&&settings['telegramChatId']&&(tgBot[_0x1058d8(0x84)](_0x1058d8(0x178)),tgBot[_0x1058d8(0x18e)](settings[_0x1058d8(0x136)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x165d42)[_0x1058d8(0x10d)]+_0x1058d8(0x13b),{'parse_mode':_0x1058d8(0x16e),'reply_markup':{'inline_keyboard':[[{'text':_0x1058d8(0x1bd),'callback_data':loginExpiry},{'text':_0x1058d8(0x151),'callback_data':_0x1058d8(0x151)}]]}})['catch'](_0x30e967=>{telegramError(_0x30e967);}),tgBot['on'](_0x1058d8(0x178),async _0x1e1ca8=>{const _0x25b026=_0x1058d8,_0x4fcb97=_0x1e1ca8['data'],_0x2a97e3=_0x1e1ca8[_0x25b026(0xad)];tgBot[_0x25b026(0xfc)](_0x1e1ca8['id'])[_0x25b026(0x16d)](async()=>{const _0x1e6271=_0x25b026;devices[_0x2fd8b3][_0x1e6271(0xcc)]={'clientip':_0x165d42,'timestamp':new Date()['getTime'](),'expiry':_0x4fcb97},_0x4fcb97!=_0x1e6271(0x151)?(await tgBot[_0x1e6271(0x18e)](_0x2a97e3[_0x1e6271(0xc7)]['id'],_0x1e6271(0x14e),{'parse_mode':_0x1e6271(0x16e)})['catch'](_0x33b6b4=>{telegramError(_0x33b6b4);}),io['to'](_0x2fd8b3)[_0x1e6271(0xab)](_0x1e6271(0x10f),{'access':{'allow':![],'reason':_0x1e6271(0x147),'token':null}})):(await tgBot[_0x1e6271(0x18e)](_0x2a97e3[_0x1e6271(0xc7)]['id'],_0x1e6271(0x1c2))[_0x1e6271(0x8b)](_0x24c76b=>{telegramError(_0x24c76b);}),io['to'](_0x2fd8b3)[_0x1e6271(0xab)](_0x1e6271(0x10f),{'access':{'allow':![],'reason':_0x1e6271(0xf7),'token':null}}));}),tgBot['removeListener'](_0x25b026(0x178));}));}function getConfiguration(){const _0x359329=_0x16f155;return dbConfig['get'](_0x359329(0xd1))[_0x359329(0x143)](_0x359329(0xbd))[_0x359329(0xc6)]()||[];}function getEnabledBots(){const _0x2399c6=_0x16f155;return dbConfig['get'](_0x2399c6(0xd1))[_0x2399c6(0x143)](_0x2399c6(0xbd))['filter']({'status':'enabled'})['value']()||[];}function getDisabledBots(){const _0x41f3aa=_0x16f155;return dbConfig[_0x41f3aa(0xee)](_0x41f3aa(0xd1))[_0x41f3aa(0x143)]('botID')['filter']({'status':_0x41f3aa(0x164)})[_0x41f3aa(0xc6)]()||[];}function getSettings(){const _0x4d9ddd=_0x16f155;return dbSettings[_0x4d9ddd(0xee)](_0x4d9ddd(0x127))[_0x4d9ddd(0xc6)]()||{'timeshift':0x0};}function getSecure(){const _0x5e3e2f=_0x16f155;return dbSecure[_0x5e3e2f(0xee)](_0x5e3e2f(0x1ad))[_0x5e3e2f(0xc6)]()||{};}function getBlacklist(){const _0x5643e1=_0x16f155;return dbSecure[_0x5643e1(0xee)](_0x5643e1(0xfb))[_0x5643e1(0xc6)]()||[];}function broadcastToBots(_0x2f7359,_0x462529){const _0x256e83=_0x16f155;config[_0x256e83(0xc9)](_0x2ebf94=>{const _0x3e6e4c=_0x256e83;if(_0x2ebf94[_0x3e6e4c(0x10f)]==_0x3e6e4c(0x91)&&_0x2ebf94[_0x3e6e4c(0xb4)]=='running'){if(pid[_0x2ebf94['botID']])pid[_0x2ebf94[_0x3e6e4c(0xbd)]][_0x3e6e4c(0x12d)]({[_0x2f7359]:_0x462529});}});}function storeSettings(_0x4dd460,_0x2252c0=![]){const _0xd2484=_0x16f155;_0x4dd460={...settings,..._0x4dd460};if(_0x2252c0&&_0x4dd460[_0xd2484(0x153)]!=_0xd2484(0x135)&&_0x4dd460['bbPassword']!=''){const _0x45e1f8=crypt[_0xd2484(0x95)](secure[_0xd2484(0x11a)],_0x4dd460['bbPassword'])[_0xd2484(0xad)][_0xd2484(0x1b1)]('@')[0x0],_0x5b2012=bcrypt[_0xd2484(0xd7)](_0x45e1f8,saltRounds);_0x4dd460={..._0x4dd460,'bbPassword':_0x5b2012};}if(_0x2252c0&&_0x4dd460[_0xd2484(0xc0)]!=_0xd2484(0x135)&&_0x4dd460[_0xd2484(0xc0)]!=''){const _0x302196=crypt['decrypt'](secure['privateKey'],_0x4dd460['telegramToken'])[_0xd2484(0xad)][_0xd2484(0x1b1)]('@')[0x0];_0x4dd460={..._0x4dd460,'telegramToken':_0x302196};}const _0x317885=_0x4dd460[_0xd2484(0xc0)]!=_0xd2484(0x135)&&_0x4dd460[_0xd2484(0xc0)]!=settings['telegramToken']||_0x4dd460[_0xd2484(0xa6)]!=settings[_0xd2484(0xa6)],_0x2c31ec=_0x4dd460[_0xd2484(0xc0)]==''||_0x4dd460['telegramUsername']=='';if(_0x317885)_0x4dd460[_0xd2484(0x188)]=_0xd2484(0x111);for(const [_0x1762a4,_0x4d75e3]of Object[_0xd2484(0x155)](_0x4dd460)){if(_0x1762a4==_0xd2484(0xc0)&&_0x4d75e3==_0xd2484(0x135)){_0x4dd460[_0xd2484(0xc0)]=settings['telegramToken'];continue;};if(_0x1762a4=='bbPassword'&&_0x4d75e3==_0xd2484(0x135)){_0x4dd460[_0xd2484(0x153)]=settings[_0xd2484(0x153)];continue;};dbSettings[_0xd2484(0x145)](_0xd2484(0xd8)+_0x1762a4,_0x4d75e3)[_0xd2484(0x139)]();}settings=_0x4dd460,io['to']('botmanager')['emit'](_0xd2484(0x127),cleanSettings()),broadcastToBots('timeshift',settings[_0xd2484(0x1aa)]);if(_0x317885&&!_0x2c31ec)initTelegram();if(_0x317885&&_0x2c31ec)disableTelegram();getAllClients()[_0xd2484(0xc9)](_0x4a8beb=>{const _0x267154=_0xd2484;getSocket(_0x4a8beb['id'])[_0x267154(0xab)]('status',{'access':{'allow':![],'reason':_0x267154(0x147),'token':null}});});}function updateSetting(_0x236638,_0x5331c2){const _0x3931b4=_0x16f155;dbSettings[_0x3931b4(0x145)](_0x3931b4(0xd8)+_0x236638,_0x5331c2)[_0x3931b4(0x139)](),settings=getSettings(),io['to'](_0x3931b4(0x162))[_0x3931b4(0xab)]('settings',cleanSettings());}function storeSecure(_0x4c9bd4){const _0x6f8323=_0x16f155;dbSecure['get'](_0x6f8323(0x1ad))[_0x6f8323(0xe1)](_0x4c9bd4)[_0x6f8323(0x139)](),secure=_0x4c9bd4;}function addBlacklist(_0x293014){const _0xa7a231=_0x16f155;cleanBlacklist();let _0x2b2887;devices[_0x293014][_0xa7a231(0x13d)]?_0x2b2887=Math['max'](devices[_0x293014]['telegramIpApproval'][_0xa7a231(0x85)],loginExpiry):_0x2b2887=loginExpiry,dbSecure[_0xa7a231(0xee)]('blacklist')[_0xa7a231(0xe1)]({'expiry':new Date()[_0xa7a231(0x18d)]()+_0x2b2887*0x3c*0x3e8,'token':devices[_0x293014][_0xa7a231(0x197)][_0xa7a231(0x19f)]})[_0xa7a231(0x139)](),blacklist=dbSecure[_0xa7a231(0xee)](_0xa7a231(0xfb))[_0xa7a231(0xc6)]();}function cleanBlacklist(){const _0x10d457=_0x16f155;let _0x16681f=dbSecure[_0x10d457(0xee)](_0x10d457(0xfb))[_0x10d457(0xa3)]()[_0x10d457(0xc6)](),_0x53836d=new Date()['getTime']();_0x16681f['forEach'](_0x243b50=>{const _0x148b58=_0x10d457;_0x243b50[_0x148b58(0x85)]<_0x53836d&&dbSecure[_0x148b58(0xee)](_0x148b58(0xfb))[_0x148b58(0x117)]({'expiry':_0x243b50['expiry']})[_0x148b58(0x139)]();});}function initStates(){const _0x395903=_0x16f155;let _0x1b73e3=getConfiguration();_0x1b73e3[_0x395903(0xc9)](_0x49ce8a=>{const _0x2810e0=_0x395903;_0x49ce8a[_0x2810e0(0xb4)]=_0x2810e0(0x120);}),storeConfiguration(_0x1b73e3);}function onKeys(){const _0x4ca6a7=new RSA();return new Promise(_0x3c8194=>{const _0x56c15c=_0x3b10;_0x4ca6a7[_0x56c15c(0xff)]()[_0x56c15c(0x16d)](_0x5b1b37=>{_0x3c8194(_0x5b1b37);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x199ffb=_0x16f155;let _0x3a97d3=getConfiguration(),_0x5176ae=![];_0x3a97d3[_0x199ffb(0xc9)](_0x4496d1=>{const _0x3cdb18=_0x199ffb;if(_0x4496d1[_0x3cdb18(0x10f)]==_0x3cdb18(0x109))_0x4496d1[_0x3cdb18(0x10f)]=_0x3cdb18(0x91),_0x5176ae=!![];else _0x4496d1['status']==_0x3cdb18(0x120)&&(_0x4496d1[_0x3cdb18(0x10f)]=_0x3cdb18(0x164),_0x5176ae=!![]);});if(_0x5176ae)storeConfiguration(_0x3a97d3);let _0x52928a=getSecure();if(!_0x52928a[_0x199ffb(0x15e)](_0x199ffb(0x15c))){let _0x13f7a7=await generateKeys();_0x52928a[_0x199ffb(0x146)]=_0x13f7a7[_0x199ffb(0x146)],_0x52928a['privateKey']=_0x13f7a7['privateKey'],_0x52928a[_0x199ffb(0x15c)]=crypto['randomBytes'](0x20)[_0x199ffb(0x133)](_0x199ffb(0x141));;storeSecure(_0x52928a);}let _0x18f812=getSettings();_0x5176ae=![];!_0x18f812[_0x199ffb(0x15e)](_0x199ffb(0xd5))&&(_0x18f812['loginRequired']=![],_0x18f812[_0x199ffb(0x1c9)]='',_0x18f812[_0x199ffb(0x153)]='',_0x18f812['f2aRequired']=![],_0x5176ae=!![]);!_0x18f812[_0x199ffb(0x15e)](_0x199ffb(0x101))&&(_0x18f812[_0x199ffb(0x101)]=![],_0x18f812[_0x199ffb(0x11d)]=[],_0x18f812[_0x199ffb(0x179)]=![],_0x5176ae=!![]);if(!_0x18f812[_0x199ffb(0x15e)]('telegramEnabled')){if(_0x18f812[_0x199ffb(0x136)])_0x18f812[_0x199ffb(0x124)]=!![];else _0x18f812[_0x199ffb(0x124)]=![];_0x5176ae=!![];}if(_0x5176ae)storeSettings(_0x18f812);}function storeConfiguration(_0x4d1a67){const _0x33236f=_0x16f155;dbConfig[_0x33236f(0xee)](_0x33236f(0xd1))[_0x33236f(0x117)]()['write'](),dbConfig[_0x33236f(0xee)](_0x33236f(0xd1))[_0x33236f(0xe1)](..._0x4d1a67)['write'](),config=_0x4d1a67;}function resetPassword(){const _0x112453=_0x16f155;tgBot&&settings[_0x112453(0x136)]&&(tgBot[_0x112453(0x84)](_0x112453(0x178)),tgBot[_0x112453(0x18e)](settings[_0x112453(0x136)],_0x112453(0xea),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x112453(0x175),'callback_data':_0x112453(0x175)},{'text':'no','callback_data':'no'}]]}})[_0x112453(0x8b)](_0x2c7a04=>{telegramError(_0x2c7a04);}),tgBot['on'](_0x112453(0x178),async _0x1b4bb1=>{const _0x39f6f8=_0x112453,_0x118c5a=_0x1b4bb1['data'],_0x2d5b3d=_0x1b4bb1[_0x39f6f8(0xad)];tgBot['answerCallbackQuery'](_0x1b4bb1['id'])['then'](async()=>{const _0x2aa247=_0x39f6f8;if(_0x118c5a!='no'){const _0x1fba4b=0xf,_0x4abcef=_0x2aa247(0x131),_0x27c182=Array[_0x2aa247(0xdc)](crypto['randomFillSync'](new Uint32Array(_0x1fba4b)))['map'](_0x52e5c0=>_0x4abcef[_0x52e5c0%_0x4abcef[_0x2aa247(0x107)]])[_0x2aa247(0x14b)](''),_0x1bb4a4=bcrypt[_0x2aa247(0xd7)](_0x27c182,saltRounds);storeSettings({'bbPassword':_0x1bb4a4}),await tgBot[_0x2aa247(0x18e)](_0x2d5b3d['chat']['id'],_0x2aa247(0xb8)+_0x27c182,{'parse_mode':_0x2aa247(0x16e)})[_0x2aa247(0x8b)](_0x42ac18=>{telegramError(_0x42ac18);});}else await tgBot[_0x2aa247(0x18e)](_0x2d5b3d[_0x2aa247(0xc7)]['id'],_0x2aa247(0x174))[_0x2aa247(0x8b)](_0x419998=>{telegramError(_0x419998);});}),tgBot['removeListener'](_0x39f6f8(0x178));}));}function logging(_0xb09f8b){const _0x14d919=_0x16f155;console[_0x14d919(0x102)](getTimeStamp()+_0x14d919(0xe2)+_0xb09f8b);if(tgBot&&settings[_0x14d919(0x136)]&&settings[_0x14d919(0x188)]!=_0x14d919(0x1ca))tgBot[_0x14d919(0x18e)](settings[_0x14d919(0x136)],_0x14d919(0x1b7)+_0xb09f8b)[_0x14d919(0x8b)](_0x597b92=>{telegramError(_0x597b92);});}function getServerTime(){const _0x5b920b=_0x16f155,_0xe333aa=new Date();return _0xe333aa[_0x5b920b(0x81)]()+'/'+(_0xe333aa[_0x5b920b(0x17d)]()+0x1)[_0x5b920b(0x133)]()[_0x5b920b(0xe9)](0x2,'0')+'/'+_0xe333aa[_0x5b920b(0xd6)]()['toString']()[_0x5b920b(0xe9)](0x2,'0')+'\x20'+_0xe333aa['getHours']()[_0x5b920b(0x133)]()[_0x5b920b(0xe9)](0x2,'0')+':'+_0xe333aa[_0x5b920b(0x19a)]()['toString']()[_0x5b920b(0xe9)](0x2,'0')+':'+_0xe333aa[_0x5b920b(0xf1)]()[_0x5b920b(0x133)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x46fda2=_0x16f155,_0x281b92=shiftedTime();return _0x281b92[_0x46fda2(0x81)]()+'/'+(_0x281b92['getMonth']()+0x1)[_0x46fda2(0x133)]()[_0x46fda2(0xe9)](0x2,'0')+'/'+_0x281b92[_0x46fda2(0xd6)]()[_0x46fda2(0x133)]()[_0x46fda2(0xe9)](0x2,'0')+'\x20'+_0x281b92[_0x46fda2(0x1a0)]()[_0x46fda2(0x133)]()[_0x46fda2(0xe9)](0x2,'0')+':'+_0x281b92[_0x46fda2(0x19a)]()['toString']()['padStart'](0x2,'0')+':'+_0x281b92[_0x46fda2(0xf1)]()[_0x46fda2(0x133)]()[_0x46fda2(0xe9)](0x2,'0');}function shiftedTime(){const _0x67b2a5=_0x16f155,_0x461f11=new Date();let _0x24fcce=_0x461f11;if(settings[_0x67b2a5(0x1aa)]&&settings[_0x67b2a5(0x1aa)]!==0x0)_0x24fcce=fns['add'](_0x461f11,{'hours':settings[_0x67b2a5(0x1aa)]});return _0x24fcce;}function startScheduler(){const _0xe863fb=_0x16f155;let _0x3ecc8a=new Date()[_0xe863fb(0x19b)]();_0x3ecc8a==0x1&&backupConfigFiles();_0x3ecc8a==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x567065=_0x16f155;fs[_0x567065(0x106)](configpath,{'withFileTypes':!![]})[_0x567065(0xc9)](_0x53234b=>{const _0x21dd50=_0x567065;if(!_0x53234b[_0x21dd50(0x1c1)]())fs[_0x21dd50(0x16c)](configpath+_0x53234b[_0x21dd50(0x16f)],configbackuppath+_0x53234b[_0x21dd50(0x16f)]);});}function triggerAnalytics(){const _0x328822=_0x16f155;analytics[_0x328822(0x110)]({'title':_0x328822(0x169),'href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x57cdbc,_0x1613d3){const _0x46841c=_0x16f155;if(_0x57cdbc['username']==settings[_0x46841c(0x1c9)]&&bcrypt[_0x46841c(0x86)](_0x57cdbc[_0x46841c(0x137)],settings[_0x46841c(0x153)])){if(settings[_0x46841c(0xa9)])return{'allow':![],'reason':_0x46841c(0x176),'token':null};else{const _0x51dd92=generateLoginToken(_0x1613d3);return{'allow':!![],'reason':_0x46841c(0xc1),'token':_0x51dd92};}}else return{'allow':![],'reason':_0x46841c(0x180),'token':null};}function refreshToken(_0x385b68){const _0x5a9e9b=_0x16f155,_0x213544=generateLoginToken(_0x385b68);return{'allow':!![],'reason':_0x5a9e9b(0xc1),'token':_0x213544};}function validateAccess(_0x402cd7,_0x443059){const _0x4385b8=_0x16f155;let _0x417d9c=devices[_0x443059]['ip'],_0x2f56a8;const _0x2a4754=_0x2f371e=>{const _0x107f62=_0x3b10;if(settings['loginRequired']){if(settings[_0x107f62(0xa9)]){if(telegram2FaApproved(_0x443059)){const _0x152162=generateLoginToken(_0x443059);return{'allow':!![],'reason':_0x107f62(0x17e),'token':_0x152162};}else return{'allow':![],'reason':_0x107f62(0x1ab),'token':null};}else return _0x2f56a8=validToken(_0x2f371e,_0x443059),_0x2f56a8[_0x107f62(0x15e)](_0x107f62(0x167))?{'allow':!![],'reason':_0x107f62(0x1b9),'token':_0x2f371e}:{'allow':![],'reason':_0x107f62(0x1ab),'token':null};}else return{'allow':!![],'reason':_0x107f62(0xb5),'token':null};};if(settings[_0x4385b8(0x101)]){let _0x245539=[...settings['whitelist'],_0x4385b8(0x165),_0x4385b8(0x1b2),'127.0.0.1'];if(_0x245539['includes'](_0x417d9c))return _0x2a4754(_0x402cd7);else{_0x2f56a8=validToken(_0x402cd7,_0x443059);if(_0x2f56a8[_0x4385b8(0x15e)](_0x4385b8(0x167)))return _0x2a4754(_0x402cd7);else{if(telegramIpApproved(_0x443059)){const _0x572672=generateToken(_0x443059);return _0x2f56a8=_0x2a4754(_0x402cd7),_0x2f56a8['allow']?{'allow':!![],'reason':_0x4385b8(0x108),'token':_0x572672}:_0x2f56a8;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x4385b8(0x185),'token':null}:{'allow':![],'reason':_0x4385b8(0xac),'token':null};}}}else return _0x2a4754(_0x402cd7);}function timelyDecrypt(_0x248962,_0x168106=!![]){const _0x417e6f=_0x16f155;if(_0x248962)try{const _0x1c5290=crypt[_0x417e6f(0x95)](secure[_0x417e6f(0x11a)],_0x248962)[_0x417e6f(0xad)],_0x312aff=_0x1c5290['split']('@')[0x0],_0x34dc5d=_0x1c5290[_0x417e6f(0x1b1)]('@')[0x1],_0x248860=new Date()[_0x417e6f(0x18d)]();if(_0x168106){if(_0x248860-_0x34dc5d<maxSecretAge*0x3e8)return _0x312aff;else return![];}else return _0x312aff;}catch(_0x3a1bd0){return![];}else return![];}const validToken=(_0x291b39,_0x4b9eb3)=>{const _0x101c3a=_0x16f155,_0xe8fe35=devices[_0x4b9eb3]['ip'];if(!_0x291b39)return{'error':_0x101c3a(0xa1)};for(let _0x4324fc of blacklist){if(_0x4324fc[_0x101c3a(0x19f)]==_0x291b39)return{'error':_0x101c3a(0xf4)};}let _0x3b6abb;try{_0x3b6abb=jwt[_0x101c3a(0xdd)](_0x291b39,secure[_0x101c3a(0x15c)]+_0x4b9eb3);}catch{return{'error':_0x101c3a(0x8c)};}if(!_0x3b6abb[_0x101c3a(0x15e)]('clientip')&&!_0x3b6abb[_0x101c3a(0x15e)](_0x101c3a(0x1ce))||!_0x3b6abb[_0x101c3a(0x15e)](_0x101c3a(0x172)))return{'error':_0x101c3a(0x119)};if(!_0x3b6abb['hasOwnProperty'](_0x101c3a(0x1ce))&&_0x3b6abb[_0x101c3a(0x15e)](_0x101c3a(0x1c3))){const {clientip:_0x6c8eed}=_0x3b6abb;return _0xe8fe35==_0x6c8eed?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x101c3a(0xeb)};}else{if(_0x3b6abb[_0x101c3a(0x15e)](_0x101c3a(0x1ce))&&_0x3b6abb[_0x101c3a(0x15e)]('clientip')){const {username:_0x228dcd,clientip:_0xea19eb}=_0x3b6abb;return settings[_0x101c3a(0x1c9)]==_0x228dcd&&_0xe8fe35==_0xea19eb?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x101c3a(0x184)};}}},generateLoginToken=_0x2c0234=>{const _0x375587=_0x16f155;if(_0x2c0234){const _0x1588d5=devices[_0x2c0234]['ip'];return jwt['sign']({'username':settings['bbUsername'],'clientip':_0x1588d5},secure[_0x375587(0x15c)]+_0x2c0234,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2795f6=>{const _0xd6d825=_0x16f155;if(_0x2795f6){const _0xdbce62=devices[_0x2795f6]['ip'];return jwt['sign']({'clientip':_0xdbce62},secure['secret']+_0x2795f6,{'expiresIn':devices[_0x2795f6][_0xd6d825(0x13d)][_0xd6d825(0x85)]*0x3c});}else return![];},telegramIpApproved=_0x5c9396=>{const _0x574cf2=_0x16f155;let _0x343120=![];return devices[_0x5c9396][_0x574cf2(0x13d)]&&devices[_0x5c9396][_0x574cf2(0x13d)][_0x574cf2(0x85)]!=_0x574cf2(0x151)&&(_0x343120=devices[_0x5c9396]['telegramIpApproval']['clientip']==devices[_0x5c9396]['ip']&&new Date()[_0x574cf2(0x18d)]()-devices[_0x5c9396][_0x574cf2(0x13d)][_0x574cf2(0xf0)]<devices[_0x5c9396][_0x574cf2(0x13d)][_0x574cf2(0x85)]*0x3c*0x3e8),_0x343120;},telegram2FaApproved=_0x23997b=>{const _0x37b735=_0x16f155;let _0x4bb16d=![];return devices[_0x23997b][_0x37b735(0xcc)]&&devices[_0x23997b][_0x37b735(0xcc)][_0x37b735(0x85)]!=_0x37b735(0x151)&&(_0x4bb16d=devices[_0x23997b][_0x37b735(0xcc)][_0x37b735(0x1c3)]==devices[_0x23997b]['ip']&&new Date()[_0x37b735(0x18d)]()-devices[_0x23997b][_0x37b735(0xcc)][_0x37b735(0xf0)]<devices[_0x23997b][_0x37b735(0xcc)]['expiry']*0x3c*0x3e8),_0x4bb16d;},normalizeIP=_0x26bc3e=>{const _0x3eb09d=_0x16f155;let _0x1785d3=null,_0x31927e=null;if(ipaddr['isValid'](_0x26bc3e)){const _0x58acd7=ipaddr[_0x3eb09d(0xf8)](_0x26bc3e);_0x58acd7[_0x3eb09d(0xbf)]()===_0x3eb09d(0x19d)?(_0x58acd7[_0x3eb09d(0x158)]()&&(_0x1785d3=_0x58acd7[_0x3eb09d(0x114)]()['toString']()),_0x31927e=_0x58acd7[_0x3eb09d(0x133)]()):(_0x1785d3=_0x58acd7[_0x3eb09d(0x133)](),_0x31927e=_0x58acd7['toIPv4MappedAddress']()[_0x3eb09d(0x133)]());}return{'show':_0x1785d3?_0x1785d3:_0x31927e,'store':_0x31927e};};