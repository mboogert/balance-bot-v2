const _0x447d06=_0x1a2b;(function(_0xda93ba,_0x54508d){const _0x42dc3a=_0x1a2b,_0x56b6cc=_0xda93ba();while(!![]){try{const _0xbe3653=parseInt(_0x42dc3a(0x2e5))/0x1*(parseInt(_0x42dc3a(0x2a8))/0x2)+-parseInt(_0x42dc3a(0x29f))/0x3*(-parseInt(_0x42dc3a(0x213))/0x4)+parseInt(_0x42dc3a(0x245))/0x5*(-parseInt(_0x42dc3a(0x1df))/0x6)+-parseInt(_0x42dc3a(0x228))/0x7+-parseInt(_0x42dc3a(0x2a5))/0x8*(-parseInt(_0x42dc3a(0x27e))/0x9)+parseInt(_0x42dc3a(0x2ab))/0xa+-parseInt(_0x42dc3a(0x26d))/0xb;if(_0xbe3653===_0x54508d)break;else _0x56b6cc['push'](_0x56b6cc['shift']());}catch(_0xf81b93){_0x56b6cc['push'](_0x56b6cc['shift']());}}}(_0x2e49,0x9243b));const _0x985039=function(){let _0x58bfac=!![];return function(_0xff66f3,_0x6343aa){const _0x1ec727=_0x58bfac?function(){const _0x309ec7=_0x1a2b;if(_0x6343aa){const _0x4224d2=_0x6343aa[_0x309ec7(0x1f8)](_0xff66f3,arguments);return _0x6343aa=null,_0x4224d2;}}:function(){};return _0x58bfac=![],_0x1ec727;};}(),_0x4a6407=_0x985039(this,function(){const _0x34eb7c=_0x1a2b;return _0x4a6407['toString']()[_0x34eb7c(0x29b)](_0x34eb7c(0x2f1))[_0x34eb7c(0x1ed)]()['constructor'](_0x4a6407)[_0x34eb7c(0x29b)](_0x34eb7c(0x2f1));});_0x4a6407();'use strict';process['env'][_0x447d06(0x2a4)]=0x1;const childProcess=require(_0x447d06(0x206)),FileSync=require(_0x447d06(0x288)),fs=require('fs'),fns=require('date-fns'),low=require(_0x447d06(0x26c)),path=require(_0x447d06(0x1c4)),crypto=require(_0x447d06(0x25a)),Crypt=require(_0x447d06(0x2d8))[_0x447d06(0x2b1)],RSA=require(_0x447d06(0x2d8))[_0x447d06(0x20a)],bcrypt=require(_0x447d06(0x263)),jwt=require(_0x447d06(0x2ef)),analyticsLib=require(_0x447d06(0x28c))[_0x447d06(0x23f)],googleAnalytics=require(_0x447d06(0x2ca))[_0x447d06(0x23f)],ipaddr=require(_0x447d06(0x258)),argv=require(_0x447d06(0x1eb))(process[_0x447d06(0x1e1)]['slice'](0x2))['argv'],PORT=argv['port']||_0x447d06(0x233),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x447d06(0x2e3)](PORT))return console[_0x447d06(0x200)](_0x447d06(0x247)+PORT+_0x447d06(0x24f)),process[_0x447d06(0x2ea)](0x1);const HOST=argv[_0x447d06(0x255)]||null,userID=argv[_0x447d06(0x2a9)]||'';let bbpath=_0x447d06(0x218);const botfile=_0x447d06(0x2da),configfile='bb-config.json',settingsfile=_0x447d06(0x241),securefile=_0x447d06(0x231);!fs[_0x447d06(0x2e2)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath+'clients'),configpath=userID?bbpath+_0x447d06(0x2e6)+userID+'/':bbpath+_0x447d06(0x2e6),configbackuppath=configpath+_0x447d06(0x1ff);!fs[_0x447d06(0x2e2)](configpath)&&fs[_0x447d06(0x2c2)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x447d06(0x2c2)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x447d06(0x226)]({'bots':[]})[_0x447d06(0x208)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x447d06(0x226)]({'settings':{'timeshift':0x0}})[_0x447d06(0x208)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);function _0x2e49(){const _0x1e8c67=['bots','/help\x20-\x20show\x20available\x20commands\x0a','-config.json','started','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Token\x20blacklisted','exp','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','login\x20token\x20generated','whitelistEnabled','entries','set','search','Notifications\x20enabled\x0a','404\x20Not\x20Found','pidRefreshToken','7629WvORdv','store-settings','cancel-loading','orders','reason','NTBA_FIX_319','8ONPRKZ','</b>\x20?','telegramToken','18fPAUrM','user','2FA\x20required','8352200DnCEgS','User\x20has\x20been\x20validated','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','sortBy','from','Crypt','sockets','telegramChatId','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','length','getMonth','then','::ffff:127.0.0.1','new-disabled','Notifications\x20enabled','index.html','restart','chat','join','handshake','getSeconds','delete-bot','mkdirSync','name','storeHeadless','enabled','value','/:bot/history','secret','running','@analytics/google-analytics','Password\x20reset\x20rejected','error','isValid','getStartingBalances','args','padStart','static','botname','No\x20bots\x20running\x20right\x20now','bot','stopPolling','update-bot','2FA\x20login\x20rejected','hybrid-crypto-js','No\x20authentication\x20token','bot.js','botmanager','sendFile','publicKey','notification','\x20/\x20','split','whitelist','existsSync','test','page','91859uYNBgf','config/','starting\x20new\x20bot\x20|\x20Bot\x20','ipv6','2FA\x20login\x20token\x20generated','exit','/:bot/portfolio','sha256','HTML','forEach','jsonwebtoken','add','(((.+)+)+)+$','RSA-OAEP','telegramUsername','event','hashSync','getDate','readdirSync','UA-192771731-1','getHours','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','data','bot-','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','5\x20min','catch','temporary\x20token\x20generated','fork','<b>Telegram\x20bot\x20status:</b>\x0a','apiKey','toIPv4MappedAddress','privateKey','status','alerts','express','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','get','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','access','path','store','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','all','sign','15\x20min','hasOwnProperty','Ok,\x20will\x20send\x20order\x20notifications\x20only','show','function','Invalid\x20username\x20or\x20IP\x20address','emitHistory','allow','ipc','settings','disconnect','/disable\x20-\x20disable\x20notifications\x0a','login\x20not\x20required','unlinkSync','connection','enabled\x20Bot\x20','\x20minutes','token','build','onText','getPortfolio','You\x20can\x20use\x20the\x20following\x20commands:\x0a','6mYcQLp','-----------------------------------------------------------------------------------','argv','remove','removeListener','find','conn','store-configuration','secure','connected','timestamp','Unauthorized\x20attempt\x20to\x20get\x20logs','yargs/yargs','Access\x20enabled\x20for\x20','toString','referer','/:bot','reject','Bot\x20','encryptedUuid','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','invalid\x20credentials','initclient','place-order','username','apply','placeOrder','2FA\x20login\x20required','get-portfolio','************','socket.io','deleted\x20Bot\x20','backup/','log','kill','reload','Orders','keys','live','child_process','/on\x20-\x20start\x20bot(s)\x0a','write','-results.json','RSA','cancelLoading','/enable\x20-\x20enable\x20notifications\x0a','timeshift','password','All','store-headless','parse','-performance.json','1684lNQhZl','once','Notifications\x20disabled','Unauthorized\x20attempt\x20to\x20store\x20configuration','order','bb/','clientip','telegram','stopped','f2aRequired','Bot\x20Mgr\x20>\x20','::1','error\x20while\x20deleting\x20config\x20files:\x20','Unauthorized\x20attempt\x20to\x20update\x20bot','send','randomFillSync','Unauthorized\x20attempt\x20to\x20update\x20settings','generateKeyPairAsync','Unauthorized\x20attempt\x20to\x20log\x20out','defaults','telegramEvents','1448174KEMrAF','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Unauthorized\x20attempt\x20to\x20delete\x20bot','/:bot/configuration','disabled','botID','Notifications\x20disabled\x0a','removeAllListeners','add-bot','bb-secure.json','telegram2FaApproval','3000','telegramIpApproval','getFullYear','uuid','\x20|\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Notifications\x20types:\x20','/restart\x20-\x20restart\x20bot(s)\x0a','bbPassword','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','getMinutes','build2','default','filter','bb-settings.json','callback_query','randomBytes','verify','1277515JjEkaK','includes','Error:\x20Invalid\x20argument\x20','assign','expiry','restarting\x20Bot\x20','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','/:bot/performance','match','\x20>\x20',',\x20must\x20be\x20a\x204\x20digit\x20number',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','pidExpireLogin','sendMessage','new','emit','host','-events.json','bbUsername','ipaddr.js','getTime','crypto','listen','getUTCHours','kind','Password\x20has\x20been\x20reset\x20to:\x20','accept','logged\x20out','blacklist','temporaryAccessAllowed','bcryptjs','push','isDirectory','inherit','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','All\x20bots','answerCallbackQuery','Invalid\x20Telegram\x20token','SIGINT','lowdb','26451513EdXbAU','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','node-telegram-bot-api','http','message','logout','Invalid\x20IP\x20address','version.json','storeConfiguration','telegramEnabled','All\x20bots\x20running\x20right\x20now','Unauthorized\x20attempt\x20to\x20add\x20bot','stop','settings.','type','30\x20min','6602517kCSSNs','reset-password','success','1000','use','get-logs','/:bot/support','server','remoteAddress','get-starting-balances','lowdb/adapters/FileSync','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','loginRequired','Balance\x20Bot','analytics','cloneDeep','login'];_0x2e49=function(){return _0x1e8c67;};return _0x2e49();}dbSecure[_0x447d06(0x226)]({'secure':{},'blacklist':[]})[_0x447d06(0x208)]();let crypt=new Crypt({'md':_0x447d06(0x2ec),'rsaStandard':_0x447d06(0x2f2)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath+_0x447d06(0x275))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require(_0x447d06(0x308)),app=express(),http=require(_0x447d06(0x271))['createServer'](app);app[_0x447d06(0x282)](express[_0x447d06(0x2d1)](path[_0x447d06(0x2be)](__dirname,bbpath,_0x447d06(0x23e)))),app['use'](express[_0x447d06(0x2d1)](path[_0x447d06(0x2be)](__dirname,bbpath,_0x447d06(0x1db)))),app[_0x447d06(0x30a)]('/',function(_0x772af5,_0x89c684){const _0xcac73e=_0x447d06;_0x89c684[_0xcac73e(0x2dc)](path[_0xcac73e(0x2be)](__dirname,bbpath,_0xcac73e(0x23e),_0xcac73e(0x2bb)));}),app[_0x447d06(0x30a)](_0x447d06(0x1ef),function(_0x1c5925,_0x771898){const _0x52c280=_0x447d06;_0x771898['sendFile'](path[_0x52c280(0x2be)](__dirname,bbpath,_0x52c280(0x1db),'index.html'));}),app[_0x447d06(0x30a)](_0x447d06(0x2eb),(_0x354224,_0x4cec55)=>{const _0x3d1892=_0x447d06;_0x4cec55[_0x3d1892(0x2dc)](path[_0x3d1892(0x2be)](__dirname,bbpath,_0x3d1892(0x1db),'index.html'));}),app[_0x447d06(0x30a)](_0x447d06(0x24c),(_0x1e8266,_0x27bebd)=>{const _0x25e4c3=_0x447d06;_0x27bebd[_0x25e4c3(0x2dc)](path[_0x25e4c3(0x2be)](__dirname,bbpath,'build',_0x25e4c3(0x2bb)));}),app[_0x447d06(0x30a)]('/:bot/coins',(_0x1bd1c6,_0x243fb4)=>{const _0x1c63f8=_0x447d06;_0x243fb4[_0x1c63f8(0x2dc)](path['join'](__dirname,bbpath,'build',_0x1c63f8(0x2bb)));}),app['get'](_0x447d06(0x2c7),(_0x135d2f,_0x3d348c)=>{const _0x17edb9=_0x447d06;_0x3d348c[_0x17edb9(0x2dc)](path[_0x17edb9(0x2be)](__dirname,bbpath,_0x17edb9(0x1db),'index.html'));}),app['get'](_0x447d06(0x22b),(_0x404eb8,_0x325597)=>{const _0x530e06=_0x447d06;_0x325597[_0x530e06(0x2dc)](path['join'](__dirname,bbpath,_0x530e06(0x1db),_0x530e06(0x2bb)));}),app[_0x447d06(0x30a)](_0x447d06(0x284),(_0x4f894d,_0x300b4a)=>{const _0x2fa335=_0x447d06;_0x300b4a[_0x2fa335(0x2dc)](path[_0x2fa335(0x2be)](__dirname,bbpath,'build',_0x2fa335(0x2bb)));});if(HOST)http['listen'](PORT,HOST);else http[_0x447d06(0x25b)](PORT);const io=require(_0x447d06(0x1fd))(http,{}),analytics=analyticsLib({'app':_0x447d06(0x28b),'plugins':[googleAnalytics({'trackingId':_0x447d06(0x2f8)})]}),TelegramBot=require(_0x447d06(0x270));let tgBot;if(settings[_0x447d06(0x2a7)]&&settings[_0x447d06(0x2a7)]!=''&&settings[_0x447d06(0x2f3)]&&settings[_0x447d06(0x2f3)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0xfcfc90=_0x447d06;console[_0xfcfc90(0x200)](''),console[_0xfcfc90(0x200)]('-----------------------------------------------------------------------------------'),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0xfcfc90(0x200)](_0xfcfc90(0x1e0));if(config[_0xfcfc90(0x2b5)]!=0x0)config[_0xfcfc90(0x2ee)](_0x52694a=>{const _0xffd7d5=_0xfcfc90;if(_0x52694a[_0xffd7d5(0x306)]==_0xffd7d5(0x2c5)||_0x52694a['status']==_0xffd7d5(0x253))logging('starting\x20bot\x20|\x20Bot\x20'+_0x52694a[_0xffd7d5(0x22d)]+_0xffd7d5(0x237)+_0x52694a[_0xffd7d5(0x2d2)]),startBot([_0x52694a[_0xffd7d5(0x22d)],userID],{'cwd':bbpath},function(_0x169d03){if(_0x169d03)logging(_0x169d03);});else(_0x52694a[_0xffd7d5(0x306)]=='disabled'||_0x52694a[_0xffd7d5(0x306)]==_0xffd7d5(0x2b9))&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x52694a['botID']+_0xffd7d5(0x237)+_0x52694a['botname']);});else!newBot&&console[_0xfcfc90(0x200)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console['log'](_0xfcfc90(0x1e0)),console[_0xfcfc90(0x200)]('');}function startSocket(){const _0x4487d0=_0x447d06;io['on'](_0x4487d0(0x1d7),_0x278a0f=>{const _0x33d297=_0x4487d0;let _0x2d8412,_0x45ab50,_0x4b3cc9,_0xf0a60f,_0x252228;const _0x7eb4e5=_0x278a0f['handshake']['headers'][_0x33d297(0x1ee)];_0x45ab50=_0x7eb4e5[_0x33d297(0x24d)](/bot[0-9]{3}/);if(_0x45ab50)_0x4b3cc9=_0x45ab50[0x0][_0x33d297(0x24d)](/[0-9]{3}/);if(_0x4b3cc9)_0x2d8412=_0x4b3cc9[0x0];else _0x2d8412=_0x33d297(0x2db);const _0x156887=_0x278a0f[_0x33d297(0x2bf)]['auth'][_0x33d297(0x1f2)];if(!_0x156887)_0x278a0f['emit'](_0x33d297(0x306),{'publicKey':secure['publicKey']});else{_0xf0a60f=timelyDecrypt(_0x156887,![]);if(!_0xf0a60f)logging('Unauthorized\x20login\x20attempt\x20(public\x20key)');else{_0x252228=normalizeIP(_0x278a0f[_0x33d297(0x1e5)][_0x33d297(0x286)])[_0x33d297(0x1c5)];if(!devices[_0xf0a60f])devices[_0xf0a60f]={'uuid':_0xf0a60f,'access':{'token':null}};devices[_0xf0a60f]['ip']=_0x252228;const _0x516fef=addClient(_0x278a0f['id'],_0xf0a60f,_0x2d8412);setAccess(_0x516fef),_0x278a0f['on']('login',_0x485c58=>{const _0x1500fa=_0x33d297,_0x1e035a=timelyDecrypt(_0x485c58[_0x1500fa(0x20e)]);if(_0x1e035a){_0x485c58={'username':_0x485c58[_0x1500fa(0x1f7)],'password':_0x1e035a},devices[_0xf0a60f]['access']=validateCredentials(_0x485c58,_0xf0a60f);if(devices[_0xf0a60f]['access'][_0x1500fa(0x1d0)]==![]&&devices[_0xf0a60f][_0x1500fa(0x1c3)][_0x1500fa(0x2a3)]==_0x1500fa(0x1fa))_0x278a0f['emit'](_0x1500fa(0x306),{'access':devices[_0xf0a60f][_0x1500fa(0x1c3)]}),loginAccess2FA(_0xf0a60f,_0x252228);else{if(devices[_0xf0a60f][_0x1500fa(0x1c3)][_0x1500fa(0x1d0)]==![]&&devices[_0xf0a60f][_0x1500fa(0x1c3)]['reason']==_0x1500fa(0x1f4))_0x278a0f[_0x1500fa(0x254)](_0x1500fa(0x306),{'access':devices[_0xf0a60f][_0x1500fa(0x1c3)]});else devices[_0xf0a60f][_0x1500fa(0x1c3)][_0x1500fa(0x1d0)]&&devices[_0xf0a60f][_0x1500fa(0x1c3)][_0x1500fa(0x2a3)]==_0x1500fa(0x297)&&(getClientsWithUuid(_0xf0a60f)[_0x1500fa(0x2ee)](_0x4dcb2c=>{setAccess(_0x4dcb2c);}),setTokenRefresh(_0xf0a60f),setSessionTimeout(_0x1500fa(0x28e),_0xf0a60f));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x278a0f['on'](_0x33d297(0x27f),()=>{resetPassword();}),_0x278a0f['on'](_0x33d297(0x1d3),_0x58ed28=>{removeClient(_0x278a0f['id']);});}}});}function initClient(_0x193618){const _0xbbb5ee=_0x447d06;if(_0x193618!=_0xbbb5ee(0x2db)&&config[_0xbbb5ee(0x303)]!=''){if(pid[_0x193618])pid[_0x193618]['send']({'function':_0xbbb5ee(0x1f5),'args':null});}}function getSocket(_0x3884b6){const _0x28351a=_0x447d06;return io[_0x28351a(0x2b2)][_0x28351a(0x2b2)][_0x28351a(0x30a)](_0x3884b6);}function setAccess(_0x181d6d){const _0x3027c2=_0x447d06,_0x580f47=getSocket(_0x181d6d['id']),_0x25d301=_0x181d6d['uuid'],_0x58f647=_0x181d6d[_0x3027c2(0x2d4)];devices[_0x25d301]['access']=validateAccess(devices[_0x25d301][_0x3027c2(0x1c3)][_0x3027c2(0x1da)],_0x25d301),_0x580f47[_0x3027c2(0x2be)](_0x25d301);if(devices[_0x25d301][_0x3027c2(0x1c3)]['allow']){_0x580f47['join'](_0x58f647);if(_0x58f647=='botmanager')initializeSocketBotManager(_0x580f47);else initializeSocketBot(_0x580f47);initClient(_0x58f647);}devices[_0x25d301][_0x3027c2(0x1c3)]['token']&&devices[_0x25d301][_0x3027c2(0x1c3)][_0x3027c2(0x2a3)]=='temporary\x20token\x20generated'&&setSessionTimeout('2FA',_0x25d301),devices[_0x25d301][_0x3027c2(0x1c3)][_0x3027c2(0x1da)]&&devices[_0x25d301][_0x3027c2(0x1c3)]['reason']==_0x3027c2(0x2e9)&&setSessionTimeout(_0x3027c2(0x28e),_0x25d301),_0x580f47[_0x3027c2(0x254)]('status',{'status':_0x181d6d[_0x3027c2(0x285)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x25d301][_0x3027c2(0x1c3)],'externalip':devices[_0x25d301]['ip'],'publicKey':secure[_0x3027c2(0x2dd)]}),devices[_0x25d301]['access'][_0x3027c2(0x1d0)]==![]&&devices[_0x25d301][_0x3027c2(0x1c3)][_0x3027c2(0x2a3)]==_0x3027c2(0x2aa)&&temporaryAccess2FA(_0x25d301,devices[_0x25d301]['ip']);}function setSessionTimeout(_0x4cf320,_0x446e36){const _0x474007=_0x447d06;let _0x313ac3;if(_0x4cf320==_0x474007(0x28e))_0x313ac3=loginExpiry*0x3c*0x3e8;else _0x313ac3=devices[_0x446e36][_0x474007(0x234)][_0x474007(0x249)]*0x3c*0x3e8-(new Date()[_0x474007(0x259)]()-devices[_0x446e36][_0x474007(0x234)]['timestamp']);if(devices[_0x446e36]['pidExpireLogin'])clearTimeout(devices[_0x446e36][_0x474007(0x251)]);devices[_0x446e36]['pidExpireLogin']=setTimeout(()=>{const _0x174c10=_0x474007;if(devices[_0x446e36][_0x174c10(0x29e)])clearTimeout(devices[_0x446e36][_0x174c10(0x29e)]);removeSocketListeners(_0x446e36),addBlacklist(_0x446e36),devices[_0x446e36][_0x174c10(0x234)]=null,devices[_0x446e36][_0x174c10(0x232)]=null,devices[_0x446e36]['access']['token']=null,devices[_0x446e36][_0x174c10(0x1c3)]=validateAccess(devices[_0x446e36]['access'][_0x174c10(0x1da)],_0x446e36),!(devices[_0x446e36]['access'][_0x174c10(0x1d0)]&&devices[_0x446e36][_0x174c10(0x1c3)][_0x174c10(0x2a3)]==_0x174c10(0x1d5))&&(_0x4cf320==_0x174c10(0x28e)?io['to'](_0x446e36)[_0x174c10(0x254)](_0x174c10(0x306),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x446e36)['emit'](_0x174c10(0x306),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x446e36][_0x174c10(0x1c3)][_0x174c10(0x1da)]=null;},_0x313ac3);}function setTokenRefresh(_0x2bfa15){const _0x3647e6=_0x447d06;if(devices[_0x2bfa15][_0x3647e6(0x29e)])clearTimeout(devices[_0x2bfa15]['pidRefreshToken']);devices[_0x2bfa15]['pidRefreshToken']=setTimeout(()=>{const _0x28ded7=_0x3647e6;getClientsWithUuid(_0x2bfa15)[_0x28ded7(0x2b5)]!=0x0?(devices[_0x2bfa15][_0x28ded7(0x1c3)]=refreshToken(_0x2bfa15),io['to'](_0x2bfa15)[_0x28ded7(0x254)]('status',{'status':_0x28ded7(0x1e8),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2bfa15][_0x28ded7(0x1c3)],'externalip':devices[_0x2bfa15]['ip'],'publicKey':secure[_0x28ded7(0x2dd)]}),setTokenRefresh(_0x2bfa15)):clearTimeout(devices[_0x2bfa15][_0x28ded7(0x29e)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1fa144){const _0x4afea2=_0x447d06,_0x4f987e=getClient(_0x1fa144['id'])[_0x4afea2(0x236)];_0x1fa144[_0x4afea2(0x254)](_0x4afea2(0x28f),config),_0x1fa144[_0x4afea2(0x254)](_0x4afea2(0x1d2),cleanSettings()),_0x1fa144['on'](_0x4afea2(0x230),_0x1fc426=>{const _0x2a29dc=_0x4afea2;if(validateAccess(_0x1fc426,_0x4f987e)['allow'])addBot();else logging(_0x2a29dc(0x279));}),_0x1fa144['on'](_0x4afea2(0x2d6),(_0x5c14d8,_0x567775)=>{const _0x532ab5=_0x4afea2;if(validateAccess(_0x567775,_0x4f987e)[_0x532ab5(0x1d0)])toggleBot(_0x5c14d8[_0x532ab5(0x22d)],_0x5c14d8[_0x532ab5(0x306)],_0x5c14d8['live']);else logging(_0x532ab5(0x220));}),_0x1fa144['on'](_0x4afea2(0x2c1),(_0x25d42e,_0x84508a)=>{const _0x4a3f3f=_0x4afea2;if(validateAccess(_0x84508a,_0x4f987e)[_0x4a3f3f(0x1d0)])deleteBot(_0x25d42e);else logging(_0x4a3f3f(0x22a));}),_0x1fa144['on'](_0x4afea2(0x2a0),(_0x456929,_0xa4fcb6)=>{const _0x373c05=_0x4afea2;if(validateAccess(_0xa4fcb6,_0x4f987e)[_0x373c05(0x1d0)])storeSettings(_0x456929,!![]);else logging(_0x373c05(0x223));}),_0x1fa144['on'](_0x4afea2(0x273),_0xeb3f84=>{const _0x58dd64=_0x4afea2;if(validateAccess(_0xeb3f84,_0x4f987e)[_0x58dd64(0x1d0)]){if(devices[_0x4f987e][_0x58dd64(0x29e)])clearTimeout(devices[_0x4f987e][_0x58dd64(0x29e)]);if(devices[_0x4f987e][_0x58dd64(0x251)])clearTimeout(devices[_0x4f987e]['pidExpireLogin']);removeSocketListeners(getClient(_0x1fa144['id'])[_0x58dd64(0x236)]),addBlacklist(_0x4f987e),devices[_0x4f987e][_0x58dd64(0x234)]=null,devices[_0x4f987e][_0x58dd64(0x232)]=null,devices[_0x4f987e]['access']['token']=null,io['to'](getClient(_0x1fa144['id'])[_0x58dd64(0x236)])['emit']('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x58dd64(0x225));});}function initializeSocketBot(_0x504e9d){const _0x5ecb65=_0x447d06,_0x2703b8=getClient(_0x504e9d['id'])['bot'],_0x72c65c=getClient(_0x504e9d['id'])[_0x5ecb65(0x236)];_0x504e9d['on'](_0x5ecb65(0x283),(_0x31429b,_0x453d74)=>{const _0x3e68bb=_0x5ecb65;if(validateAccess(_0x453d74,_0x72c65c)[_0x3e68bb(0x1d0)]){if(pid[_0x2703b8])pid[_0x2703b8][_0x3e68bb(0x221)]({'function':_0x3e68bb(0x1cf),'args':_0x31429b});}else logging(_0x3e68bb(0x1ea));}),_0x504e9d['on'](_0x5ecb65(0x1fb),(_0x428b5e,_0x20c021)=>{const _0x257de6=_0x5ecb65;if(validateAccess(_0x20c021,_0x72c65c)[_0x257de6(0x1d0)]){if(pid[_0x2703b8])pid[_0x2703b8]['send']({'function':_0x257de6(0x1dd),'args':_0x428b5e});}else logging(_0x257de6(0x26e));}),_0x504e9d['on'](_0x5ecb65(0x1e6),(_0x13c07d,_0xcf8953)=>{const _0x2aa311=_0x5ecb65;if(validateAccess(_0xcf8953,_0x72c65c)['allow']){if(pid[_0x2703b8])pid[_0x2703b8][_0x2aa311(0x221)]({'function':_0x2aa311(0x276),'args':_0x13c07d});}else logging(_0x2aa311(0x216));}),_0x504e9d['on'](_0x5ecb65(0x210),(_0x573626,_0x52718d)=>{const _0x49e41c=_0x5ecb65;if(validateAccess(_0x52718d,_0x72c65c)[_0x49e41c(0x1d0)]){if(pid[_0x2703b8])pid[_0x2703b8]['send']({'function':_0x49e41c(0x2c4),'args':_0x573626});}else logging(_0x49e41c(0x2b4));}),_0x504e9d['on'](_0x5ecb65(0x287),_0x39d671=>{const _0x4cb22f=_0x5ecb65;if(validateAccess(_0x39d671,_0x72c65c)['allow']){if(pid[_0x2703b8])pid[_0x2703b8][_0x4cb22f(0x221)]({'function':_0x4cb22f(0x2ce),'args':null});}else logging(_0x4cb22f(0x26f));}),_0x504e9d['on'](_0x5ecb65(0x1f6),(_0x276a35,_0x3cc23a)=>{const _0x5f4097=_0x5ecb65;if(validateAccess(_0x3cc23a,_0x72c65c)[_0x5f4097(0x1d0)]){if(pid[_0x2703b8])pid[_0x2703b8][_0x5f4097(0x221)]({'function':_0x5f4097(0x1f9),'args':_0x276a35});}else logging(_0x5f4097(0x24b));}),_0x504e9d['on'](_0x5ecb65(0x2a1),_0x4ca08c=>{const _0x4e3b7e=_0x5ecb65;if(validateAccess(_0x4ca08c,_0x72c65c)[_0x4e3b7e(0x1d0)]){if(pid[_0x2703b8])pid[_0x2703b8]['send']({'function':_0x4e3b7e(0x20b),'args':null});}else logging(_0x4e3b7e(0x1c6));}),_0x504e9d['on'](_0x5ecb65(0x273),_0x1b77b0=>{const _0xa6ebd7=_0x5ecb65;if(validateAccess(_0x1b77b0,_0x72c65c)[_0xa6ebd7(0x1d0)]){if(devices[_0x72c65c][_0xa6ebd7(0x29e)])clearTimeout(devices[_0x72c65c]['pidRefreshToken']);if(devices[_0x72c65c][_0xa6ebd7(0x251)])clearTimeout(devices[_0x72c65c][_0xa6ebd7(0x251)]);removeSocketListeners(getClient(_0x504e9d['id'])[_0xa6ebd7(0x236)]),addBlacklist(_0x72c65c),devices[_0x72c65c]['telegramIpApproval']=null,devices[_0x72c65c][_0xa6ebd7(0x232)]=null,devices[_0x72c65c]['access'][_0xa6ebd7(0x1da)]=null,io['to'](getClient(_0x504e9d['id'])[_0xa6ebd7(0x236)])[_0xa6ebd7(0x254)](_0xa6ebd7(0x306),{'access':{'allow':![],'reason':_0xa6ebd7(0x260),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x5d6f87){getClientsWithUuid(_0x5d6f87)['forEach'](_0xc7b35f=>{const _0x1f638f=_0x1a2b;getSocket(_0xc7b35f['id'])[_0x1f638f(0x22f)]();});}function cleanSettings(){const _0x1982e3=_0x447d06;let _0x1f455a=settings;return settings[_0x1982e3(0x2a7)]&&settings[_0x1982e3(0x2a7)]!=''&&(_0x1f455a={..._0x1f455a,'telegramToken':'************'}),settings[_0x1982e3(0x23b)]&&settings['bbPassword']!=''&&(_0x1f455a={..._0x1f455a,'bbPassword':_0x1982e3(0x1fc)}),_0x1f455a;}function startBot(_0x26ecad,_0x5812fd,_0xfb49dc){const _0x4e2faa=_0x447d06;let _0x2a597d=![];const _0x572309=_0x26ecad[0x0];_0x5812fd={..._0x5812fd,'stdio':['inherit',_0x4e2faa(0x266),'inherit',_0x4e2faa(0x1d1)]},pid[_0x572309]=childProcess[_0x4e2faa(0x301)](botfile,_0x26ecad,_0x5812fd),pid[_0x572309]['on'](_0x4e2faa(0x272),_0x3e1f01=>{const _0x132bb6=_0x4e2faa;switch(Object[_0x132bb6(0x204)](_0x3e1f01)[0x0]){case _0x132bb6(0x2d2):updateBotName(_0x572309,_0x3e1f01[_0x132bb6(0x2d2)]);break;case _0x132bb6(0x306):updateStatus(_0x572309,_0x3e1f01[_0x132bb6(0x306)]);break;case _0x132bb6(0x205):updateLive(_0x572309,_0x3e1f01[_0x132bb6(0x205)]);break;case _0x132bb6(0x292):updateLive(_0x572309,_0x3e1f01[_0x132bb6(0x292)]),io['to'](_0x572309)['emit']('status',{'access':{'allow':![],'reason':_0x132bb6(0x202),'token':null}});break;case _0x132bb6(0x27a):_0x3e1f01[_0x132bb6(0x27a)]==_0x132bb6(0x2bc)&&stopBot(_0x572309);_0x3e1f01[_0x132bb6(0x27a)]==_0x132bb6(0x201)&&toggleBot(_0x572309,'disabled',_0x132bb6(0x21b));break;case _0x132bb6(0x21a):sendTelegram(_0x572309,_0x3e1f01[_0x132bb6(0x21a)]);break;case'function':io['to'](_0x572309)[_0x132bb6(0x254)](_0x3e1f01[_0x132bb6(0x1cd)],_0x3e1f01[_0x132bb6(0x2cf)]);break;}}),pid[_0x572309]['on'](_0x4e2faa(0x2cc),function(_0x57fea6){if(_0x2a597d)return;_0x2a597d=!![],_0xfb49dc(_0x57fea6);}),pid[_0x572309]['on'](_0x4e2faa(0x2ea),function(_0x4cb498){const _0x408b21=_0x4e2faa;if(_0x2a597d)return;_0x2a597d=!![],_0xfb49dc(null);const _0x5e8c1e=dbConfig[_0x408b21(0x30a)](_0x408b21(0x28f))[_0x408b21(0x1e4)]({'botID':_0x572309})[_0x408b21(0x2c6)]();_0x5e8c1e&&(_0x5e8c1e[_0x408b21(0x306)]=='enabled'||_0x5e8c1e[_0x408b21(0x306)]=='new')&&(updateLive(_0x572309,_0x408b21(0x21b)),logging(_0x408b21(0x24a)+_0x572309),startBot([_0x572309,userID],{'cwd':bbpath},function(_0x1e2fa9){if(_0x1e2fa9)logging(_0x1e2fa9);}));});}function stopBot(_0x3377e1){const _0xe2a874=_0x447d06;getClientsWithBotID(_0x3377e1)[_0xe2a874(0x2ee)](_0x3161b2=>{getSocket(_0x3161b2['id'])['disconnect'](!![]),removeClient(_0x3161b2['id']);});if(pid[_0x3377e1])pid[_0x3377e1]['kill']();}function addBot(){const _0x2beaea=_0x447d06;let _0x586089;for(let _0x930591=0x1;_0x930591<0x3e9;_0x930591++){_0x586089=_0x930591[_0x2beaea(0x1ed)]()[_0x2beaea(0x2d0)](0x3,'0');let _0x34f412=config[_0x2beaea(0x1e4)](_0x19d420=>_0x19d420[_0x2beaea(0x22d)]==_0x586089);if(!_0x34f412)break;}if(_0x586089===_0x2beaea(0x281)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging(_0x2beaea(0x2e7)+_0x586089),dbConfig[_0x2beaea(0x30a)](_0x2beaea(0x28f))[_0x2beaea(0x264)]({'botID':_0x586089,'botname':_0x2beaea(0x1f1)+_0x586089,'status':_0x2beaea(0x253),'live':''})[_0x2beaea(0x208)](),startBot([_0x586089,userID],{'cwd':bbpath},function(_0x37cefe){if(_0x37cefe)logging(_0x37cefe);}),config=getConfiguration(),io['to'](_0x2beaea(0x2db))[_0x2beaea(0x254)](_0x2beaea(0x28f),config);}function deleteBot(_0x845a){const _0x437191=_0x447d06;getClientsWithBotID(_0x845a)[_0x437191(0x2ee)](_0x4376dd=>{const _0x34b2a5=_0x437191;getSocket(_0x4376dd['id'])[_0x34b2a5(0x1d3)](!![]),removeClient(_0x4376dd['id']);}),dbConfig[_0x437191(0x30a)]('bots')[_0x437191(0x1e2)]({'botID':_0x845a})[_0x437191(0x208)](),logging(_0x437191(0x1fe)+_0x845a),stopBot(_0x845a);try{fs[_0x437191(0x1d6)](path[_0x437191(0x2be)](configpath,_0x437191(0x2fc)+_0x845a+_0x437191(0x291))),fs[_0x437191(0x1d6)](path[_0x437191(0x2be)](configpath,_0x437191(0x2fc)+_0x845a+_0x437191(0x256))),fs[_0x437191(0x1d6)](path['join'](configpath,_0x437191(0x2fc)+_0x845a+_0x437191(0x212))),fs[_0x437191(0x1d6)](path['join'](configpath,_0x437191(0x2fc)+_0x845a+_0x437191(0x209)));}catch(_0x486e68){if(_0x486e68)logging(_0x437191(0x21f),_0x486e68);}config=getConfiguration(),io['to'](_0x437191(0x2db))[_0x437191(0x254)](_0x437191(0x28f),config);}function toggleBot(_0x126428,_0x1c7977,_0x530771){const _0x4e06d1=_0x447d06;dbConfig[_0x4e06d1(0x30a)]('bots')[_0x4e06d1(0x1e4)]({'botID':_0x126428})['assign']({'status':_0x1c7977})[_0x4e06d1(0x248)]({'live':_0x530771})[_0x4e06d1(0x208)]();if(_0x1c7977==_0x4e06d1(0x2c5)||_0x1c7977==_0x4e06d1(0x253))logging(_0x4e06d1(0x1d8)+_0x126428),startBot([_0x126428,userID],{'cwd':bbpath},function(_0x12f024){if(_0x12f024)logging(_0x12f024);});else(_0x1c7977==_0x4e06d1(0x22c)||_0x1c7977==_0x4e06d1(0x2b9))&&(logging('disabled\x20Bot\x20'+_0x126428),stopBot(_0x126428));config=getConfiguration(),io['to'](_0x4e06d1(0x2db))[_0x4e06d1(0x254)](_0x4e06d1(0x28f),config);}function toggleStatus(_0x2e89b5){const _0x6be278=_0x447d06;let _0x3542af=dbConfig[_0x6be278(0x30a)](_0x6be278(0x28f))[_0x6be278(0x1e4)]({'botID':_0x2e89b5})[_0x6be278(0x2c6)](),_0x36aef2;if(_0x3542af['status']==='enabled')_0x36aef2=_0x6be278(0x22c);else{if(_0x3542af[_0x6be278(0x306)]===_0x6be278(0x253))_0x36aef2=_0x6be278(0x2b9);else{if(_0x3542af[_0x6be278(0x306)]===_0x6be278(0x2b9))_0x36aef2=_0x6be278(0x253);else{if(_0x3542af[_0x6be278(0x306)]===_0x6be278(0x22c))_0x36aef2=_0x6be278(0x2c5);}}}return _0x36aef2;}function updateStatus(_0x27ca94,_0x255acd){const _0x5da01c=_0x447d06;dbConfig[_0x5da01c(0x30a)](_0x5da01c(0x28f))[_0x5da01c(0x1e4)]({'botID':_0x27ca94})[_0x5da01c(0x248)]({'status':_0x255acd})[_0x5da01c(0x208)](),config=getConfiguration(),io['to'](_0x5da01c(0x2db))[_0x5da01c(0x254)](_0x5da01c(0x28f),config);}function updateLive(_0x461e78,_0x213f19){const _0x40798c=_0x447d06;dbConfig['get'](_0x40798c(0x28f))[_0x40798c(0x1e4)]({'botID':_0x461e78})[_0x40798c(0x248)]({'live':_0x213f19})[_0x40798c(0x208)](),config=getConfiguration(),io['to'](_0x40798c(0x2db))[_0x40798c(0x254)](_0x40798c(0x28f),config);}function updateBotName(_0x40e9f1,_0x4e2f53){const _0x4da93a=_0x447d06;dbConfig[_0x4da93a(0x30a)](_0x4da93a(0x28f))[_0x4da93a(0x1e4)]({'botID':_0x40e9f1})[_0x4da93a(0x248)]({'botname':_0x4e2f53})[_0x4da93a(0x208)](),config=getConfiguration(),io['to'](_0x4da93a(0x2db))[_0x4da93a(0x254)](_0x4da93a(0x28f),config);}function telegramError(_0x3ad596){const _0x3349fb=_0x447d06;console[_0x3349fb(0x200)](getTimeStamp()+_0x3349fb(0x250));}function validateTelegram(_0x283992){const _0x254f39=_0x447d06;if(_0x283992[_0x254f39(0x2b0)][_0x254f39(0x1f7)]!=settings['telegramUsername']&&'@'+_0x283992[_0x254f39(0x2b0)][_0x254f39(0x1f7)]!=settings['telegramUsername'])return tgBot['sendMessage'](_0x283992[_0x254f39(0x2bd)]['id'],_0x254f39(0x1f3),{'parse_mode':_0x254f39(0x2ed)})[_0x254f39(0x2ff)](_0x2c44fe=>{telegramError(_0x2c44fe);}),![];return!![];}async function initTelegram(){const _0x47e010=_0x447d06;if(tgBot)tgBot[_0x47e010(0x2d5)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x47e010(0x2a7)],{'polling':!![]});let _0x490325=_0x47e010(0x1de);_0x490325+='\x0a',_0x490325+=_0x47e010(0x20c),_0x490325+=_0x47e010(0x1d4),_0x490325+=_0x47e010(0x2fd),_0x490325+=_0x47e010(0x23a),_0x490325+=_0x47e010(0x207),_0x490325+='/off\x20-\x20stop\x20bot(s)\x0a',_0x490325+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x490325+=_0x47e010(0x290);let _0x59c50c=_0x47e010(0x309);_0x59c50c+='\x0a',_0x59c50c+=_0x490325,tgBot[_0x47e010(0x1dc)](/\/start/,_0x5e72d6=>{const _0x47e441=_0x47e010;if(!validateTelegram(_0x5e72d6))return;if(settings[_0x47e441(0x2b3)]!=_0x5e72d6['chat']['id'])updateSetting(_0x47e441(0x2b3),_0x5e72d6['chat']['id']);updateSetting(_0x47e441(0x277),!![]),tgBot['sendMessage'](_0x5e72d6[_0x47e441(0x2bd)]['id'],_0x59c50c)['catch'](_0x29b9ff=>{telegramError(_0x29b9ff);});}),tgBot[_0x47e010(0x1dc)](/\/enable/,_0x22d00d=>{const _0x4bab24=_0x47e010;if(!validateTelegram(_0x22d00d))return;if(settings[_0x4bab24(0x2b3)]!=_0x22d00d[_0x4bab24(0x2bd)]['id'])updateSetting(_0x4bab24(0x2b3),_0x22d00d[_0x4bab24(0x2bd)]['id']);updateSetting(_0x4bab24(0x277),!![]),tgBot[_0x4bab24(0x252)](_0x22d00d[_0x4bab24(0x2bd)]['id'],_0x4bab24(0x2ba))[_0x4bab24(0x2ff)](_0x1ce6ea=>{telegramError(_0x1ce6ea);});}),tgBot[_0x47e010(0x1dc)](/\/config/,async _0x1736ac=>{const _0x3d4074=_0x47e010;if(!validateTelegram(_0x1736ac))return;tgBot[_0x3d4074(0x1e3)](_0x3d4074(0x242)),tgBot['sendMessage'](_0x1736ac['chat']['id'],_0x3d4074(0x2ad),{'reply_markup':{'inline_keyboard':[[{'text':_0x3d4074(0x203),'callback_data':_0x3d4074(0x2a2)},{'text':'Alerts','callback_data':_0x3d4074(0x307)},{'text':_0x3d4074(0x20f),'callback_data':'all'}]]}})[_0x3d4074(0x2ff)](_0x2286fa=>{telegramError(_0x2286fa);}),tgBot['on']('callback_query',async _0x52c5fa=>{const _0x5eb9a2=_0x3d4074,_0x44fbec=_0x52c5fa['data'],_0x119613=_0x52c5fa[_0x5eb9a2(0x272)];tgBot[_0x5eb9a2(0x269)](_0x52c5fa['id'])[_0x5eb9a2(0x2b7)](async()=>{const _0x362ee6=_0x5eb9a2;_0x44fbec==_0x362ee6(0x2a2)&&(updateSetting('telegramEvents',_0x362ee6(0x2a2)),updateSetting(_0x362ee6(0x277),!![]),await tgBot[_0x362ee6(0x252)](_0x119613[_0x362ee6(0x2bd)]['id'],_0x362ee6(0x1cb))['catch'](_0x1b1dc7=>{telegramError(_0x1b1dc7);}));_0x44fbec==_0x362ee6(0x307)&&(updateSetting(_0x362ee6(0x227),_0x362ee6(0x307)),updateSetting(_0x362ee6(0x277),!![]),await tgBot[_0x362ee6(0x252)](_0x119613[_0x362ee6(0x2bd)]['id'],_0x362ee6(0x293))[_0x362ee6(0x2ff)](_0x4887dd=>{telegramError(_0x4887dd);}));_0x44fbec==_0x362ee6(0x1c7)&&(updateSetting(_0x362ee6(0x227),_0x362ee6(0x1c7)),updateSetting(_0x362ee6(0x277),!![]),await tgBot['sendMessage'](_0x119613[_0x362ee6(0x2bd)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x362ee6(0x2ff)](_0x40401d=>{telegramError(_0x40401d);}));if(!settings['telegramChatId'])tgBot[_0x362ee6(0x252)](_0x119613[_0x362ee6(0x2bd)]['id'],_0x362ee6(0x289))[_0x362ee6(0x2ff)](_0x460b=>{telegramError(_0x460b);});}),tgBot[_0x5eb9a2(0x1e3)](_0x5eb9a2(0x242));});}),tgBot[_0x47e010(0x1dc)](/\/status/,_0x38aebd=>{const _0x57a108=_0x47e010;if(!validateTelegram(_0x38aebd))return;let _0x1c5d10='<b>Balance\x20Bot\x20status:</b>\x0a';config[_0x57a108(0x2ee)](_0x1ad155=>{const _0xd95bc4=_0x57a108;_0x1c5d10+=_0xd95bc4(0x1f1)+_0x1ad155[_0xd95bc4(0x22d)]+_0xd95bc4(0x237)+_0x1ad155[_0xd95bc4(0x2d2)]+':\x20'+_0x1ad155[_0xd95bc4(0x306)]+_0xd95bc4(0x2df)+_0x1ad155[_0xd95bc4(0x205)]+'\x0a';}),_0x1c5d10+='\x0a',_0x1c5d10+=_0x57a108(0x302),_0x1c5d10+=!settings[_0x57a108(0x277)]?_0x57a108(0x22e):_0x57a108(0x29c),_0x1c5d10+=settings[_0x57a108(0x277)]?settings['telegramEvents']==_0x57a108(0x1c7)?_0x57a108(0x267):_0x57a108(0x239)+settings[_0x57a108(0x227)]+'\x20only\x0a':'',tgBot[_0x57a108(0x252)](_0x38aebd[_0x57a108(0x2bd)]['id'],_0x1c5d10,{'parse_mode':_0x57a108(0x2ed)})['catch'](_0x4a75b8=>{telegramError(_0x4a75b8);});}),tgBot[_0x47e010(0x1dc)](/\/restart/,_0x520943=>{const _0x284da5=_0x47e010;if(!validateTelegram(_0x520943))return;tgBot['removeListener'](_0x284da5(0x242));const _0x26734b=getEnabledBots();if(_0x26734b[_0x284da5(0x2b5)]==0x0)tgBot[_0x284da5(0x252)](_0x520943[_0x284da5(0x2bd)]['id'],_0x284da5(0x2d3))[_0x284da5(0x2ff)](_0x4cae51=>{telegramError(_0x4cae51);});else{if(_0x26734b[_0x284da5(0x2b5)]>0x1)_0x26734b[_0x284da5(0x264)]({'botID':_0x284da5(0x1c7)});let _0x259ef8=[],_0x1b49da=[];const _0x5d94b5=_0x26734b['length']%0x4==0x0||_0x26734b[_0x284da5(0x2b5)]%0x4==0x3||_0x26734b['length']%0x3==0x1?0x4:0x3;let _0x232a1b=0x0;_0x26734b['forEach']((_0xd4aff7,_0x14d6e3)=>{const _0x3d6438=_0x284da5;if(_0x14d6e3%_0x5d94b5==0x0)_0x1b49da=[];_0x1b49da['push']({'text':_0xd4aff7[_0x3d6438(0x22d)]=='all'?_0x3d6438(0x268):_0x3d6438(0x1f1)+_0xd4aff7[_0x3d6438(0x22d)],'callback_data':_0xd4aff7[_0x3d6438(0x22d)]}),_0x14d6e3%_0x5d94b5==0x0&&(_0x259ef8[_0x232a1b]=_0x1b49da,_0x232a1b++);}),tgBot[_0x284da5(0x252)](_0x520943[_0x284da5(0x2bd)]['id'],_0x284da5(0x238),{'reply_markup':{'inline_keyboard':_0x259ef8}})[_0x284da5(0x2ff)](_0x3e939f=>{telegramError(_0x3e939f);}),tgBot['on']('callback_query',async _0x1af676=>{const _0x264015=_0x284da5,_0x6093fa=_0x1af676[_0x264015(0x2fb)],_0x2deee7=_0x1af676[_0x264015(0x272)];tgBot['answerCallbackQuery'](_0x1af676['id'])[_0x264015(0x2b7)](async()=>{const _0x2516b1=_0x264015;if(_0x6093fa=='all'){if(settings[_0x2516b1(0x227)]=='orders')tgBot[_0x2516b1(0x252)](_0x2deee7[_0x2516b1(0x2bd)]['id'],_0x2516b1(0x296))[_0x2516b1(0x2ff)](_0x5eba34=>{telegramError(_0x5eba34);});config['forEach'](_0x3c2f0f=>{const _0x55a6ea=_0x2516b1;stopBot(_0x3c2f0f[_0x55a6ea(0x22d)]);});}else{if(settings[_0x2516b1(0x227)]==_0x2516b1(0x2a2))tgBot[_0x2516b1(0x252)](_0x2deee7[_0x2516b1(0x2bd)]['id'],_0x2516b1(0x23c)+_0x6093fa)[_0x2516b1(0x2ff)](_0x2088a9=>{telegramError(_0x2088a9);});stopBot(_0x6093fa);}}),tgBot[_0x264015(0x1e3)](_0x264015(0x242));});}}),tgBot[_0x47e010(0x1dc)](/\/on/,_0x327654=>{const _0x356019=_0x47e010;if(!validateTelegram(_0x327654))return;tgBot[_0x356019(0x1e3)]('callback_query');const _0x515edc=getDisabledBots();if(_0x515edc[_0x356019(0x2b5)]==0x0)tgBot[_0x356019(0x252)](_0x327654[_0x356019(0x2bd)]['id'],_0x356019(0x278))[_0x356019(0x2ff)](_0xa1fed6=>{telegramError(_0xa1fed6);});else{if(_0x515edc['length']>0x1)_0x515edc[_0x356019(0x264)]({'botID':_0x356019(0x1c7)});let _0x12449f=[],_0x28ccdb=[];const _0x53ed8d=_0x515edc[_0x356019(0x2b5)]%0x4==0x0||_0x515edc['length']%0x4==0x3||_0x515edc['length']%0x3==0x1?0x4:0x3;let _0x3bde41=0x0;_0x515edc[_0x356019(0x2ee)]((_0x4a599b,_0x21351e)=>{const _0x353eea=_0x356019;if(_0x21351e%_0x53ed8d==0x0)_0x28ccdb=[];_0x28ccdb[_0x353eea(0x264)]({'text':_0x4a599b[_0x353eea(0x22d)]==_0x353eea(0x1c7)?_0x353eea(0x268):_0x353eea(0x1f1)+_0x4a599b['botID'],'callback_data':_0x4a599b['botID']}),_0x21351e%_0x53ed8d==0x0&&(_0x12449f[_0x3bde41]=_0x28ccdb,_0x3bde41++);}),tgBot[_0x356019(0x252)](_0x327654[_0x356019(0x2bd)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x12449f}})[_0x356019(0x2ff)](_0x3cc9b1=>{telegramError(_0x3cc9b1);}),tgBot['on']('callback_query',async _0x497b62=>{const _0x48c7b5=_0x356019,_0x293c74=_0x497b62['data'],_0x6da8f5=_0x497b62[_0x48c7b5(0x272)];tgBot['answerCallbackQuery'](_0x497b62['id'])['then'](async()=>{const _0x575047=_0x48c7b5;if(_0x293c74=='all'){if(settings[_0x575047(0x227)]=='orders')tgBot[_0x575047(0x252)](_0x6da8f5[_0x575047(0x2bd)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x575047(0x2ff)](_0x20ad13=>{telegramError(_0x20ad13);});_0x515edc[_0x575047(0x2ee)](_0x128cd1=>{const _0x11569f=_0x575047;if(_0x128cd1[_0x11569f(0x22d)]!=_0x11569f(0x1c7))toggleBot(_0x128cd1[_0x11569f(0x22d)],toggleStatus(_0x128cd1[_0x11569f(0x22d)]),_0x11569f(0x21b));});}else{if(settings[_0x575047(0x227)]==_0x575047(0x2a2))tgBot[_0x575047(0x252)](_0x6da8f5[_0x575047(0x2bd)]['id'],_0x575047(0x229)+_0x293c74)['catch'](_0x53eec9=>{telegramError(_0x53eec9);});toggleBot(_0x293c74,toggleStatus(_0x293c74),_0x575047(0x21b));}}),tgBot[_0x48c7b5(0x1e3)]('callback_query');});}}),tgBot[_0x47e010(0x1dc)](/\/off/,_0x17a86a=>{const _0x55fb05=_0x47e010;if(!validateTelegram(_0x17a86a))return;tgBot[_0x55fb05(0x1e3)](_0x55fb05(0x242));const _0x212ca4=getEnabledBots();if(_0x212ca4[_0x55fb05(0x2b5)]==0x0)tgBot['sendMessage'](_0x17a86a['chat']['id'],_0x55fb05(0x2d3))['catch'](_0x57473f=>{telegramError(_0x57473f);});else{if(_0x212ca4[_0x55fb05(0x2b5)]>0x1)_0x212ca4[_0x55fb05(0x264)]({'botID':'all'});let _0x4b47b1=[],_0x24293a=[];const _0x10f85d=_0x212ca4[_0x55fb05(0x2b5)]%0x4==0x0||_0x212ca4[_0x55fb05(0x2b5)]%0x4==0x3||_0x212ca4[_0x55fb05(0x2b5)]%0x3==0x1?0x4:0x3;let _0x46c82b=0x0;_0x212ca4[_0x55fb05(0x2ee)]((_0x444d17,_0x5d217d)=>{const _0x49c278=_0x55fb05;if(_0x5d217d%_0x10f85d==0x0)_0x24293a=[];_0x24293a['push']({'text':_0x444d17[_0x49c278(0x22d)]==_0x49c278(0x1c7)?_0x49c278(0x268):_0x49c278(0x1f1)+_0x444d17[_0x49c278(0x22d)],'callback_data':_0x444d17[_0x49c278(0x22d)]}),_0x5d217d%_0x10f85d==0x0&&(_0x4b47b1[_0x46c82b]=_0x24293a,_0x46c82b++);}),tgBot['sendMessage'](_0x17a86a[_0x55fb05(0x2bd)]['id'],_0x55fb05(0x2ae),{'reply_markup':{'inline_keyboard':_0x4b47b1}})['catch'](_0x3a46e3=>{telegramError(_0x3a46e3);}),tgBot['on'](_0x55fb05(0x242),async _0x25010e=>{const _0xd89f74=_0x55fb05,_0x2c4cd3=_0x25010e[_0xd89f74(0x2fb)],_0xcc5af5=_0x25010e[_0xd89f74(0x272)];tgBot['answerCallbackQuery'](_0x25010e['id'])[_0xd89f74(0x2b7)](async()=>{const _0x2c48bb=_0xd89f74;if(_0x2c4cd3==_0x2c48bb(0x1c7)){if(settings[_0x2c48bb(0x227)]==_0x2c48bb(0x2a2))tgBot[_0x2c48bb(0x252)](_0xcc5af5[_0x2c48bb(0x2bd)]['id'],_0x2c48bb(0x2fa))[_0x2c48bb(0x2ff)](_0x3280cf=>{telegramError(_0x3280cf);});_0x212ca4[_0x2c48bb(0x2ee)](_0x594fe2=>{const _0x21c89e=_0x2c48bb;if(_0x594fe2[_0x21c89e(0x22d)]!=_0x21c89e(0x1c7))toggleBot(_0x594fe2[_0x21c89e(0x22d)],toggleStatus(_0x594fe2['botID']),_0x21c89e(0x21b));});}else{if(settings[_0x2c48bb(0x227)]=='orders')tgBot[_0x2c48bb(0x252)](_0xcc5af5['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x2c4cd3)[_0x2c48bb(0x2ff)](_0x2a4186=>{telegramError(_0x2a4186);});toggleBot(_0x2c4cd3,toggleStatus(_0x2c4cd3),_0x2c48bb(0x21b));}}),tgBot['removeListener'](_0xd89f74(0x242));});}}),tgBot['onText'](/\/disable/,_0x4e2cd9=>{const _0x1f8696=_0x47e010;if(!validateTelegram(_0x4e2cd9))return;tgBot[_0x1f8696(0x252)](_0x4e2cd9[_0x1f8696(0x2bd)]['id'],_0x1f8696(0x215))[_0x1f8696(0x2ff)](_0x5e8e85=>{telegramError(_0x5e8e85);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x47e010(0x1dc)](/\/help/,_0x3a1d7f=>{const _0x153d8d=_0x47e010;if(!validateTelegram(_0x3a1d7f))return;tgBot['sendMessage'](_0x3a1d7f[_0x153d8d(0x2bd)]['id'],_0x490325)['catch'](_0x3c0ec4=>{telegramError(_0x3c0ec4);});}),tgBot['on']('polling_error',_0x15e047=>{const _0x1dec11=_0x47e010;_0x15e047[_0x1dec11(0x1ed)]()[_0x1dec11(0x246)](_0x1dec11(0x29d))&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0x1dec11(0x2d5)](),tgBot=null,io['to'](_0x1dec11(0x2db))[_0x1dec11(0x254)](_0x1dec11(0x2de),_0x1dec11(0x26a)));}),process[_0x47e010(0x214)](_0x47e010(0x26b),()=>{const _0x21bdb8=_0x47e010;if(tgBot)tgBot['stopPolling']();process[_0x21bdb8(0x2ea)](0x1);}),process[_0x47e010(0x214)]('SIGTERM',()=>{const _0xfad2ad=_0x47e010;if(tgBot)tgBot[_0xfad2ad(0x2d5)]();process[_0xfad2ad(0x2ea)](0x1);});}}function disableTelegram(){const _0x220ffa=_0x447d06;tgBot&&(tgBot[_0x220ffa(0x2d5)](),tgBot=null);}function sendTelegram(_0x9b963e,_0x2d74f5){const _0x5e7495=_0x447d06;if(settings[_0x5e7495(0x277)]){if(settings[_0x5e7495(0x227)]==_0x5e7495(0x1c7)||(_0x2d74f5[_0x5e7495(0x27c)]==_0x5e7495(0x2cc)||_0x2d74f5[_0x5e7495(0x27c)]==_0x5e7495(0x280))&&settings[_0x5e7495(0x227)]==_0x5e7495(0x307)||_0x2d74f5[_0x5e7495(0x27c)]==_0x5e7495(0x217)&&settings[_0x5e7495(0x227)]==_0x5e7495(0x2a2)){if(tgBot&&settings[_0x5e7495(0x2b3)]){if(_0x2d74f5['showname'])tgBot['sendMessage'](settings[_0x5e7495(0x2b3)],_0x2d74f5[_0x5e7495(0x2d2)]+_0x5e7495(0x24e)+_0x2d74f5[_0x5e7495(0x2f4)])[_0x5e7495(0x2ff)](_0x189d0d=>{telegramError(_0x189d0d);});else tgBot['sendMessage'](settings['telegramChatId'],_0x5e7495(0x1f1)+_0x9b963e+_0x5e7495(0x24e)+_0x2d74f5[_0x5e7495(0x2f4)])['catch'](_0x3a02d7=>{telegramError(_0x3a02d7);});}}}}function getDeviceWithIp(_0x350ad0){const _0x1b4636=_0x447d06;return devices[_0x1b4636(0x1e4)](_0x3b6466=>_0x3b6466['ip']===_0x350ad0);}function temporaryAccess2FA(_0x4ccde1,_0x29fbed){const _0xe656e9=_0x447d06;let _0x10f733=new Date(),_0x1b6124=![];if(lastIpApproval){if(_0x10f733-lastIpApproval<0x1388)_0x1b6124=!![];}lastIpApproval=new Date();if(_0x1b6124)return;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0xe656e9(0x242)),tgBot[_0xe656e9(0x252)](settings[_0xe656e9(0x2b3)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x29fbed)[_0xe656e9(0x1cc)]+'</b>\x20?',{'parse_mode':_0xe656e9(0x2ed),'reply_markup':{'inline_keyboard':[[{'text':_0xe656e9(0x2fe),'callback_data':'5'},{'text':_0xe656e9(0x1c9),'callback_data':'15'},{'text':_0xe656e9(0x27d),'callback_data':'30'},{'text':_0xe656e9(0x1f0),'callback_data':_0xe656e9(0x1f0)}]]}})['catch'](_0x5e6c3a=>{telegramError(_0x5e6c3a);}),tgBot['on'](_0xe656e9(0x242),async _0x5da115=>{const _0x80c066=_0xe656e9,_0x402338=_0x5da115[_0x80c066(0x2fb)],_0x1c29a8=_0x5da115['message'];tgBot['answerCallbackQuery'](_0x5da115['id'])[_0x80c066(0x2b7)](async()=>{const _0x3aebd1=_0x80c066;devices[_0x4ccde1][_0x3aebd1(0x234)]={'clientip':_0x29fbed,'timestamp':new Date()[_0x3aebd1(0x259)](),'expiry':_0x402338},_0x402338!='reject'?(await tgBot[_0x3aebd1(0x252)](_0x1c29a8[_0x3aebd1(0x2bd)]['id'],_0x3aebd1(0x1ec)+_0x402338+_0x3aebd1(0x1d9),{'parse_mode':'HTML'})['catch'](_0x3d8180=>{telegramError(_0x3d8180);}),io['to'](_0x4ccde1)[_0x3aebd1(0x254)](_0x3aebd1(0x306),{'access':{'allow':![],'reason':_0x3aebd1(0x202),'token':null}})):(await tgBot[_0x3aebd1(0x252)](_0x1c29a8['chat']['id'],'Temporary\x20access\x20rejected')[_0x3aebd1(0x2ff)](_0x2da805=>{telegramError(_0x2da805);}),io['to'](_0x4ccde1)[_0x3aebd1(0x254)](_0x3aebd1(0x306),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot['removeListener']('callback_query');}));}function loginAccess2FA(_0x12b82b,_0x481bd0){const _0x10c0f1=_0x447d06;tgBot&&settings['telegramChatId']&&(tgBot[_0x10c0f1(0x1e3)](_0x10c0f1(0x242)),tgBot[_0x10c0f1(0x252)](settings[_0x10c0f1(0x2b3)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x481bd0)[_0x10c0f1(0x1cc)]+_0x10c0f1(0x2a6),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x10c0f1(0x25f),'callback_data':loginExpiry},{'text':_0x10c0f1(0x1f0),'callback_data':_0x10c0f1(0x1f0)}]]}})['catch'](_0x4cfcd1=>{telegramError(_0x4cfcd1);}),tgBot['on']('callback_query',async _0x59d1bd=>{const _0x6b4479=_0x10c0f1,_0x4a7db5=_0x59d1bd['data'],_0x317285=_0x59d1bd['message'];tgBot[_0x6b4479(0x269)](_0x59d1bd['id'])[_0x6b4479(0x2b7)](async()=>{const _0x1075b7=_0x6b4479;devices[_0x12b82b][_0x1075b7(0x232)]={'clientip':_0x481bd0,'timestamp':new Date()[_0x1075b7(0x259)](),'expiry':_0x4a7db5},_0x4a7db5!=_0x1075b7(0x1f0)?(await tgBot[_0x1075b7(0x252)](_0x317285['chat']['id'],'Login\x20accepted',{'parse_mode':_0x1075b7(0x2ed)})[_0x1075b7(0x2ff)](_0x3541d8=>{telegramError(_0x3541d8);}),io['to'](_0x12b82b)[_0x1075b7(0x254)](_0x1075b7(0x306),{'access':{'allow':![],'reason':_0x1075b7(0x202),'token':null}})):(await tgBot[_0x1075b7(0x252)](_0x317285[_0x1075b7(0x2bd)]['id'],'Login\x20rejected')[_0x1075b7(0x2ff)](_0x59e3aa=>{telegramError(_0x59e3aa);}),io['to'](_0x12b82b)['emit'](_0x1075b7(0x306),{'access':{'allow':![],'reason':_0x1075b7(0x2d7),'token':null}}));}),tgBot[_0x6b4479(0x1e3)]('callback_query');}));}function getConfiguration(){const _0x1b1186=_0x447d06;return dbConfig[_0x1b1186(0x30a)](_0x1b1186(0x28f))[_0x1b1186(0x2af)](_0x1b1186(0x22d))[_0x1b1186(0x2c6)]()||[];}function getEnabledBots(){const _0x4fda96=_0x447d06;return dbConfig[_0x4fda96(0x30a)]('bots')[_0x4fda96(0x2af)](_0x4fda96(0x22d))[_0x4fda96(0x240)]({'status':_0x4fda96(0x2c5)})[_0x4fda96(0x2c6)]()||[];}function _0x1a2b(_0x2c46d0,_0x3da0d6){const _0x1ca5fc=_0x2e49();return _0x1a2b=function(_0x4a6407,_0x985039){_0x4a6407=_0x4a6407-0x1c2;let _0x2e495c=_0x1ca5fc[_0x4a6407];return _0x2e495c;},_0x1a2b(_0x2c46d0,_0x3da0d6);}function getDisabledBots(){const _0x5df956=_0x447d06;return dbConfig[_0x5df956(0x30a)](_0x5df956(0x28f))[_0x5df956(0x2af)]('botID')['filter']({'status':_0x5df956(0x22c)})[_0x5df956(0x2c6)]()||[];}function getSettings(){const _0x469f3a=_0x447d06;return dbSettings[_0x469f3a(0x30a)]('settings')[_0x469f3a(0x2c6)]()||{'timeshift':0x0};}function getSecure(){const _0x2f3179=_0x447d06;return dbSecure[_0x2f3179(0x30a)](_0x2f3179(0x1e7))[_0x2f3179(0x2c6)]()||{};}function getBlacklist(){const _0x46bcf2=_0x447d06;return dbSecure[_0x46bcf2(0x30a)](_0x46bcf2(0x261))[_0x46bcf2(0x2c6)]()||[];}function broadcastToBots(_0xf2f3a6,_0xd58c2c){config['forEach'](_0x2ab5fe=>{const _0x5124f3=_0x1a2b;if(_0x2ab5fe[_0x5124f3(0x306)]==_0x5124f3(0x2c5)&&_0x2ab5fe[_0x5124f3(0x205)]==_0x5124f3(0x2c9)){if(pid[_0x2ab5fe[_0x5124f3(0x22d)]])pid[_0x2ab5fe['botID']][_0x5124f3(0x221)]({[_0xf2f3a6]:_0xd58c2c});}});}function storeSettings(_0x4d5510,_0x4ca819=![]){const _0x4f33ce=_0x447d06;_0x4d5510={...settings,..._0x4d5510};if(_0x4ca819&&_0x4d5510[_0x4f33ce(0x23b)]!=_0x4f33ce(0x1fc)&&_0x4d5510[_0x4f33ce(0x23b)]!=''){const _0x359abf=crypt['decrypt'](secure[_0x4f33ce(0x305)],_0x4d5510[_0x4f33ce(0x23b)])[_0x4f33ce(0x272)][_0x4f33ce(0x2e0)]('@')[0x0],_0x45c1f1=bcrypt['hashSync'](_0x359abf,saltRounds);_0x4d5510={..._0x4d5510,'bbPassword':_0x45c1f1};}if(_0x4ca819&&_0x4d5510['telegramToken']!='************'&&_0x4d5510['telegramToken']!=''){const _0x4f65c4=crypt['decrypt'](secure[_0x4f33ce(0x305)],_0x4d5510['telegramToken'])[_0x4f33ce(0x272)][_0x4f33ce(0x2e0)]('@')[0x0];_0x4d5510={..._0x4d5510,'telegramToken':_0x4f65c4};}const _0x297888=_0x4d5510[_0x4f33ce(0x2a7)]!=_0x4f33ce(0x1fc)&&_0x4d5510[_0x4f33ce(0x2a7)]!=settings[_0x4f33ce(0x2a7)]||_0x4d5510[_0x4f33ce(0x2f3)]!=settings[_0x4f33ce(0x2f3)],_0x1a2038=_0x4d5510['telegramToken']==''||_0x4d5510['telegramUsername']=='';if(_0x297888)_0x4d5510[_0x4f33ce(0x227)]=_0x4f33ce(0x1c7);for(const [_0x2648d1,_0x1d2910]of Object[_0x4f33ce(0x299)](_0x4d5510)){if(_0x2648d1=='telegramToken'&&_0x1d2910=='************'){_0x4d5510[_0x4f33ce(0x2a7)]=settings[_0x4f33ce(0x2a7)];continue;};if(_0x2648d1==_0x4f33ce(0x23b)&&_0x1d2910=='************'){_0x4d5510[_0x4f33ce(0x23b)]=settings[_0x4f33ce(0x23b)];continue;};dbSettings[_0x4f33ce(0x29a)](_0x4f33ce(0x27b)+_0x2648d1,_0x1d2910)['write']();}settings=_0x4d5510,io['to'](_0x4f33ce(0x2db))['emit'](_0x4f33ce(0x1d2),cleanSettings()),broadcastToBots(_0x4f33ce(0x20d),settings[_0x4f33ce(0x20d)]);if(_0x297888&&!_0x1a2038)initTelegram();if(_0x297888&&_0x1a2038)disableTelegram();getAllClients()['forEach'](_0x178411=>{const _0x324b99=_0x4f33ce;getSocket(_0x178411['id'])[_0x324b99(0x254)](_0x324b99(0x306),{'access':{'allow':![],'reason':_0x324b99(0x202),'token':null}});});}function updateSetting(_0x24bffb,_0x42dc97){const _0x37261d=_0x447d06;dbSettings[_0x37261d(0x29a)]('settings.'+_0x24bffb,_0x42dc97)[_0x37261d(0x208)](),settings=getSettings(),io['to'](_0x37261d(0x2db))[_0x37261d(0x254)](_0x37261d(0x1d2),cleanSettings());}function storeSecure(_0x2480f3){const _0x3cd1ae=_0x447d06;dbSecure[_0x3cd1ae(0x30a)](_0x3cd1ae(0x1e7))[_0x3cd1ae(0x264)](_0x2480f3)[_0x3cd1ae(0x208)](),secure=_0x2480f3;}function addBlacklist(_0x7e1953){const _0x4e7f44=_0x447d06;cleanBlacklist();let _0x47a9c7;devices[_0x7e1953][_0x4e7f44(0x234)]?_0x47a9c7=Math['max'](devices[_0x7e1953][_0x4e7f44(0x234)]['expiry'],loginExpiry):_0x47a9c7=loginExpiry,dbSecure[_0x4e7f44(0x30a)](_0x4e7f44(0x261))['push']({'expiry':new Date()[_0x4e7f44(0x259)]()+_0x47a9c7*0x3c*0x3e8,'token':devices[_0x7e1953][_0x4e7f44(0x1c3)][_0x4e7f44(0x1da)]})[_0x4e7f44(0x208)](),blacklist=dbSecure[_0x4e7f44(0x30a)]('blacklist')[_0x4e7f44(0x2c6)]();}function cleanBlacklist(){const _0x3ce31f=_0x447d06;let _0x29b639=dbSecure[_0x3ce31f(0x30a)](_0x3ce31f(0x261))[_0x3ce31f(0x28d)]()[_0x3ce31f(0x2c6)](),_0x3e069d=new Date()[_0x3ce31f(0x259)]();_0x29b639['forEach'](_0x393701=>{const _0x402203=_0x3ce31f;_0x393701[_0x402203(0x249)]<_0x3e069d&&dbSecure[_0x402203(0x30a)](_0x402203(0x261))['remove']({'expiry':_0x393701[_0x402203(0x249)]})[_0x402203(0x208)]();});}function initStates(){const _0x23e9a3=_0x447d06;let _0x2ca918=getConfiguration();_0x2ca918[_0x23e9a3(0x2ee)](_0x1a3b7b=>{const _0x1b830b=_0x23e9a3;_0x1a3b7b[_0x1b830b(0x205)]=_0x1b830b(0x21b);}),storeConfiguration(_0x2ca918);}function onKeys(){const _0x380a87=new RSA();return new Promise(_0x1a35e5=>{const _0x11dfc6=_0x1a2b;_0x380a87[_0x11dfc6(0x224)]()[_0x11dfc6(0x2b7)](_0x1d4697=>{_0x1a35e5(_0x1d4697);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2339ce=_0x447d06;let _0x3ca2bb=getConfiguration(),_0x5c8081=![];_0x3ca2bb[_0x2339ce(0x2ee)](_0x242dff=>{const _0x16c481=_0x2339ce;if(_0x242dff['status']=='running')_0x242dff['status']=_0x16c481(0x2c5),_0x5c8081=!![];else _0x242dff['status']=='stopped'&&(_0x242dff[_0x16c481(0x306)]=_0x16c481(0x22c),_0x5c8081=!![]);});if(_0x5c8081)storeConfiguration(_0x3ca2bb);let _0x2cfd4a=getSecure();if(!_0x2cfd4a[_0x2339ce(0x1ca)](_0x2339ce(0x2c8))){let _0x4e9051=await generateKeys();_0x2cfd4a[_0x2339ce(0x2dd)]=_0x4e9051[_0x2339ce(0x2dd)],_0x2cfd4a[_0x2339ce(0x305)]=_0x4e9051[_0x2339ce(0x305)],_0x2cfd4a[_0x2339ce(0x2c8)]=crypto[_0x2339ce(0x243)](0x20)[_0x2339ce(0x1ed)]('hex');;storeSecure(_0x2cfd4a);}let _0x26ac9e=getSettings();_0x5c8081=![];!_0x26ac9e[_0x2339ce(0x1ca)](_0x2339ce(0x28a))&&(_0x26ac9e[_0x2339ce(0x28a)]=![],_0x26ac9e[_0x2339ce(0x257)]='',_0x26ac9e['bbPassword']='',_0x26ac9e[_0x2339ce(0x21c)]=![],_0x5c8081=!![]);!_0x26ac9e['hasOwnProperty'](_0x2339ce(0x298))&&(_0x26ac9e[_0x2339ce(0x298)]=![],_0x26ac9e['whitelist']=[],_0x26ac9e[_0x2339ce(0x262)]=![],_0x5c8081=!![]);if(!_0x26ac9e[_0x2339ce(0x1ca)](_0x2339ce(0x277))){if(_0x26ac9e['telegramChatId'])_0x26ac9e[_0x2339ce(0x277)]=!![];else _0x26ac9e[_0x2339ce(0x277)]=![];_0x5c8081=!![];}if(_0x5c8081)storeSettings(_0x26ac9e);}function storeConfiguration(_0x5d2ec4){const _0x12f41d=_0x447d06;dbConfig[_0x12f41d(0x30a)](_0x12f41d(0x28f))['remove']()[_0x12f41d(0x208)](),dbConfig['get'](_0x12f41d(0x28f))['push'](..._0x5d2ec4)['write'](),config=_0x5d2ec4;}function resetPassword(){const _0x5896b0=_0x447d06;tgBot&&settings[_0x5896b0(0x2b3)]&&(tgBot['removeListener'](_0x5896b0(0x242)),tgBot['sendMessage'](settings['telegramChatId'],_0x5896b0(0x1c2),{'parse_mode':_0x5896b0(0x2ed),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})['catch'](_0x15b2f7=>{telegramError(_0x15b2f7);}),tgBot['on'](_0x5896b0(0x242),async _0x13ac71=>{const _0x8e4951=_0x5896b0,_0x206f6d=_0x13ac71[_0x8e4951(0x2fb)],_0x1e9c8d=_0x13ac71[_0x8e4951(0x272)];tgBot[_0x8e4951(0x269)](_0x13ac71['id'])[_0x8e4951(0x2b7)](async()=>{const _0x2f0cb5=_0x8e4951;if(_0x206f6d!='no'){const _0x22df6b=0xf,_0x42598f='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x1013e5=Array[_0x2f0cb5(0x2b0)](crypto[_0x2f0cb5(0x222)](new Uint32Array(_0x22df6b)))['map'](_0x55db76=>_0x42598f[_0x55db76%_0x42598f[_0x2f0cb5(0x2b5)]])['join'](''),_0x35025c=bcrypt[_0x2f0cb5(0x2f5)](_0x1013e5,saltRounds);storeSettings({'bbPassword':_0x35025c}),await tgBot[_0x2f0cb5(0x252)](_0x1e9c8d[_0x2f0cb5(0x2bd)]['id'],_0x2f0cb5(0x25e)+_0x1013e5,{'parse_mode':_0x2f0cb5(0x2ed)})['catch'](_0x13e153=>{telegramError(_0x13e153);});}else await tgBot[_0x2f0cb5(0x252)](_0x1e9c8d[_0x2f0cb5(0x2bd)]['id'],_0x2f0cb5(0x2cb))[_0x2f0cb5(0x2ff)](_0x6453e8=>{telegramError(_0x6453e8);});}),tgBot[_0x8e4951(0x1e3)](_0x8e4951(0x242));}));}function logging(_0x5aa00f){const _0x3eebb4=_0x447d06;console[_0x3eebb4(0x200)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x5aa00f);if(tgBot&&settings[_0x3eebb4(0x2b3)]&&settings[_0x3eebb4(0x227)]!=_0x3eebb4(0x2a2))tgBot['sendMessage'](settings[_0x3eebb4(0x2b3)],_0x3eebb4(0x21d)+_0x5aa00f)[_0x3eebb4(0x2ff)](_0x77b776=>{telegramError(_0x77b776);});}function getServerTime(){const _0x5cf948=_0x447d06,_0x40637a=new Date();return _0x40637a[_0x5cf948(0x235)]()+'/'+(_0x40637a[_0x5cf948(0x2b6)]()+0x1)['toString']()[_0x5cf948(0x2d0)](0x2,'0')+'/'+_0x40637a[_0x5cf948(0x2f6)]()[_0x5cf948(0x1ed)]()[_0x5cf948(0x2d0)](0x2,'0')+'\x20'+_0x40637a[_0x5cf948(0x2f9)]()[_0x5cf948(0x1ed)]()['padStart'](0x2,'0')+':'+_0x40637a[_0x5cf948(0x23d)]()[_0x5cf948(0x1ed)]()[_0x5cf948(0x2d0)](0x2,'0')+':'+_0x40637a[_0x5cf948(0x2c0)]()[_0x5cf948(0x1ed)]()[_0x5cf948(0x2d0)](0x2,'0');}function getTimeStamp(){const _0x135a1e=_0x447d06,_0x5f8a0c=shiftedTime();return _0x5f8a0c[_0x135a1e(0x235)]()+'/'+(_0x5f8a0c[_0x135a1e(0x2b6)]()+0x1)[_0x135a1e(0x1ed)]()['padStart'](0x2,'0')+'/'+_0x5f8a0c[_0x135a1e(0x2f6)]()[_0x135a1e(0x1ed)]()[_0x135a1e(0x2d0)](0x2,'0')+'\x20'+_0x5f8a0c[_0x135a1e(0x2f9)]()[_0x135a1e(0x1ed)]()[_0x135a1e(0x2d0)](0x2,'0')+':'+_0x5f8a0c[_0x135a1e(0x23d)]()[_0x135a1e(0x1ed)]()[_0x135a1e(0x2d0)](0x2,'0')+':'+_0x5f8a0c['getSeconds']()[_0x135a1e(0x1ed)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x599f8e=_0x447d06,_0x10810f=new Date();let _0x331547=_0x10810f;if(settings['timeshift']&&settings[_0x599f8e(0x20d)]!==0x0)_0x331547=fns[_0x599f8e(0x2f0)](_0x10810f,{'hours':settings[_0x599f8e(0x20d)]});return _0x331547;}function startScheduler(){const _0x16e887=_0x447d06;let _0x571ee0=new Date()[_0x16e887(0x25c)]();_0x571ee0==0x1&&backupConfigFiles();_0x571ee0==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x153884=_0x447d06;fs[_0x153884(0x2f7)](configpath,{'withFileTypes':!![]})['forEach'](_0x2a3371=>{const _0x583830=_0x153884;if(!_0x2a3371[_0x583830(0x265)]())fs['copyFileSync'](configpath+_0x2a3371[_0x583830(0x2c3)],configbackuppath+_0x2a3371[_0x583830(0x2c3)]);});}function triggerAnalytics(){const _0x47f71c=_0x447d06;analytics[_0x47f71c(0x2e4)]({'title':'Balance\x20Bot\x20Server','href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x434213,_0x18bcd6){const _0x3f01aa=_0x447d06;if(_0x434213[_0x3f01aa(0x1f7)]==settings['bbUsername']&&bcrypt['compareSync'](_0x434213['password'],settings[_0x3f01aa(0x23b)])){if(settings[_0x3f01aa(0x21c)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x257d52=generateLoginToken(_0x18bcd6);return{'allow':!![],'reason':_0x3f01aa(0x297),'token':_0x257d52};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x1e9a38){const _0x35c33a=generateLoginToken(_0x1e9a38);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x35c33a};}function validateAccess(_0xc1f14c,_0x1039c5){const _0x16b906=_0x447d06;let _0x25bcf8=devices[_0x1039c5]['ip'],_0xf6ddaa;const _0x3d9539=_0x27603f=>{const _0x39902b=_0x1a2b;if(settings[_0x39902b(0x28a)]){if(settings[_0x39902b(0x21c)]){if(telegram2FaApproved(_0x1039c5)){const _0xde58b2=generateLoginToken(_0x1039c5);return{'allow':!![],'reason':_0x39902b(0x2e9),'token':_0xde58b2};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0xf6ddaa=validToken(_0x27603f,_0x1039c5),_0xf6ddaa['hasOwnProperty'](_0x39902b(0x280))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x27603f}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x39902b(0x1d5),'token':null};};if(settings['whitelistEnabled']){let _0x1b5eb3=[...settings[_0x16b906(0x2e1)],_0x16b906(0x21e),_0x16b906(0x2b8),'127.0.0.1'];if(_0x1b5eb3['includes'](_0x25bcf8))return _0x3d9539(_0xc1f14c);else{_0xf6ddaa=validToken(_0xc1f14c,_0x1039c5);if(_0xf6ddaa['hasOwnProperty']('success'))return _0x3d9539(_0xc1f14c);else{if(telegramIpApproved(_0x1039c5)){const _0x177cb0=generateToken(_0x1039c5);return _0xf6ddaa=_0x3d9539(_0xc1f14c),_0xf6ddaa[_0x16b906(0x1d0)]?{'allow':!![],'reason':_0x16b906(0x300),'token':_0x177cb0}:_0xf6ddaa;}else return settings[_0x16b906(0x262)]?{'allow':![],'reason':_0x16b906(0x2aa),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x3d9539(_0xc1f14c);}function timelyDecrypt(_0x1c0f3f,_0x177c43=!![]){const _0x3eec7c=_0x447d06;if(_0x1c0f3f)try{const _0x11a0d0=crypt['decrypt'](secure[_0x3eec7c(0x305)],_0x1c0f3f)[_0x3eec7c(0x272)],_0x441917=_0x11a0d0['split']('@')[0x0],_0x31be24=_0x11a0d0['split']('@')[0x1],_0x26a8b9=new Date()[_0x3eec7c(0x259)]();if(_0x177c43){if(_0x26a8b9-_0x31be24<maxSecretAge*0x3e8)return _0x441917;else return![];}else return _0x441917;}catch(_0xadd9fb){return![];}else return![];}const validToken=(_0x2c62cc,_0x51570c)=>{const _0x2b75e9=_0x447d06,_0x10c785=devices[_0x51570c]['ip'];if(!_0x2c62cc)return{'error':_0x2b75e9(0x2d9)};for(let _0x3aabd7 of blacklist){if(_0x3aabd7[_0x2b75e9(0x1da)]==_0x2c62cc)return{'error':_0x2b75e9(0x294)};}let _0x279fdd;try{_0x279fdd=jwt[_0x2b75e9(0x244)](_0x2c62cc,secure[_0x2b75e9(0x2c8)]+_0x51570c);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x279fdd[_0x2b75e9(0x1ca)](_0x2b75e9(0x219))&&!_0x279fdd[_0x2b75e9(0x1ca)](_0x2b75e9(0x1f7))||!_0x279fdd[_0x2b75e9(0x1ca)](_0x2b75e9(0x295)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x279fdd[_0x2b75e9(0x1ca)](_0x2b75e9(0x1f7))&&_0x279fdd[_0x2b75e9(0x1ca)](_0x2b75e9(0x219))){const {clientip:_0x4d7d1b}=_0x279fdd;return _0x10c785==_0x4d7d1b?{'success':_0x2b75e9(0x2ac)}:{'error':_0x2b75e9(0x274)};}else{if(_0x279fdd[_0x2b75e9(0x1ca)](_0x2b75e9(0x1f7))&&_0x279fdd[_0x2b75e9(0x1ca)](_0x2b75e9(0x219))){const {username:_0x19cf98,clientip:_0x5e3c05}=_0x279fdd;return settings[_0x2b75e9(0x257)]==_0x19cf98&&_0x10c785==_0x5e3c05?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x2b75e9(0x1ce)};}}},generateLoginToken=_0x19423b=>{const _0x521039=_0x447d06;if(_0x19423b){const _0x2c3c58=devices[_0x19423b]['ip'];return jwt[_0x521039(0x1c8)]({'username':settings['bbUsername'],'clientip':_0x2c3c58},secure[_0x521039(0x2c8)]+_0x19423b,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x7ea6fb=>{const _0x378a90=_0x447d06;if(_0x7ea6fb){const _0x5804b0=devices[_0x7ea6fb]['ip'];return jwt[_0x378a90(0x1c8)]({'clientip':_0x5804b0},secure[_0x378a90(0x2c8)]+_0x7ea6fb,{'expiresIn':devices[_0x7ea6fb][_0x378a90(0x234)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x174e72=>{const _0x1ff39d=_0x447d06;let _0x173eb7=![];return devices[_0x174e72][_0x1ff39d(0x234)]&&devices[_0x174e72][_0x1ff39d(0x234)][_0x1ff39d(0x249)]!='reject'&&(_0x173eb7=devices[_0x174e72]['telegramIpApproval']['clientip']==devices[_0x174e72]['ip']&&new Date()['getTime']()-devices[_0x174e72][_0x1ff39d(0x234)][_0x1ff39d(0x1e9)]<devices[_0x174e72][_0x1ff39d(0x234)][_0x1ff39d(0x249)]*0x3c*0x3e8),_0x173eb7;},telegram2FaApproved=_0x2f42bc=>{const _0x63d31d=_0x447d06;let _0x2dd52d=![];return devices[_0x2f42bc][_0x63d31d(0x232)]&&devices[_0x2f42bc][_0x63d31d(0x232)][_0x63d31d(0x249)]!=_0x63d31d(0x1f0)&&(_0x2dd52d=devices[_0x2f42bc]['telegram2FaApproval']['clientip']==devices[_0x2f42bc]['ip']&&new Date()[_0x63d31d(0x259)]()-devices[_0x2f42bc][_0x63d31d(0x232)]['timestamp']<devices[_0x2f42bc][_0x63d31d(0x232)][_0x63d31d(0x249)]*0x3c*0x3e8),_0x2dd52d;},normalizeIP=_0x3c72ff=>{const _0x254dfb=_0x447d06;let _0x307c80=null,_0x1dc858=null;if(ipaddr[_0x254dfb(0x2cd)](_0x3c72ff)){const _0x376c1d=ipaddr[_0x254dfb(0x211)](_0x3c72ff);_0x376c1d[_0x254dfb(0x25d)]()===_0x254dfb(0x2e8)?(_0x376c1d['isIPv4MappedAddress']()&&(_0x307c80=_0x376c1d['toIPv4Address']()[_0x254dfb(0x1ed)]()),_0x1dc858=_0x376c1d[_0x254dfb(0x1ed)]()):(_0x307c80=_0x376c1d[_0x254dfb(0x1ed)](),_0x1dc858=_0x376c1d[_0x254dfb(0x304)]()[_0x254dfb(0x1ed)]());}return{'show':_0x307c80?_0x307c80:_0x1dc858,'store':_0x1dc858};};