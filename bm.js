const _0x5e5bff=_0x4493;(function(_0x18bf04,_0x5cca42){const _0x433b4f=_0x4493,_0x443981=_0x18bf04();while(!![]){try{const _0x4a30dc=parseInt(_0x433b4f(0x1d8))/0x1+parseInt(_0x433b4f(0x1d5))/0x2*(parseInt(_0x433b4f(0x220))/0x3)+-parseInt(_0x433b4f(0x18a))/0x4+parseInt(_0x433b4f(0x291))/0x5*(-parseInt(_0x433b4f(0x155))/0x6)+parseInt(_0x433b4f(0x172))/0x7+parseInt(_0x433b4f(0x173))/0x8+parseInt(_0x433b4f(0x230))/0x9;if(_0x4a30dc===_0x5cca42)break;else _0x443981['push'](_0x443981['shift']());}catch(_0x5a93fe){_0x443981['push'](_0x443981['shift']());}}}(_0x1466,0xde5f3));const _0x16cee4=function(){let _0x46a2db=!![];return function(_0x376c7c,_0xf5bef3){const _0x1f57a4=_0x46a2db?function(){const _0x321682=_0x4493;if(_0xf5bef3){const _0x33b8a2=_0xf5bef3[_0x321682(0x1c5)](_0x376c7c,arguments);return _0xf5bef3=null,_0x33b8a2;}}:function(){};return _0x46a2db=![],_0x1f57a4;};}(),_0x1d7b3b=_0x16cee4(this,function(){const _0x505637=_0x4493;return _0x1d7b3b[_0x505637(0x1ea)]()[_0x505637(0x16e)]('(((.+)+)+)+$')['toString']()['constructor'](_0x1d7b3b)[_0x505637(0x16e)](_0x505637(0x1e0));});_0x1d7b3b();'use strict';process[_0x5e5bff(0x196)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x5e5bff(0x1b2)),FileSync=require(_0x5e5bff(0x236)),fs=require('fs'),fns=require(_0x5e5bff(0x162)),low=require('lowdb'),path=require(_0x5e5bff(0x1c9)),crypto=require(_0x5e5bff(0x28d)),Crypt=require(_0x5e5bff(0x294))['Crypt'],RSA=require(_0x5e5bff(0x294))['RSA'],bcrypt=require(_0x5e5bff(0x1b8)),jwt=require(_0x5e5bff(0x18f)),analyticsLib=require('analytics')[_0x5e5bff(0x1e8)],googleAnalytics=require(_0x5e5bff(0x252))[_0x5e5bff(0x1e8)],ipaddr=require(_0x5e5bff(0x253)),argv=require('yargs/yargs')(process[_0x5e5bff(0x1bd)][_0x5e5bff(0x1d7)](0x2))['argv'],PORT=argv['port']||'3000',pattern=/^[0-9]{2,4}$/;if(!pattern[_0x5e5bff(0x25e)](PORT))return console[_0x5e5bff(0x25f)](_0x5e5bff(0x254)+PORT+_0x5e5bff(0x1b3)),process[_0x5e5bff(0x1e1)](0x1);const HOST=argv[_0x5e5bff(0x1c1)]||null,userID=argv[_0x5e5bff(0x20a)]||'';let bbpath=_0x5e5bff(0x285),bbpath2='';const botfile=_0x5e5bff(0x249),configfile=_0x5e5bff(0x17d),settingsfile=_0x5e5bff(0x247),securefile=_0x5e5bff(0x201);!fs['existsSync'](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x5e5bff(0x19e)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x5e5bff(0x16b),configbackuppath=configpath+_0x5e5bff(0x272);!fs[_0x5e5bff(0x213)](configpath)&&fs[_0x5e5bff(0x18e)](configpath);!fs[_0x5e5bff(0x213)](configbackuppath)&&fs[_0x5e5bff(0x18e)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x5e5bff(0x191)]({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x5e5bff(0x1af)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x5e5bff(0x233)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require('http')[_0x5e5bff(0x1f5)](app);app['use'](express[_0x5e5bff(0x1cf)](path[_0x5e5bff(0x1aa)](__dirname,bbpath2,'build2'))),app[_0x5e5bff(0x284)](express[_0x5e5bff(0x1cf)](path['join'](__dirname,bbpath2,_0x5e5bff(0x1a3)))),app['get']('/',function(_0x70f09b,_0x5647b7){const _0x5007f1=_0x5e5bff;_0x5647b7['sendFile'](path['join'](__dirname,bbpath2,_0x5007f1(0x222),_0x5007f1(0x1d3)));}),app['get'](_0x5e5bff(0x243),function(_0x4d2bc9,_0x2845fd){const _0xb8951e=_0x5e5bff;_0x2845fd[_0xb8951e(0x232)](path['join'](__dirname,bbpath2,'build',_0xb8951e(0x1d3)));}),app[_0x5e5bff(0x160)](_0x5e5bff(0x214),(_0x2aea94,_0x133279)=>{const _0x544c9c=_0x5e5bff;_0x133279[_0x544c9c(0x232)](path[_0x544c9c(0x1aa)](__dirname,bbpath2,_0x544c9c(0x1a3),_0x544c9c(0x1d3)));}),app[_0x5e5bff(0x160)](_0x5e5bff(0x299),(_0x8c7ff0,_0x20fcce)=>{const _0x1b0337=_0x5e5bff;_0x20fcce['sendFile'](path['join'](__dirname,bbpath2,_0x1b0337(0x1a3),_0x1b0337(0x1d3)));}),app[_0x5e5bff(0x160)]('/:bot/coins',(_0x311053,_0x1cac65)=>{const _0xd3ba1c=_0x5e5bff;_0x1cac65[_0xd3ba1c(0x232)](path[_0xd3ba1c(0x1aa)](__dirname,bbpath2,_0xd3ba1c(0x1a3),_0xd3ba1c(0x1d3)));}),app[_0x5e5bff(0x160)](_0x5e5bff(0x154),(_0x1506fd,_0xadd23b)=>{const _0xb32e1d=_0x5e5bff;_0xadd23b[_0xb32e1d(0x232)](path[_0xb32e1d(0x1aa)](__dirname,bbpath2,_0xb32e1d(0x1a3),_0xb32e1d(0x1d3)));}),app['get'](_0x5e5bff(0x292),(_0xf366fb,_0x3060f4)=>{const _0x4414e8=_0x5e5bff;_0x3060f4['sendFile'](path[_0x4414e8(0x1aa)](__dirname,bbpath2,_0x4414e8(0x1a3),_0x4414e8(0x1d3)));}),app[_0x5e5bff(0x160)](_0x5e5bff(0x1b9),(_0x2867c9,_0xe93434)=>{const _0x3cc119=_0x5e5bff;_0xe93434[_0x3cc119(0x232)](path[_0x3cc119(0x1aa)](__dirname,bbpath2,_0x3cc119(0x1a3),_0x3cc119(0x1d3)));});if(HOST)http[_0x5e5bff(0x1cb)](PORT,HOST);else http[_0x5e5bff(0x1cb)](PORT);const io=require(_0x5e5bff(0x1ee))(http,{}),analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':_0x5e5bff(0x237)})]}),TelegramBot=require(_0x5e5bff(0x1df));let tgBot;if(settings[_0x5e5bff(0x204)]&&settings['telegramToken']!=''&&settings['telegramUsername']&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x209b48=_0x5e5bff;console[_0x209b48(0x25f)](''),console[_0x209b48(0x25f)](_0x209b48(0x1c2)),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x209b48(0x25f)](_0x209b48(0x1c2));if(config[_0x209b48(0x190)]!=0x0)config[_0x209b48(0x1d9)](_0x576e7a=>{const _0x26e2a7=_0x209b48;if(_0x576e7a['status']==_0x26e2a7(0x28b)||_0x576e7a['status']==_0x26e2a7(0x296))logging(_0x26e2a7(0x26c)+_0x576e7a['botID']+'\x20|\x20'+_0x576e7a['botname']),startBot([_0x576e7a[_0x26e2a7(0x24f)],userID],{'cwd':bbpath},function(_0x1a570c){if(_0x1a570c)logging(_0x1a570c);});else(_0x576e7a[_0x26e2a7(0x27f)]=='disabled'||_0x576e7a['status']==_0x26e2a7(0x1d4))&&logging(_0x26e2a7(0x1dc)+_0x576e7a[_0x26e2a7(0x24f)]+_0x26e2a7(0x166)+_0x576e7a[_0x26e2a7(0x163)]);});else!newBot&&console[_0x209b48(0x25f)](_0x209b48(0x15c));if(newBot)addBot();console[_0x209b48(0x25f)](_0x209b48(0x1c2)),console[_0x209b48(0x25f)]('');}function startSocket(){const _0x287e6b=_0x5e5bff;io['on'](_0x287e6b(0x258),_0x178a0a=>{const _0x3b721f=_0x287e6b;let _0x58789b,_0x37b717,_0x5af01a,_0x1814a0,_0x267a28;const _0x2322a7=_0x178a0a[_0x3b721f(0x19d)][_0x3b721f(0x28e)][_0x3b721f(0x227)];_0x37b717=_0x2322a7[_0x3b721f(0x27e)](/bot[0-9]{3}/);if(_0x37b717)_0x5af01a=_0x37b717[0x0][_0x3b721f(0x27e)](/[0-9]{3}/);if(_0x5af01a)_0x58789b=_0x5af01a[0x0];else _0x58789b=_0x3b721f(0x25c);const _0x55eb26=_0x178a0a[_0x3b721f(0x19d)][_0x3b721f(0x1e4)][_0x3b721f(0x1ce)];if(!_0x55eb26)_0x178a0a['emit'](_0x3b721f(0x27f),{'publicKey':secure[_0x3b721f(0x266)]});else{_0x1814a0=timelyDecrypt(_0x55eb26,![]);if(!_0x1814a0)_0x178a0a[_0x3b721f(0x24c)](_0x3b721f(0x27f),{'publicKey':secure[_0x3b721f(0x266)]});else{_0x267a28=normalizeIP(_0x178a0a[_0x3b721f(0x298)][_0x3b721f(0x1a1)])[_0x3b721f(0x1fd)];if(!devices[_0x1814a0])devices[_0x1814a0]={'uuid':_0x1814a0,'access':{'token':null}};devices[_0x1814a0]['ip']=_0x267a28;const _0xe082c2=addClient(_0x178a0a['id'],_0x1814a0,_0x58789b);setAccess(_0xe082c2),_0x178a0a['on'](_0x3b721f(0x198),_0x21fea4=>{const _0x2f7431=_0x3b721f,_0x2b1bf0=timelyDecrypt(_0x21fea4[_0x2f7431(0x1c4)]);if(_0x2b1bf0){_0x21fea4={'username':_0x21fea4[_0x2f7431(0x255)],'password':_0x2b1bf0},devices[_0x1814a0][_0x2f7431(0x1de)]=validateCredentials(_0x21fea4,_0x1814a0);if(devices[_0x1814a0][_0x2f7431(0x1de)][_0x2f7431(0x26b)]==![]&&devices[_0x1814a0][_0x2f7431(0x1de)][_0x2f7431(0x265)]=='2FA\x20login\x20required')_0x178a0a['emit'](_0x2f7431(0x27f),{'access':devices[_0x1814a0][_0x2f7431(0x1de)]}),loginAccess2FA(_0x1814a0,_0x267a28);else{if(devices[_0x1814a0][_0x2f7431(0x1de)][_0x2f7431(0x26b)]==![]&&devices[_0x1814a0]['access'][_0x2f7431(0x265)]==_0x2f7431(0x268))_0x178a0a[_0x2f7431(0x24c)](_0x2f7431(0x27f),{'access':devices[_0x1814a0][_0x2f7431(0x1de)]});else devices[_0x1814a0][_0x2f7431(0x1de)][_0x2f7431(0x26b)]&&devices[_0x1814a0][_0x2f7431(0x1de)]['reason']=='login\x20token\x20generated'&&(getClientsWithUuid(_0x1814a0)[_0x2f7431(0x1d9)](_0x5e559d=>{setAccess(_0x5e559d);}),setTokenRefresh(_0x1814a0),setSessionTimeout(_0x2f7431(0x198),_0x1814a0));}}else logging(_0x2f7431(0x16f));}),_0x178a0a['on']('reset-password',()=>{resetPassword();}),_0x178a0a['on']('disconnect',_0x444f7a=>{removeClient(_0x178a0a['id']);});}}});}function initClient(_0x9dbf41){const _0x3c59d2=_0x5e5bff;if(_0x9dbf41!=_0x3c59d2(0x25c)&&config[_0x3c59d2(0x1eb)]!=''){if(pid[_0x9dbf41])pid[_0x9dbf41]['send']({'function':_0x3c59d2(0x1ef),'args':null});}}function getSocket(_0xe141d3){const _0x5c5af2=_0x5e5bff;return io[_0x5c5af2(0x178)][_0x5c5af2(0x178)][_0x5c5af2(0x160)](_0xe141d3);}function setAccess(_0x2e8a3e){const _0x275a22=_0x5e5bff,_0x524883=getSocket(_0x2e8a3e['id']),_0x57b013=_0x2e8a3e[_0x275a22(0x27a)],_0x3adf34=_0x2e8a3e[_0x275a22(0x288)];devices[_0x57b013]['access']=validateAccess(devices[_0x57b013][_0x275a22(0x1de)][_0x275a22(0x261)],_0x57b013),_0x524883[_0x275a22(0x1aa)](_0x57b013);if(devices[_0x57b013][_0x275a22(0x1de)][_0x275a22(0x26b)]){_0x524883[_0x275a22(0x1aa)](_0x3adf34);if(_0x3adf34==_0x275a22(0x25c))initializeSocketBotManager(_0x524883);else initializeSocketBot(_0x524883);initClient(_0x3adf34);}devices[_0x57b013][_0x275a22(0x1de)][_0x275a22(0x261)]&&devices[_0x57b013][_0x275a22(0x1de)][_0x275a22(0x265)]=='temporary\x20token\x20generated'&&setSessionTimeout('2FA',_0x57b013),devices[_0x57b013][_0x275a22(0x1de)][_0x275a22(0x261)]&&devices[_0x57b013][_0x275a22(0x1de)]['reason']=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x275a22(0x198),_0x57b013),_0x524883[_0x275a22(0x24c)](_0x275a22(0x27f),{'status':_0x2e8a3e[_0x275a22(0x234)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x57b013]['access'],'externalip':devices[_0x57b013]['ip'],'publicKey':secure[_0x275a22(0x266)]}),devices[_0x57b013][_0x275a22(0x1de)]['allow']==![]&&devices[_0x57b013][_0x275a22(0x1de)][_0x275a22(0x265)]==_0x275a22(0x1d1)&&temporaryAccess2FA(_0x57b013,devices[_0x57b013]['ip']);}function setSessionTimeout(_0x4b6d17,_0x4b8c1d){const _0x5ac97e=_0x5e5bff;let _0x45be19;if(_0x4b6d17==_0x5ac97e(0x198))_0x45be19=loginExpiry*0x3c*0x3e8;else _0x45be19=devices[_0x4b8c1d][_0x5ac97e(0x276)][_0x5ac97e(0x152)]*0x3c*0x3e8-(new Date()[_0x5ac97e(0x19f)]()-devices[_0x4b8c1d]['telegramIpApproval'][_0x5ac97e(0x211)]);if(devices[_0x4b8c1d]['pidExpireLogin'])clearTimeout(devices[_0x4b8c1d][_0x5ac97e(0x1ac)]);devices[_0x4b8c1d][_0x5ac97e(0x1ac)]=setTimeout(()=>{const _0x3577e2=_0x5ac97e;if(devices[_0x4b8c1d][_0x3577e2(0x23c)])clearTimeout(devices[_0x4b8c1d][_0x3577e2(0x23c)]);removeSocketListeners(_0x4b8c1d),addBlacklist(_0x4b8c1d),devices[_0x4b8c1d][_0x3577e2(0x276)]=null,devices[_0x4b8c1d][_0x3577e2(0x24a)]=null,devices[_0x4b8c1d][_0x3577e2(0x1de)][_0x3577e2(0x261)]=null,devices[_0x4b8c1d]['access']=validateAccess(devices[_0x4b8c1d]['access'][_0x3577e2(0x261)],_0x4b8c1d),!(devices[_0x4b8c1d]['access'][_0x3577e2(0x26b)]&&devices[_0x4b8c1d][_0x3577e2(0x1de)][_0x3577e2(0x265)]==_0x3577e2(0x271))&&(_0x4b6d17==_0x3577e2(0x198)?io['to'](_0x4b8c1d)['emit'](_0x3577e2(0x27f),{'access':{'allow':![],'reason':_0x3577e2(0x1f9),'token':null}}):io['to'](_0x4b8c1d)[_0x3577e2(0x24c)](_0x3577e2(0x27f),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x4b8c1d][_0x3577e2(0x1de)][_0x3577e2(0x261)]=null;},_0x45be19);}function setTokenRefresh(_0x1da345){const _0x32ba92=_0x5e5bff;if(devices[_0x1da345][_0x32ba92(0x23c)])clearTimeout(devices[_0x1da345][_0x32ba92(0x23c)]);devices[_0x1da345][_0x32ba92(0x23c)]=setTimeout(()=>{const _0x44c60f=_0x32ba92;getClientsWithUuid(_0x1da345)[_0x44c60f(0x190)]!=0x0?(devices[_0x1da345][_0x44c60f(0x1de)]=refreshToken(_0x1da345),io['to'](_0x1da345)[_0x44c60f(0x24c)](_0x44c60f(0x27f),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1da345][_0x44c60f(0x1de)],'externalip':devices[_0x1da345]['ip'],'publicKey':secure['publicKey']}),setTokenRefresh(_0x1da345)):clearTimeout(devices[_0x1da345][_0x44c60f(0x23c)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x196f72){const _0x5c87ec=_0x5e5bff,_0x252da9=getClient(_0x196f72['id'])[_0x5c87ec(0x27a)];_0x196f72[_0x5c87ec(0x24c)](_0x5c87ec(0x170),config),_0x196f72[_0x5c87ec(0x24c)](_0x5c87ec(0x1d0),cleanSettings()),_0x196f72['on'](_0x5c87ec(0x29b),_0x3e0a92=>{const _0x1e6639=_0x5c87ec;if(validateAccess(_0x3e0a92,_0x252da9)[_0x1e6639(0x26b)])addBot();else logging(_0x1e6639(0x295));}),_0x196f72['on'](_0x5c87ec(0x1e9),(_0x4be784,_0x54e61f)=>{const _0x7cdcad=_0x5c87ec;if(validateAccess(_0x54e61f,_0x252da9)[_0x7cdcad(0x26b)])toggleBot(_0x4be784['botID'],_0x4be784[_0x7cdcad(0x27f)],_0x4be784[_0x7cdcad(0x1c0)]);else logging(_0x7cdcad(0x1f7));}),_0x196f72['on'](_0x5c87ec(0x238),(_0x200af5,_0x552879)=>{const _0x3f50c5=_0x5c87ec;if(validateAccess(_0x552879,_0x252da9)[_0x3f50c5(0x26b)])deleteBot(_0x200af5);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x196f72['on'](_0x5c87ec(0x205),(_0x298b6d,_0x21732f)=>{const _0x344b2f=_0x5c87ec;if(validateAccess(_0x21732f,_0x252da9)['allow'])storeSettings(_0x298b6d,!![]);else logging(_0x344b2f(0x1e7));}),_0x196f72['on'](_0x5c87ec(0x1cc),(_0xbf02e6,_0x4f930d)=>{const _0x3f8376=_0x5c87ec;if(validateAccess(_0x4f930d,_0x252da9)[_0x3f8376(0x26b)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x196f72['on'](_0x5c87ec(0x181),_0x57c966=>{const _0x5bcbf9=_0x5c87ec;if(validateAccess(_0x57c966,_0x252da9)['allow']){if(devices[_0x252da9]['pidRefreshToken'])clearTimeout(devices[_0x252da9][_0x5bcbf9(0x23c)]);if(devices[_0x252da9]['pidExpireLogin'])clearTimeout(devices[_0x252da9][_0x5bcbf9(0x1ac)]);removeSocketListeners(getClient(_0x196f72['id'])[_0x5bcbf9(0x27a)]),addBlacklist(_0x252da9),devices[_0x252da9][_0x5bcbf9(0x276)]=null,devices[_0x252da9][_0x5bcbf9(0x24a)]=null,devices[_0x252da9][_0x5bcbf9(0x1de)][_0x5bcbf9(0x261)]=null,io['to'](getClient(_0x196f72['id'])[_0x5bcbf9(0x27a)])[_0x5bcbf9(0x24c)](_0x5bcbf9(0x27f),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x5bcbf9(0x184));});}function initializeSocketBot(_0x5a403a){const _0x13cb88=_0x5e5bff,_0x3df9ef=getClient(_0x5a403a['id'])[_0x13cb88(0x288)],_0x4e88b1=getClient(_0x5a403a['id'])['uuid'];_0x5a403a['on'](_0x13cb88(0x1b0),(_0x2efe30,_0x2afaf5)=>{const _0x3c0320=_0x13cb88;if(validateAccess(_0x2afaf5,_0x4e88b1)[_0x3c0320(0x26b)]){if(pid[_0x3df9ef])pid[_0x3df9ef][_0x3c0320(0x290)]({'function':_0x3c0320(0x1ab),'args':_0x2efe30});}else logging(_0x3c0320(0x1fc));}),_0x5a403a['on'](_0x13cb88(0x1e3),(_0x16ff73,_0x2772b7)=>{const _0x4eee3b=_0x13cb88;if(validateAccess(_0x2772b7,_0x4e88b1)[_0x4eee3b(0x26b)]){if(pid[_0x3df9ef])pid[_0x3df9ef][_0x4eee3b(0x290)]({'function':_0x4eee3b(0x17a),'args':_0x16ff73});}else logging(_0x4eee3b(0x179));}),_0x5a403a['on'](_0x13cb88(0x1ba),(_0x3ff8bd,_0x18cedc)=>{const _0x540865=_0x13cb88;if(validateAccess(_0x18cedc,_0x4e88b1)[_0x540865(0x26b)]){if(pid[_0x3df9ef])pid[_0x3df9ef][_0x540865(0x290)]({'function':'storeConfiguration','args':_0x3ff8bd});}else logging(_0x540865(0x242));}),_0x5a403a['on'](_0x13cb88(0x206),(_0x2dfc59,_0x2ee0d2)=>{const _0x3ee320=_0x13cb88;if(validateAccess(_0x2ee0d2,_0x4e88b1)[_0x3ee320(0x26b)]){if(pid[_0x3df9ef])pid[_0x3df9ef][_0x3ee320(0x290)]({'function':_0x3ee320(0x1bc),'args':_0x2dfc59});}else logging(_0x3ee320(0x187));}),_0x5a403a['on'](_0x13cb88(0x20c),_0x1a85a4=>{const _0x2dd1c0=_0x13cb88;if(validateAccess(_0x1a85a4,_0x4e88b1)['allow']){if(pid[_0x3df9ef])pid[_0x3df9ef][_0x2dd1c0(0x290)]({'function':'getStartingBalances','args':null});}else logging(_0x2dd1c0(0x195));}),_0x5a403a['on'](_0x13cb88(0x21c),(_0x408748,_0x1b221b)=>{const _0xb3fd7f=_0x13cb88;if(validateAccess(_0x1b221b,_0x4e88b1)[_0xb3fd7f(0x26b)]){if(pid[_0x3df9ef])pid[_0x3df9ef]['send']({'function':'placeOrder','args':_0x408748});}else logging(_0xb3fd7f(0x263));}),_0x5a403a['on'](_0x13cb88(0x197),_0x127b7c=>{const _0x269754=_0x13cb88;if(validateAccess(_0x127b7c,_0x4e88b1)[_0x269754(0x26b)]){if(pid[_0x3df9ef])pid[_0x3df9ef]['send']({'function':_0x269754(0x25d),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x5a403a['on'](_0x13cb88(0x181),_0xae6144=>{const _0x5dc44d=_0x13cb88;if(validateAccess(_0xae6144,_0x4e88b1)[_0x5dc44d(0x26b)]){if(devices[_0x4e88b1][_0x5dc44d(0x23c)])clearTimeout(devices[_0x4e88b1][_0x5dc44d(0x23c)]);if(devices[_0x4e88b1][_0x5dc44d(0x1ac)])clearTimeout(devices[_0x4e88b1][_0x5dc44d(0x1ac)]);removeSocketListeners(getClient(_0x5a403a['id'])[_0x5dc44d(0x27a)]),addBlacklist(_0x4e88b1),devices[_0x4e88b1][_0x5dc44d(0x276)]=null,devices[_0x4e88b1][_0x5dc44d(0x24a)]=null,devices[_0x4e88b1][_0x5dc44d(0x1de)]['token']=null,io['to'](getClient(_0x5a403a['id'])[_0x5dc44d(0x27a)])[_0x5dc44d(0x24c)](_0x5dc44d(0x27f),{'access':{'allow':![],'reason':_0x5dc44d(0x23b),'token':null}});}else logging(_0x5dc44d(0x184));});}function removeSocketListeners(_0x58556a){getClientsWithUuid(_0x58556a)['forEach'](_0x73faae=>{const _0x2d327e=_0x4493;getSocket(_0x73faae['id'])[_0x2d327e(0x289)]();});}function cleanSettings(){const _0x2d34c8=_0x5e5bff;let _0x2016a9=settings;return settings[_0x2d34c8(0x204)]&&settings['telegramToken']!=''&&(_0x2016a9={..._0x2016a9,'telegramToken':_0x2d34c8(0x1d2)}),settings[_0x2d34c8(0x1b7)]&&settings[_0x2d34c8(0x1b7)]!=''&&(_0x2016a9={..._0x2016a9,'bbPassword':_0x2d34c8(0x1d2)}),_0x2016a9;}function updateBB(){const _0x57ba80=_0x5e5bff;installingUpdate=!![],config[_0x57ba80(0x1d9)](_0x3d3671=>{const _0x16d7b3=_0x57ba80;restartBot(_0x3d3671[_0x16d7b3(0x24f)]);}),process[_0x57ba80(0x290)]({'update':!![]},_0x50cf57=>{});}function _0x4493(_0x298adf,_0x48033b){const _0x307ccd=_0x1466();return _0x4493=function(_0x1d7b3b,_0x16cee4){_0x1d7b3b=_0x1d7b3b-0x152;let _0x146615=_0x307ccd[_0x1d7b3b];return _0x146615;},_0x4493(_0x298adf,_0x48033b);}function startBot(_0x487770,_0xb1d2f6,_0x1a260a){const _0x3d8629=_0x5e5bff;let _0x3b16d2=![];const _0x4e932a=_0x487770[0x0];_0xb1d2f6={..._0xb1d2f6,'stdio':[_0x3d8629(0x23e),_0x3d8629(0x23e),'inherit',_0x3d8629(0x167)]},pid[_0x4e932a]=childProcess[_0x3d8629(0x283)](botfile,_0x487770,_0xb1d2f6),pid[_0x4e932a]['on'](_0x3d8629(0x19c),_0x50e1be=>{const _0x80abe2=_0x3d8629;switch(Object[_0x80abe2(0x1ae)](_0x50e1be)[0x0]){case _0x80abe2(0x163):updateBotName(_0x4e932a,_0x50e1be[_0x80abe2(0x163)]);break;case _0x80abe2(0x27f):updateStatus(_0x4e932a,_0x50e1be[_0x80abe2(0x27f)]);break;case'live':updateLive(_0x4e932a,_0x50e1be[_0x80abe2(0x1c0)]);break;case _0x80abe2(0x209):updateLive(_0x4e932a,_0x50e1be[_0x80abe2(0x209)]),io['to'](_0x4e932a)[_0x80abe2(0x24c)](_0x80abe2(0x27f),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x80abe2(0x226):_0x50e1be[_0x80abe2(0x226)]==_0x80abe2(0x1f3)&&restartBot(_0x4e932a);_0x50e1be[_0x80abe2(0x226)]==_0x80abe2(0x1f6)&&toggleBot(_0x4e932a,_0x80abe2(0x1f0),_0x80abe2(0x278));break;case'telegram':sendTelegram(_0x4e932a,_0x50e1be['telegram']);break;case'function':io['to'](_0x4e932a)[_0x80abe2(0x24c)](_0x50e1be[_0x80abe2(0x159)],_0x50e1be[_0x80abe2(0x26e)]);break;}}),pid[_0x4e932a]['on'](_0x3d8629(0x1ca),function(_0x4755ea){if(_0x3b16d2)return;_0x3b16d2=!![],_0x1a260a(_0x4755ea);}),pid[_0x4e932a]['on'](_0x3d8629(0x1e1),function(_0x24e3a3){const _0x34c752=_0x3d8629;if(installingUpdate)return;if(_0x3b16d2)return;_0x3b16d2=!![],_0x1a260a(null);const _0x4bbd74=dbConfig['get'](_0x34c752(0x170))[_0x34c752(0x1a6)]({'botID':_0x4e932a})[_0x34c752(0x16d)]();_0x4bbd74&&(_0x4bbd74[_0x34c752(0x27f)]==_0x34c752(0x28b)||_0x4bbd74['status']==_0x34c752(0x296))&&(updateLive(_0x4e932a,_0x34c752(0x278)),logging(_0x34c752(0x244)+_0x4e932a),startBot([_0x4e932a,userID],{'cwd':bbpath},function(_0x4a861f){if(_0x4a861f)logging(_0x4a861f);}));});}function stopBot(_0x32a5f3){const _0x2ec747=_0x5e5bff;getClientsWithBotID(_0x32a5f3)[_0x2ec747(0x1d9)](_0xea791=>{const _0x4798ce=_0x2ec747;getSocket(_0xea791['id'])[_0x4798ce(0x183)](!![]),removeClient(_0xea791['id']);});if(pid[_0x32a5f3])pid[_0x32a5f3][_0x2ec747(0x1f6)]();}function restartBot(_0x576165){if(pid[_0x576165])pid[_0x576165]['kill']();}function addBot(){const _0x40d19e=_0x5e5bff;let _0x1c2bc4;for(let _0x2a13df=0x1;_0x2a13df<0x3e9;_0x2a13df++){_0x1c2bc4=_0x2a13df[_0x40d19e(0x1ea)]()[_0x40d19e(0x23f)](0x3,'0');let _0x2bf9bb=config[_0x40d19e(0x1a6)](_0x5340ca=>_0x5340ca['botID']==_0x1c2bc4);if(!_0x2bf9bb)break;}if(_0x1c2bc4===_0x40d19e(0x1a8)){logging(_0x40d19e(0x267));return;}logging(_0x40d19e(0x203)+_0x1c2bc4),dbConfig[_0x40d19e(0x160)](_0x40d19e(0x170))[_0x40d19e(0x1b1)]({'botID':_0x1c2bc4,'botname':_0x40d19e(0x208)+_0x1c2bc4,'status':_0x40d19e(0x296),'live':''})[_0x40d19e(0x21d)](),startBot([_0x1c2bc4,userID],{'cwd':bbpath},function(_0x2459a0){if(_0x2459a0)logging(_0x2459a0);}),config=getConfiguration(),io['to'](_0x40d19e(0x25c))[_0x40d19e(0x24c)](_0x40d19e(0x170),config);}function deleteBot(_0x29c6d1){const _0x4ca7f1=_0x5e5bff;getClientsWithBotID(_0x29c6d1)[_0x4ca7f1(0x1d9)](_0x184f11=>{getSocket(_0x184f11['id'])['disconnect'](!![]),removeClient(_0x184f11['id']);}),dbConfig[_0x4ca7f1(0x160)](_0x4ca7f1(0x170))[_0x4ca7f1(0x275)]({'botID':_0x29c6d1})['write'](),logging('deleted\x20Bot\x20'+_0x29c6d1),stopBot(_0x29c6d1);try{fs[_0x4ca7f1(0x231)](path[_0x4ca7f1(0x1aa)](configpath,_0x4ca7f1(0x1e2)+_0x29c6d1+_0x4ca7f1(0x1bf))),fs[_0x4ca7f1(0x231)](path[_0x4ca7f1(0x1aa)](configpath,'bot-'+_0x29c6d1+'-events.json')),fs['unlinkSync'](path[_0x4ca7f1(0x1aa)](configpath,_0x4ca7f1(0x1e2)+_0x29c6d1+'-performance.json')),fs['unlinkSync'](path[_0x4ca7f1(0x1aa)](configpath,_0x4ca7f1(0x1e2)+_0x29c6d1+'-results.json'));}catch(_0x42619c){if(_0x42619c)logging(_0x4ca7f1(0x1a7),_0x42619c);}config=getConfiguration(),io['to']('botmanager')[_0x4ca7f1(0x24c)](_0x4ca7f1(0x170),config);}function toggleBot(_0x5902e4,_0x56a058,_0x173d82){const _0x51d57a=_0x5e5bff;dbConfig[_0x51d57a(0x160)](_0x51d57a(0x170))[_0x51d57a(0x1a6)]({'botID':_0x5902e4})[_0x51d57a(0x15e)]({'status':_0x56a058})[_0x51d57a(0x15e)]({'live':_0x173d82})[_0x51d57a(0x21d)]();if(_0x56a058==_0x51d57a(0x28b)||_0x56a058==_0x51d57a(0x296))logging(_0x51d57a(0x251)+_0x5902e4),startBot([_0x5902e4,userID],{'cwd':bbpath},function(_0x33ea83){if(_0x33ea83)logging(_0x33ea83);});else(_0x56a058==_0x51d57a(0x1f0)||_0x56a058=='new-disabled')&&(logging(_0x51d57a(0x269)+_0x5902e4),stopBot(_0x5902e4));config=getConfiguration(),io['to'](_0x51d57a(0x25c))[_0x51d57a(0x24c)](_0x51d57a(0x170),config);}function toggleStatus(_0x4da4af){const _0x444cc5=_0x5e5bff;let _0x457311=dbConfig[_0x444cc5(0x160)]('bots')[_0x444cc5(0x1a6)]({'botID':_0x4da4af})[_0x444cc5(0x16d)](),_0x9d2623;if(_0x457311[_0x444cc5(0x27f)]==='enabled')_0x9d2623=_0x444cc5(0x1f0);else{if(_0x457311['status']===_0x444cc5(0x296))_0x9d2623=_0x444cc5(0x1d4);else{if(_0x457311[_0x444cc5(0x27f)]===_0x444cc5(0x1d4))_0x9d2623=_0x444cc5(0x296);else{if(_0x457311['status']==='disabled')_0x9d2623=_0x444cc5(0x28b);}}}return _0x9d2623;}function updateStatus(_0x4d4e2c,_0x362afa){const _0x4aa703=_0x5e5bff;dbConfig[_0x4aa703(0x160)]('bots')[_0x4aa703(0x1a6)]({'botID':_0x4d4e2c})['assign']({'status':_0x362afa})[_0x4aa703(0x21d)](),config=getConfiguration(),io['to'](_0x4aa703(0x25c))[_0x4aa703(0x24c)]('bots',config);}function updateLive(_0x549163,_0x411ccc){const _0x27826a=_0x5e5bff;dbConfig[_0x27826a(0x160)](_0x27826a(0x170))[_0x27826a(0x1a6)]({'botID':_0x549163})[_0x27826a(0x15e)]({'live':_0x411ccc})['write'](),config=getConfiguration(),io['to'](_0x27826a(0x25c))['emit']('bots',config);}function updateBotName(_0x37e68a,_0x38ec78){const _0x5db037=_0x5e5bff;dbConfig['get'](_0x5db037(0x170))[_0x5db037(0x1a6)]({'botID':_0x37e68a})[_0x5db037(0x15e)]({'botname':_0x38ec78})[_0x5db037(0x21d)](),config=getConfiguration(),io['to'](_0x5db037(0x25c))[_0x5db037(0x24c)](_0x5db037(0x170),config);}function telegramError(_0x414c03){const _0x515438=_0x5e5bff;console[_0x515438(0x25f)](getTimeStamp()+_0x515438(0x1d6));}function validateTelegram(_0x326564){const _0x17a553=_0x5e5bff;if(_0x326564[_0x17a553(0x297)][_0x17a553(0x255)]!=settings['telegramUsername']&&'@'+_0x326564[_0x17a553(0x297)][_0x17a553(0x255)]!=settings[_0x17a553(0x168)])return tgBot[_0x17a553(0x1da)](_0x326564['chat']['id'],_0x17a553(0x20b),{'parse_mode':_0x17a553(0x175)})['catch'](_0x408fe0=>{telegramError(_0x408fe0);}),![];return!![];}async function initTelegram(){const _0x4e07ec=_0x5e5bff;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x4e07ec(0x204)],{'polling':!![]});let _0x3231db=_0x4e07ec(0x16c);_0x3231db+='\x0a',_0x3231db+=_0x4e07ec(0x1ad),_0x3231db+='/disable\x20-\x20disable\x20notifications\x0a',_0x3231db+=_0x4e07ec(0x174),_0x3231db+=_0x4e07ec(0x27c),_0x3231db+=_0x4e07ec(0x224),_0x3231db+=_0x4e07ec(0x21b),_0x3231db+=_0x4e07ec(0x29c),_0x3231db+=_0x4e07ec(0x1bb);let _0x27a795=_0x4e07ec(0x1dd);_0x27a795+='\x0a',_0x27a795+=_0x3231db,tgBot[_0x4e07ec(0x20e)](/\/start/,_0x2688ba=>{const _0x59e894=_0x4e07ec;if(!validateTelegram(_0x2688ba))return;if(settings[_0x59e894(0x219)]!=_0x2688ba[_0x59e894(0x193)]['id'])updateSetting(_0x59e894(0x219),_0x2688ba[_0x59e894(0x193)]['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x2688ba[_0x59e894(0x193)]['id'],_0x27a795)[_0x59e894(0x245)](_0x29de1a=>{telegramError(_0x29de1a);});}),tgBot[_0x4e07ec(0x20e)](/\/enable/,_0x18f6c8=>{const _0x2dd022=_0x4e07ec;if(!validateTelegram(_0x18f6c8))return;if(settings[_0x2dd022(0x219)]!=_0x18f6c8[_0x2dd022(0x193)]['id'])updateSetting(_0x2dd022(0x219),_0x18f6c8[_0x2dd022(0x193)]['id']);updateSetting(_0x2dd022(0x29d),!![]),tgBot['sendMessage'](_0x18f6c8['chat']['id'],_0x2dd022(0x25a))[_0x2dd022(0x245)](_0x457297=>{telegramError(_0x457297);});}),tgBot['onText'](/\/config/,async _0x432447=>{const _0x567ae8=_0x4e07ec;if(!validateTelegram(_0x432447))return;tgBot['removeListener'](_0x567ae8(0x188)),tgBot['sendMessage'](_0x432447[_0x567ae8(0x193)]['id'],_0x567ae8(0x21f),{'reply_markup':{'inline_keyboard':[[{'text':_0x567ae8(0x212),'callback_data':_0x567ae8(0x176)},{'text':_0x567ae8(0x1f4),'callback_data':_0x567ae8(0x18c)},{'text':_0x567ae8(0x21a),'callback_data':'all'}]]}})[_0x567ae8(0x245)](_0x151265=>{telegramError(_0x151265);}),tgBot['on'](_0x567ae8(0x188),async _0xc499d3=>{const _0x5cf546=_0x567ae8,_0x3ee8e0=_0xc499d3['data'],_0x2dc134=_0xc499d3[_0x5cf546(0x19c)];tgBot['answerCallbackQuery'](_0xc499d3['id'])[_0x5cf546(0x22b)](async()=>{const _0x194fe7=_0x5cf546;_0x3ee8e0=='orders'&&(updateSetting(_0x194fe7(0x1db),_0x194fe7(0x176)),updateSetting('telegramEnabled',!![]),await tgBot[_0x194fe7(0x1da)](_0x2dc134[_0x194fe7(0x193)]['id'],_0x194fe7(0x171))[_0x194fe7(0x245)](_0x1ea547=>{telegramError(_0x1ea547);}));_0x3ee8e0=='alerts'&&(updateSetting(_0x194fe7(0x1db),_0x194fe7(0x18c)),updateSetting(_0x194fe7(0x29d),!![]),await tgBot[_0x194fe7(0x1da)](_0x2dc134['chat']['id'],_0x194fe7(0x164))[_0x194fe7(0x245)](_0x245972=>{telegramError(_0x245972);}));_0x3ee8e0==_0x194fe7(0x18d)&&(updateSetting(_0x194fe7(0x1db),_0x194fe7(0x18d)),updateSetting(_0x194fe7(0x29d),!![]),await tgBot[_0x194fe7(0x1da)](_0x2dc134['chat']['id'],_0x194fe7(0x279))['catch'](_0x36f18e=>{telegramError(_0x36f18e);}));if(!settings[_0x194fe7(0x219)])tgBot['sendMessage'](_0x2dc134[_0x194fe7(0x193)]['id'],_0x194fe7(0x24b))['catch'](_0x2f75ec=>{telegramError(_0x2f75ec);});}),tgBot[_0x5cf546(0x1e6)]('callback_query');});}),tgBot[_0x4e07ec(0x20e)](/\/status/,_0x386e4=>{const _0x18fa31=_0x4e07ec;if(!validateTelegram(_0x386e4))return;let _0x54ab15='<b>Balance\x20Bot\x20status:</b>\x0a';config[_0x18fa31(0x1d9)](_0x5b53fd=>{const _0x4e14c9=_0x18fa31;_0x54ab15+=_0x4e14c9(0x208)+_0x5b53fd[_0x4e14c9(0x24f)]+_0x4e14c9(0x166)+_0x5b53fd[_0x4e14c9(0x163)]+':\x20'+_0x5b53fd[_0x4e14c9(0x27f)]+_0x4e14c9(0x22f)+_0x5b53fd['live']+'\x0a';}),_0x54ab15+='\x0a',_0x54ab15+='<b>Telegram\x20bot\x20status:</b>\x0a',_0x54ab15+=!settings[_0x18fa31(0x29d)]?_0x18fa31(0x199):_0x18fa31(0x207),_0x54ab15+=settings[_0x18fa31(0x29d)]?settings['telegramEvents']==_0x18fa31(0x18d)?_0x18fa31(0x17b):_0x18fa31(0x221)+settings[_0x18fa31(0x1db)]+_0x18fa31(0x257):'',tgBot[_0x18fa31(0x1da)](_0x386e4[_0x18fa31(0x193)]['id'],_0x54ab15,{'parse_mode':_0x18fa31(0x175)})[_0x18fa31(0x245)](_0x2c9160=>{telegramError(_0x2c9160);});}),tgBot[_0x4e07ec(0x20e)](/\/restart/,_0x14bdf1=>{const _0x31591d=_0x4e07ec;if(!validateTelegram(_0x14bdf1))return;tgBot[_0x31591d(0x1e6)](_0x31591d(0x188));const _0x358361=getEnabledBots();if(_0x358361[_0x31591d(0x190)]==0x0)tgBot['sendMessage'](_0x14bdf1[_0x31591d(0x193)]['id'],_0x31591d(0x161))[_0x31591d(0x245)](_0x26a0ed=>{telegramError(_0x26a0ed);});else{if(_0x358361['length']>0x1)_0x358361[_0x31591d(0x1b1)]({'botID':'all'});let _0xa15204=[],_0x5ec5e4=[];const _0x465cd1=_0x358361[_0x31591d(0x190)]%0x4==0x0||_0x358361[_0x31591d(0x190)]%0x4==0x3||_0x358361['length']%0x3==0x1?0x4:0x3;let _0x2e80e7=0x0;_0x358361['forEach']((_0x26b5df,_0x352f06)=>{const _0xfcb4fa=_0x31591d;if(_0x352f06%_0x465cd1==0x0)_0x5ec5e4=[];_0x5ec5e4[_0xfcb4fa(0x1b1)]({'text':_0x26b5df['botID']==_0xfcb4fa(0x18d)?_0xfcb4fa(0x239):_0xfcb4fa(0x208)+_0x26b5df['botID'],'callback_data':_0x26b5df['botID']}),_0x352f06%_0x465cd1==0x0&&(_0xa15204[_0x2e80e7]=_0x5ec5e4,_0x2e80e7++);}),tgBot[_0x31591d(0x1da)](_0x14bdf1[_0x31591d(0x193)]['id'],_0x31591d(0x293),{'reply_markup':{'inline_keyboard':_0xa15204}})[_0x31591d(0x245)](_0x5f3637=>{telegramError(_0x5f3637);}),tgBot['on'](_0x31591d(0x188),async _0x12be4f=>{const _0x1e395c=_0x31591d,_0x4ea325=_0x12be4f[_0x1e395c(0x28f)],_0x1ea802=_0x12be4f['message'];tgBot[_0x1e395c(0x26f)](_0x12be4f['id'])[_0x1e395c(0x22b)](async()=>{const _0x2909d7=_0x1e395c;if(_0x4ea325==_0x2909d7(0x18d)){if(settings['telegramEvents']==_0x2909d7(0x176))tgBot[_0x2909d7(0x1da)](_0x1ea802[_0x2909d7(0x193)]['id'],_0x2909d7(0x1fa))['catch'](_0x202d40=>{telegramError(_0x202d40);});config[_0x2909d7(0x1d9)](_0x4be2ff=>{restartBot(_0x4be2ff['botID']);});}else{if(settings[_0x2909d7(0x1db)]==_0x2909d7(0x176))tgBot[_0x2909d7(0x1da)](_0x1ea802['chat']['id'],_0x2909d7(0x25b)+_0x4ea325)[_0x2909d7(0x245)](_0x54e88c=>{telegramError(_0x54e88c);});restartBot(_0x4ea325);}}),tgBot[_0x1e395c(0x1e6)](_0x1e395c(0x188));});}}),tgBot[_0x4e07ec(0x20e)](/\/on/,_0x4ca872=>{const _0x4af641=_0x4e07ec;if(!validateTelegram(_0x4ca872))return;tgBot[_0x4af641(0x1e6)](_0x4af641(0x188));const _0x488f44=getDisabledBots();if(_0x488f44[_0x4af641(0x190)]==0x0)tgBot[_0x4af641(0x1da)](_0x4ca872[_0x4af641(0x193)]['id'],_0x4af641(0x1ec))[_0x4af641(0x245)](_0x39fc5f=>{telegramError(_0x39fc5f);});else{if(_0x488f44[_0x4af641(0x190)]>0x1)_0x488f44[_0x4af641(0x1b1)]({'botID':_0x4af641(0x18d)});let _0x5d3f6=[],_0x21abe5=[];const _0x335d81=_0x488f44[_0x4af641(0x190)]%0x4==0x0||_0x488f44[_0x4af641(0x190)]%0x4==0x3||_0x488f44['length']%0x3==0x1?0x4:0x3;let _0xdb10c9=0x0;_0x488f44['forEach']((_0x2bd324,_0x411548)=>{const _0x254ec0=_0x4af641;if(_0x411548%_0x335d81==0x0)_0x21abe5=[];_0x21abe5[_0x254ec0(0x1b1)]({'text':_0x2bd324[_0x254ec0(0x24f)]==_0x254ec0(0x18d)?_0x254ec0(0x239):'Bot\x20'+_0x2bd324['botID'],'callback_data':_0x2bd324['botID']}),_0x411548%_0x335d81==0x0&&(_0x5d3f6[_0xdb10c9]=_0x21abe5,_0xdb10c9++);}),tgBot['sendMessage'](_0x4ca872[_0x4af641(0x193)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x5d3f6}})[_0x4af641(0x245)](_0x3a21a1=>{telegramError(_0x3a21a1);}),tgBot['on'](_0x4af641(0x188),async _0x40ed6f=>{const _0x12a333=_0x4af641,_0x1e6c8c=_0x40ed6f[_0x12a333(0x28f)],_0x13c705=_0x40ed6f[_0x12a333(0x19c)];tgBot['answerCallbackQuery'](_0x40ed6f['id'])[_0x12a333(0x22b)](async()=>{const _0x4a2cce=_0x12a333;if(_0x1e6c8c==_0x4a2cce(0x18d)){if(settings[_0x4a2cce(0x1db)]==_0x4a2cce(0x176))tgBot['sendMessage'](_0x13c705[_0x4a2cce(0x193)]['id'],_0x4a2cce(0x287))[_0x4a2cce(0x245)](_0x47d02b=>{telegramError(_0x47d02b);});_0x488f44['forEach'](_0x2f1ab8=>{const _0x5888ac=_0x4a2cce;if(_0x2f1ab8[_0x5888ac(0x24f)]!='all')toggleBot(_0x2f1ab8[_0x5888ac(0x24f)],toggleStatus(_0x2f1ab8[_0x5888ac(0x24f)]),_0x5888ac(0x278));});}else{if(settings['telegramEvents']==_0x4a2cce(0x176))tgBot[_0x4a2cce(0x1da)](_0x13c705[_0x4a2cce(0x193)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x1e6c8c)[_0x4a2cce(0x245)](_0x5aa38d=>{telegramError(_0x5aa38d);});toggleBot(_0x1e6c8c,toggleStatus(_0x1e6c8c),_0x4a2cce(0x278));}}),tgBot[_0x12a333(0x1e6)](_0x12a333(0x188));});}}),tgBot[_0x4e07ec(0x20e)](/\/off/,_0xbbba04=>{const _0x12cbf9=_0x4e07ec;if(!validateTelegram(_0xbbba04))return;tgBot['removeListener'](_0x12cbf9(0x188));const _0x356d5=getEnabledBots();if(_0x356d5[_0x12cbf9(0x190)]==0x0)tgBot['sendMessage'](_0xbbba04[_0x12cbf9(0x193)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x12cbf9(0x245)](_0x3cb3d7=>{telegramError(_0x3cb3d7);});else{if(_0x356d5[_0x12cbf9(0x190)]>0x1)_0x356d5[_0x12cbf9(0x1b1)]({'botID':_0x12cbf9(0x18d)});let _0x479318=[],_0x2b5be3=[];const _0x44336d=_0x356d5['length']%0x4==0x0||_0x356d5['length']%0x4==0x3||_0x356d5[_0x12cbf9(0x190)]%0x3==0x1?0x4:0x3;let _0x271253=0x0;_0x356d5[_0x12cbf9(0x1d9)]((_0x402b80,_0x3072f6)=>{const _0xb3095f=_0x12cbf9;if(_0x3072f6%_0x44336d==0x0)_0x2b5be3=[];_0x2b5be3[_0xb3095f(0x1b1)]({'text':_0x402b80[_0xb3095f(0x24f)]==_0xb3095f(0x18d)?_0xb3095f(0x239):_0xb3095f(0x208)+_0x402b80[_0xb3095f(0x24f)],'callback_data':_0x402b80[_0xb3095f(0x24f)]}),_0x3072f6%_0x44336d==0x0&&(_0x479318[_0x271253]=_0x2b5be3,_0x271253++);}),tgBot[_0x12cbf9(0x1da)](_0xbbba04[_0x12cbf9(0x193)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x479318}})['catch'](_0x19d101=>{telegramError(_0x19d101);}),tgBot['on']('callback_query',async _0x455c22=>{const _0x465fcd=_0x12cbf9,_0x21ebc9=_0x455c22[_0x465fcd(0x28f)],_0x4481d9=_0x455c22[_0x465fcd(0x19c)];tgBot['answerCallbackQuery'](_0x455c22['id'])[_0x465fcd(0x22b)](async()=>{const _0x4cdd70=_0x465fcd;if(_0x21ebc9=='all'){if(settings['telegramEvents']=='orders')tgBot['sendMessage'](_0x4481d9[_0x4cdd70(0x193)]['id'],_0x4cdd70(0x262))[_0x4cdd70(0x245)](_0x4c4e4a=>{telegramError(_0x4c4e4a);});_0x356d5[_0x4cdd70(0x1d9)](_0x4156f4=>{const _0x4cee86=_0x4cdd70;if(_0x4156f4[_0x4cee86(0x24f)]!=_0x4cee86(0x18d))toggleBot(_0x4156f4['botID'],toggleStatus(_0x4156f4[_0x4cee86(0x24f)]),'stopped');});}else{if(settings[_0x4cdd70(0x1db)]==_0x4cdd70(0x176))tgBot['sendMessage'](_0x4481d9[_0x4cdd70(0x193)]['id'],_0x4cdd70(0x1ff)+_0x21ebc9)[_0x4cdd70(0x245)](_0x2d6e27=>{telegramError(_0x2d6e27);});toggleBot(_0x21ebc9,toggleStatus(_0x21ebc9),'stopped');}}),tgBot[_0x465fcd(0x1e6)](_0x465fcd(0x188));});}}),tgBot['onText'](/\/disable/,_0x46f529=>{const _0x3d784f=_0x4e07ec;if(!validateTelegram(_0x46f529))return;tgBot[_0x3d784f(0x1da)](_0x46f529[_0x3d784f(0x193)]['id'],'Notifications\x20disabled')[_0x3d784f(0x245)](_0x396605=>{telegramError(_0x396605);}),updateSetting(_0x3d784f(0x29d),![]);}),tgBot[_0x4e07ec(0x20e)](/\/help/,_0x5d5ac8=>{const _0x5f1946=_0x4e07ec;if(!validateTelegram(_0x5d5ac8))return;tgBot[_0x5f1946(0x1da)](_0x5d5ac8[_0x5f1946(0x193)]['id'],_0x3231db)[_0x5f1946(0x245)](_0x3fac9b=>{telegramError(_0x3fac9b);});}),tgBot['on'](_0x4e07ec(0x180),_0x2e88bc=>{const _0x470806=_0x4e07ec;_0x2e88bc[_0x470806(0x1ea)]()[_0x470806(0x260)](_0x470806(0x216))&&(logging(_0x470806(0x240)),tgBot['stopPolling'](),tgBot=null,io['to']('botmanager')[_0x470806(0x24c)](_0x470806(0x256),_0x470806(0x240)));}),process['once']('SIGINT',()=>{if(tgBot)tgBot['stopPolling']();process['exit'](0x1);}),process[_0x4e07ec(0x241)]('SIGTERM',()=>{const _0xab7016=_0x4e07ec;if(tgBot)tgBot[_0xab7016(0x1f2)]();process[_0xab7016(0x1e1)](0x1);});}}function disableTelegram(){const _0x48e194=_0x5e5bff;tgBot&&(tgBot[_0x48e194(0x1f2)](),tgBot=null);}function sendTelegram(_0x453884,_0x316009){const _0x3995f4=_0x5e5bff;if(settings['telegramEnabled']){if(settings[_0x3995f4(0x1db)]==_0x3995f4(0x18d)||(_0x316009['type']==_0x3995f4(0x1ca)||_0x316009['type']==_0x3995f4(0x192))&&settings[_0x3995f4(0x1db)]==_0x3995f4(0x18c)||_0x316009[_0x3995f4(0x1b6)]==_0x3995f4(0x246)&&settings[_0x3995f4(0x1db)]==_0x3995f4(0x176)){if(tgBot&&settings[_0x3995f4(0x219)]){if(_0x316009['showname'])tgBot[_0x3995f4(0x1da)](settings[_0x3995f4(0x219)],_0x316009[_0x3995f4(0x163)]+_0x3995f4(0x248)+_0x316009[_0x3995f4(0x28c)])[_0x3995f4(0x245)](_0x4ce7af=>{telegramError(_0x4ce7af);});else tgBot[_0x3995f4(0x1da)](settings['telegramChatId'],'Bot\x20'+_0x453884+_0x3995f4(0x248)+_0x316009[_0x3995f4(0x28c)])[_0x3995f4(0x245)](_0x11d426=>{telegramError(_0x11d426);});}}}}function getDeviceWithIp(_0x517b4f){const _0x415792=_0x5e5bff;return devices[_0x415792(0x1a6)](_0x2b672e=>_0x2b672e['ip']===_0x517b4f);}function temporaryAccess2FA(_0x13a115,_0x46f954){const _0x548309=_0x5e5bff;let _0x7fd8db=new Date(),_0x35630b=![];if(lastIpApproval){if(_0x7fd8db-lastIpApproval<0x1388)_0x35630b=!![];}lastIpApproval=new Date();if(_0x35630b)return;tgBot&&settings[_0x548309(0x219)]&&(tgBot['removeListener'](_0x548309(0x188)),tgBot[_0x548309(0x1da)](settings[_0x548309(0x219)],_0x548309(0x22c)+normalizeIP(_0x46f954)[_0x548309(0x1b5)]+_0x548309(0x156),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x548309(0x273),'callback_data':'5'},{'text':_0x548309(0x23a),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x548309(0x202),'callback_data':'reject'}]]}})['catch'](_0x21d9fb=>{telegramError(_0x21d9fb);}),tgBot['on'](_0x548309(0x188),async _0x1b6e59=>{const _0x2a4a92=_0x548309,_0x14918c=_0x1b6e59[_0x2a4a92(0x28f)],_0x50a10b=_0x1b6e59[_0x2a4a92(0x19c)];tgBot['answerCallbackQuery'](_0x1b6e59['id'])[_0x2a4a92(0x22b)](async()=>{const _0x4ccd5c=_0x2a4a92;devices[_0x13a115][_0x4ccd5c(0x276)]={'clientip':_0x46f954,'timestamp':new Date()[_0x4ccd5c(0x19f)](),'expiry':_0x14918c},_0x14918c!=_0x4ccd5c(0x202)?(await tgBot['sendMessage'](_0x50a10b[_0x4ccd5c(0x193)]['id'],'Access\x20enabled\x20for\x20'+_0x14918c+_0x4ccd5c(0x165),{'parse_mode':'HTML'})[_0x4ccd5c(0x245)](_0x5ab4e7=>{telegramError(_0x5ab4e7);}),io['to'](_0x13a115)[_0x4ccd5c(0x24c)](_0x4ccd5c(0x27f),{'access':{'allow':![],'reason':_0x4ccd5c(0x1a0),'token':null}})):(await tgBot['sendMessage'](_0x50a10b[_0x4ccd5c(0x193)]['id'],_0x4ccd5c(0x1f1))['catch'](_0x4b0b70=>{telegramError(_0x4b0b70);}),io['to'](_0x13a115)[_0x4ccd5c(0x24c)](_0x4ccd5c(0x27f),{'access':{'allow':![],'reason':_0x4ccd5c(0x1b4),'token':null}}));}),tgBot[_0x2a4a92(0x1e6)](_0x2a4a92(0x188));}));}function loginAccess2FA(_0x36f9b6,_0x161241){const _0x32dc32=_0x5e5bff;tgBot&&settings[_0x32dc32(0x219)]&&(tgBot['removeListener']('callback_query'),tgBot[_0x32dc32(0x1da)](settings[_0x32dc32(0x219)],_0x32dc32(0x23d)+normalizeIP(_0x161241)['show']+'</b>\x20?',{'parse_mode':_0x32dc32(0x175),'reply_markup':{'inline_keyboard':[[{'text':_0x32dc32(0x1c6),'callback_data':loginExpiry},{'text':_0x32dc32(0x202),'callback_data':_0x32dc32(0x202)}]]}})['catch'](_0x2db238=>{telegramError(_0x2db238);}),tgBot['on'](_0x32dc32(0x188),async _0x10059c=>{const _0x1e2010=_0x32dc32,_0x23d0c3=_0x10059c[_0x1e2010(0x28f)],_0x4bd813=_0x10059c[_0x1e2010(0x19c)];tgBot[_0x1e2010(0x26f)](_0x10059c['id'])[_0x1e2010(0x22b)](async()=>{const _0x29a9bd=_0x1e2010;devices[_0x36f9b6][_0x29a9bd(0x24a)]={'clientip':_0x161241,'timestamp':new Date()[_0x29a9bd(0x19f)](),'expiry':_0x23d0c3},_0x23d0c3!=_0x29a9bd(0x202)?(await tgBot[_0x29a9bd(0x1da)](_0x4bd813[_0x29a9bd(0x193)]['id'],_0x29a9bd(0x17c),{'parse_mode':_0x29a9bd(0x175)})[_0x29a9bd(0x245)](_0x271d80=>{telegramError(_0x271d80);}),io['to'](_0x36f9b6)[_0x29a9bd(0x24c)]('status',{'access':{'allow':![],'reason':_0x29a9bd(0x1a0),'token':null}})):(await tgBot[_0x29a9bd(0x1da)](_0x4bd813['chat']['id'],_0x29a9bd(0x286))['catch'](_0x145663=>{telegramError(_0x145663);}),io['to'](_0x36f9b6)[_0x29a9bd(0x24c)]('status',{'access':{'allow':![],'reason':_0x29a9bd(0x1a5),'token':null}}));}),tgBot[_0x1e2010(0x1e6)](_0x1e2010(0x188));}));}function getConfiguration(){const _0x4a6a50=_0x5e5bff;return dbConfig[_0x4a6a50(0x160)]('bots')[_0x4a6a50(0x281)]('botID')[_0x4a6a50(0x16d)]()||[];}function getEnabledBots(){const _0x1cfbb5=_0x5e5bff;return dbConfig[_0x1cfbb5(0x160)](_0x1cfbb5(0x170))[_0x1cfbb5(0x281)](_0x1cfbb5(0x24f))['filter']({'status':_0x1cfbb5(0x28b)})[_0x1cfbb5(0x16d)]()||[];}function getDisabledBots(){const _0x18fe4d=_0x5e5bff;return dbConfig['get'](_0x18fe4d(0x170))[_0x18fe4d(0x281)](_0x18fe4d(0x24f))[_0x18fe4d(0x270)]({'status':'disabled'})[_0x18fe4d(0x16d)]()||[];}function getSettings(){const _0x10b43a=_0x5e5bff;return dbSettings[_0x10b43a(0x160)](_0x10b43a(0x1d0))[_0x10b43a(0x16d)]()||{'timeshift':0x0};}function getSecure(){const _0x139f17=_0x5e5bff;return dbSecure[_0x139f17(0x160)](_0x139f17(0x186))[_0x139f17(0x16d)]()||{};}function getBlacklist(){const _0x509944=_0x5e5bff;return dbSecure[_0x509944(0x160)]('blacklist')[_0x509944(0x16d)]()||[];}function broadcastToBots(_0x4ad608,_0xd85029){const _0x3a337a=_0x5e5bff;config[_0x3a337a(0x1d9)](_0x11015d=>{const _0x4095d0=_0x3a337a;if(_0x11015d[_0x4095d0(0x27f)]==_0x4095d0(0x28b)&&_0x11015d['live']==_0x4095d0(0x20f)){if(pid[_0x11015d[_0x4095d0(0x24f)]])pid[_0x11015d[_0x4095d0(0x24f)]][_0x4095d0(0x290)]({[_0x4ad608]:_0xd85029});}});}function storeSettings(_0x5215ee,_0x15417f=![]){const _0x66d8a0=_0x5e5bff;_0x5215ee={...settings,..._0x5215ee};if(_0x15417f&&_0x5215ee['bbPassword']!=_0x66d8a0(0x1d2)&&_0x5215ee[_0x66d8a0(0x1b7)]!=''){const _0x8e9744=crypt[_0x66d8a0(0x1a4)](secure[_0x66d8a0(0x28a)],_0x5215ee[_0x66d8a0(0x1b7)])['message']['split']('@')[0x0],_0x15321d=bcrypt[_0x66d8a0(0x1fe)](_0x8e9744,saltRounds);_0x5215ee={..._0x5215ee,'bbPassword':_0x15321d};}if(_0x15417f&&_0x5215ee['telegramToken']!='************'&&_0x5215ee[_0x66d8a0(0x204)]!=''){const _0x2a506c=crypt[_0x66d8a0(0x1a4)](secure[_0x66d8a0(0x28a)],_0x5215ee[_0x66d8a0(0x204)])[_0x66d8a0(0x19c)][_0x66d8a0(0x22a)]('@')[0x0];_0x5215ee={..._0x5215ee,'telegramToken':_0x2a506c};}const _0x469642=_0x5215ee[_0x66d8a0(0x204)]!=_0x66d8a0(0x1d2)&&_0x5215ee[_0x66d8a0(0x204)]!=settings[_0x66d8a0(0x204)]||_0x5215ee[_0x66d8a0(0x168)]!=settings[_0x66d8a0(0x168)],_0x4196af=_0x5215ee[_0x66d8a0(0x204)]==''||_0x5215ee[_0x66d8a0(0x168)]=='';if(_0x469642)_0x5215ee[_0x66d8a0(0x1db)]='all';for(const [_0x558643,_0x4c6372]of Object[_0x66d8a0(0x19a)](_0x5215ee)){if(_0x558643==_0x66d8a0(0x204)&&_0x4c6372==_0x66d8a0(0x1d2)){_0x5215ee[_0x66d8a0(0x204)]=settings[_0x66d8a0(0x204)];continue;};if(_0x558643==_0x66d8a0(0x1b7)&&_0x4c6372==_0x66d8a0(0x1d2)){_0x5215ee[_0x66d8a0(0x1b7)]=settings[_0x66d8a0(0x1b7)];continue;};dbSettings[_0x66d8a0(0x182)]('settings.'+_0x558643,_0x4c6372)[_0x66d8a0(0x21d)]();}settings=_0x5215ee,io['to'](_0x66d8a0(0x25c))[_0x66d8a0(0x24c)](_0x66d8a0(0x1d0),cleanSettings()),broadcastToBots(_0x66d8a0(0x215),settings['timeshift']);if(_0x469642&&!_0x4196af)initTelegram();if(_0x469642&&_0x4196af)disableTelegram();getAllClients()[_0x66d8a0(0x1d9)](_0x45c3c0=>{const _0x280220=_0x66d8a0;getSocket(_0x45c3c0['id'])[_0x280220(0x24c)](_0x280220(0x27f),{'access':{'allow':![],'reason':_0x280220(0x1a0),'token':null}});});}function updateSetting(_0x270f83,_0x13cad4){const _0x5ec4d2=_0x5e5bff;dbSettings['set']('settings.'+_0x270f83,_0x13cad4)[_0x5ec4d2(0x21d)](),settings=getSettings(),io['to'](_0x5ec4d2(0x25c))[_0x5ec4d2(0x24c)](_0x5ec4d2(0x1d0),cleanSettings());}function storeSecure(_0x2e2206){const _0x137413=_0x5e5bff;dbSecure[_0x137413(0x160)](_0x137413(0x186))[_0x137413(0x1b1)](_0x2e2206)['write'](),secure=_0x2e2206;}function _0x1466(){const _0x38c4be=['accept','temporary\x20access\x20not\x20allowed','readdirSync','path','error','listen','update-bb','toIPv4MappedAddress','encryptedUuid','static','settings','2FA\x20required','************','index.html','new-disabled','878QhSHFT',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','slice','8092cyDyIv','forEach','sendMessage','telegramEvents','idling\x20bot\x20\x20\x20|\x20Bot\x20','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','access','node-telegram-bot-api','(((.+)+)+)+$','exit','bot-','get-portfolio','auth','bbUsername','removeListener','Unauthorized\x20attempt\x20to\x20update\x20settings','default','update-bot','toString','apiKey','All\x20bots\x20running\x20right\x20now','verify','socket.io','initclient','disabled','Temporary\x20access\x20rejected','stopPolling','restart','Alerts','createServer','kill','Unauthorized\x20attempt\x20to\x20update\x20bot','whitelist','access\x20timeout','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','login\x20token\x20valid','Unauthorized\x20attempt\x20to\x20get\x20logs','store','hashSync','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','hasOwnProperty','bb-secure.json','reject','starting\x20new\x20bot\x20|\x20Bot\x20','telegramToken','store-settings','store-headless','Notifications\x20enabled\x0a','Bot\x20','started','user','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','get-starting-balances','User\x20has\x20been\x20validated','onText','running','getUTCHours','timestamp','Orders','existsSync','/:bot/portfolio','timeshift','404\x20Not\x20Found','parse','Invalid\x20username\x20or\x20IP\x20address','telegramChatId','All','/off\x20-\x20stop\x20bot(s)\x0a','place-order','write','map','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','3498tnYNZv','Notifications\x20types:\x20','build2','login\x20token\x20generated','/on\x20-\x20start\x20bot(s)\x0a','compareSync','stop','referer','f2aRequired','Balance\x20Bot\x20Server','split','then','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','getFullYear','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','\x20/\x20','7965585lrxepn','unlinkSync','sendFile','version','server','Password\x20has\x20been\x20reset\x20to:\x20','lowdb/adapters/FileSync','UA-192771731-1','delete-bot','All\x20bots','15\x20min','logged\x20out','pidRefreshToken','Allow\x20login\x20from\x20IP\x20address\x20<b>','inherit','padStart','Invalid\x20Telegram\x20token','once','Unauthorized\x20attempt\x20to\x20store\x20configuration','/:bot','restarting\x20Bot\x20','catch','order','bb-settings.json','\x20>\x20','bot.js','telegram2FaApproval','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','emit','blacklist','getMonth','botID','getSeconds','enabled\x20Bot\x20','@analytics/google-analytics','ipaddr.js','Error:\x20Invalid\x20argument\x20','username','notification','\x20only\x0a','connection','exp','Notifications\x20enabled','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','botmanager','cancelLoading','test','log','includes','token','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','toIPv4Address','reason','publicKey','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','invalid\x20credentials','disabled\x20Bot\x20','randomBytes','allow','starting\x20bot\x20|\x20Bot\x20','getMinutes','args','answerCallbackQuery','filter','login\x20not\x20required','backup/','5\x20min','isValid','remove','telegramIpApproval','Bot\x20Mgr\x20>\x20','stopped','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','uuid','secret','/restart\x20-\x20restart\x20bot(s)\x0a','temporaryAccessAllowed','match','status','Invalid\x20IP\x20address','sortBy','Password\x20reset\x20rejected','fork','use','bb/','Login\x20rejected','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','bot','removeAllListeners','privateKey','enabled','event','crypto','headers','data','send','5qjzhRZ','/:bot/configuration','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','hybrid-crypto-js','Unauthorized\x20attempt\x20to\x20add\x20bot','new','from','conn','/:bot/performance','kind','add-bot','/status\x20-\x20show\x20bot(s)\x20status\x0a','telegramEnabled','expiry','add','/:bot/history','3097404JdRCjJ','</b>\x20?','sign','isIPv4MappedAddress','function','temporary\x20token\x20generated','getHours','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','No\x20authentication\x20token','assign','Invalid\x20authentication\x20token\x20(1)','get','No\x20bots\x20running\x20right\x20now','date-fns','botname','Ok,\x20will\x20send\x20alert\x20notifications\x20only','\x20minutes','\x20|\x20','ipc','telegramUsername','ipv6','login\x20required','config/','You\x20can\x20use\x20the\x20following\x20commands:\x0a','value','search','Unauthorized\x20login\x20attempt\x20(timeout)','bots','Ok,\x20will\x20send\x20order\x20notifications\x20only','3642303bTeboG','6098520WwptTB','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','HTML','orders','whitelistEnabled','sockets','Unauthorized\x20attempt\x20to\x20get\x20portfolio','getPortfolio','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Login\x20accepted','bb-config.json','randomFillSync','getDate','polling_error','logout','set','disconnect','Unauthorized\x20attempt\x20to\x20log\x20out','isDirectory','secure','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','callback_query','copyFileSync','5042424cOMdyn','name','alerts','all','mkdirSync','jsonwebtoken','length','defaults','success','chat','127.0.0.1','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','env','cancel-loading','login','Notifications\x20disabled\x0a','entries','Invalid\x20authentication\x20token\x20(2)','message','handshake','clients','getTime','reload','remoteAddress','2FA\x20login\x20token\x20generated','build','decrypt','2FA\x20login\x20rejected','find','error\x20while\x20deleting\x20config\x20files:\x20','1000','loginRequired','join','emitHistory','pidExpireLogin','/enable\x20-\x20enable\x20notifications\x0a','keys','RSA-OAEP','get-logs','push','child_process',',\x20must\x20be\x20a\x204\x20digit\x20number','temporary\x20access\x20rejected','show','type','bbPassword','bcryptjs','/:bot/support','store-configuration','/help\x20-\x20show\x20available\x20commands\x0a','storeHeadless','argv','clientip','-config.json','live','host','-----------------------------------------------------------------------------------','hex','password','apply'];_0x1466=function(){return _0x38c4be;};return _0x1466();}function addBlacklist(_0x5e8c59){const _0x3bcf27=_0x5e5bff;cleanBlacklist();let _0x2a6e67;devices[_0x5e8c59][_0x3bcf27(0x276)]?_0x2a6e67=Math['max'](devices[_0x5e8c59]['telegramIpApproval'][_0x3bcf27(0x152)],loginExpiry):_0x2a6e67=loginExpiry,dbSecure['get'](_0x3bcf27(0x24d))[_0x3bcf27(0x1b1)]({'expiry':new Date()[_0x3bcf27(0x19f)]()+_0x2a6e67*0x3c*0x3e8,'token':devices[_0x5e8c59][_0x3bcf27(0x1de)][_0x3bcf27(0x261)]})[_0x3bcf27(0x21d)](),blacklist=dbSecure[_0x3bcf27(0x160)](_0x3bcf27(0x24d))[_0x3bcf27(0x16d)]();}function cleanBlacklist(){const _0x378b7f=_0x5e5bff;let _0x2472ec=dbSecure[_0x378b7f(0x160)](_0x378b7f(0x24d))['cloneDeep']()[_0x378b7f(0x16d)](),_0x46d037=new Date()[_0x378b7f(0x19f)]();_0x2472ec[_0x378b7f(0x1d9)](_0x48dd44=>{const _0x5b838c=_0x378b7f;_0x48dd44[_0x5b838c(0x152)]<_0x46d037&&dbSecure[_0x5b838c(0x160)](_0x5b838c(0x24d))[_0x5b838c(0x275)]({'expiry':_0x48dd44[_0x5b838c(0x152)]})[_0x5b838c(0x21d)]();});}function initStates(){const _0x5069b4=_0x5e5bff;let _0x5c1a74=getConfiguration();_0x5c1a74[_0x5069b4(0x1d9)](_0x5975a4=>{const _0x1ea4aa=_0x5069b4;_0x5975a4[_0x1ea4aa(0x1c0)]=_0x1ea4aa(0x278);}),storeConfiguration(_0x5c1a74);}function onKeys(){const _0x4a861b=new RSA();return new Promise(_0x480cc4=>{const _0x3aace8=_0x4493;_0x4a861b['generateKeyPairAsync']()[_0x3aace8(0x22b)](_0x1c3a9e=>{_0x480cc4(_0x1c3a9e);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1bfc23=_0x5e5bff;let _0x304f26=getConfiguration(),_0x114327=![];_0x304f26[_0x1bfc23(0x1d9)](_0x3b888b=>{const _0x436027=_0x1bfc23;if(_0x3b888b[_0x436027(0x27f)]==_0x436027(0x20f))_0x3b888b[_0x436027(0x27f)]=_0x436027(0x28b),_0x114327=!![];else _0x3b888b[_0x436027(0x27f)]==_0x436027(0x278)&&(_0x3b888b[_0x436027(0x27f)]=_0x436027(0x1f0),_0x114327=!![]);});if(_0x114327)storeConfiguration(_0x304f26);let _0x59fa52=getSecure();if(!_0x59fa52[_0x1bfc23(0x200)](_0x1bfc23(0x27b))){let _0x24fc85=await generateKeys();_0x59fa52['publicKey']=_0x24fc85[_0x1bfc23(0x266)],_0x59fa52[_0x1bfc23(0x28a)]=_0x24fc85[_0x1bfc23(0x28a)],_0x59fa52[_0x1bfc23(0x27b)]=crypto[_0x1bfc23(0x26a)](0x20)[_0x1bfc23(0x1ea)](_0x1bfc23(0x1c3));;storeSecure(_0x59fa52);}let _0x182019=getSettings();_0x114327=![];!_0x182019[_0x1bfc23(0x200)](_0x1bfc23(0x1a9))&&(_0x182019['loginRequired']=![],_0x182019[_0x1bfc23(0x1e5)]='',_0x182019[_0x1bfc23(0x1b7)]='',_0x182019[_0x1bfc23(0x228)]=![],_0x114327=!![]);!_0x182019['hasOwnProperty'](_0x1bfc23(0x177))&&(_0x182019['whitelistEnabled']=![],_0x182019[_0x1bfc23(0x1f8)]=[],_0x182019[_0x1bfc23(0x27d)]=![],_0x114327=!![]);if(!_0x182019[_0x1bfc23(0x200)](_0x1bfc23(0x29d))){if(_0x182019[_0x1bfc23(0x219)])_0x182019['telegramEnabled']=!![];else _0x182019[_0x1bfc23(0x29d)]=![];_0x114327=!![];}if(_0x114327)storeSettings(_0x182019);}function storeConfiguration(_0x59ba99){const _0x303d06=_0x5e5bff;dbConfig[_0x303d06(0x160)]('bots')[_0x303d06(0x275)]()[_0x303d06(0x21d)](),dbConfig['get'](_0x303d06(0x170))['push'](..._0x59ba99)[_0x303d06(0x21d)](),config=_0x59ba99;}function resetPassword(){const _0x3377c2=_0x5e5bff;tgBot&&settings['telegramChatId']&&(tgBot[_0x3377c2(0x1e6)](_0x3377c2(0x188)),tgBot[_0x3377c2(0x1da)](settings[_0x3377c2(0x219)],_0x3377c2(0x22e),{'parse_mode':_0x3377c2(0x175),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x3377c2(0x245)](_0x14fd9b=>{telegramError(_0x14fd9b);}),tgBot['on'](_0x3377c2(0x188),async _0x551332=>{const _0x2d47a3=_0x3377c2,_0x44ed47=_0x551332[_0x2d47a3(0x28f)],_0x5b7241=_0x551332['message'];tgBot['answerCallbackQuery'](_0x551332['id'])[_0x2d47a3(0x22b)](async()=>{const _0x5aa89c=_0x2d47a3;if(_0x44ed47!='no'){const _0x3a6b98=0xf,_0xbabf0b='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x209792=Array[_0x5aa89c(0x297)](crypto[_0x5aa89c(0x17e)](new Uint32Array(_0x3a6b98)))[_0x5aa89c(0x21e)](_0x44f3a3=>_0xbabf0b[_0x44f3a3%_0xbabf0b[_0x5aa89c(0x190)]])[_0x5aa89c(0x1aa)](''),_0x27a1e3=bcrypt[_0x5aa89c(0x1fe)](_0x209792,saltRounds);storeSettings({'bbPassword':_0x27a1e3}),await tgBot['sendMessage'](_0x5b7241[_0x5aa89c(0x193)]['id'],_0x5aa89c(0x235)+_0x209792,{'parse_mode':_0x5aa89c(0x175)})[_0x5aa89c(0x245)](_0x55c235=>{telegramError(_0x55c235);});}else await tgBot[_0x5aa89c(0x1da)](_0x5b7241['chat']['id'],_0x5aa89c(0x282))[_0x5aa89c(0x245)](_0x2add8f=>{telegramError(_0x2add8f);});}),tgBot['removeListener'](_0x2d47a3(0x188));}));}function logging(_0x45f855){const _0x2b273d=_0x5e5bff;console[_0x2b273d(0x25f)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x45f855);if(tgBot&&settings[_0x2b273d(0x219)]&&settings[_0x2b273d(0x1db)]!=_0x2b273d(0x176))tgBot[_0x2b273d(0x1da)](settings['telegramChatId'],_0x2b273d(0x277)+_0x45f855)[_0x2b273d(0x245)](_0x26e188=>{telegramError(_0x26e188);});}function getServerTime(){const _0x36b7b8=_0x5e5bff,_0x46cd46=new Date();return _0x46cd46[_0x36b7b8(0x22d)]()+'/'+(_0x46cd46[_0x36b7b8(0x24e)]()+0x1)['toString']()[_0x36b7b8(0x23f)](0x2,'0')+'/'+_0x46cd46[_0x36b7b8(0x17f)]()[_0x36b7b8(0x1ea)]()['padStart'](0x2,'0')+'\x20'+_0x46cd46[_0x36b7b8(0x15b)]()[_0x36b7b8(0x1ea)]()[_0x36b7b8(0x23f)](0x2,'0')+':'+_0x46cd46['getMinutes']()[_0x36b7b8(0x1ea)]()['padStart'](0x2,'0')+':'+_0x46cd46[_0x36b7b8(0x250)]()[_0x36b7b8(0x1ea)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x33dd49=_0x5e5bff,_0x163f19=shiftedTime();return _0x163f19[_0x33dd49(0x22d)]()+'/'+(_0x163f19[_0x33dd49(0x24e)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x163f19[_0x33dd49(0x17f)]()['toString']()[_0x33dd49(0x23f)](0x2,'0')+'\x20'+_0x163f19['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x163f19[_0x33dd49(0x26d)]()[_0x33dd49(0x1ea)]()['padStart'](0x2,'0')+':'+_0x163f19['getSeconds']()[_0x33dd49(0x1ea)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x1c3230=_0x5e5bff,_0x2c0dae=new Date();let _0x40fdac=_0x2c0dae;if(settings[_0x1c3230(0x215)]&&settings[_0x1c3230(0x215)]!==0x0)_0x40fdac=fns[_0x1c3230(0x153)](_0x2c0dae,{'hours':settings[_0x1c3230(0x215)]});return _0x40fdac;}function startScheduler(){const _0xb345e8=_0x5e5bff;let _0x1de292=new Date()[_0xb345e8(0x210)]();_0x1de292==0x1&&backupConfigFiles();_0x1de292==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x51d91a=_0x5e5bff;fs[_0x51d91a(0x1c8)](configpath,{'withFileTypes':!![]})[_0x51d91a(0x1d9)](_0xcdc0b8=>{const _0x67d31b=_0x51d91a;if(!_0xcdc0b8[_0x67d31b(0x185)]())fs[_0x67d31b(0x189)](configpath+_0xcdc0b8[_0x67d31b(0x18b)],configbackuppath+_0xcdc0b8[_0x67d31b(0x18b)]);});}function triggerAnalytics(){const _0x1bf0fc=_0x5e5bff;analytics['page']({'title':_0x1bf0fc(0x229),'href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x2d7a4c,_0x26df84){const _0x438bf3=_0x5e5bff;if(_0x2d7a4c['username']==settings[_0x438bf3(0x1e5)]&&bcrypt[_0x438bf3(0x225)](_0x2d7a4c[_0x438bf3(0x1c4)],settings[_0x438bf3(0x1b7)])){if(settings[_0x438bf3(0x228)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x3235f8=generateLoginToken(_0x26df84);return{'allow':!![],'reason':_0x438bf3(0x223),'token':_0x3235f8};}}else return{'allow':![],'reason':_0x438bf3(0x268),'token':null};}function refreshToken(_0x7483e2){const _0x50b872=_0x5e5bff,_0x25be12=generateLoginToken(_0x7483e2);return{'allow':!![],'reason':_0x50b872(0x223),'token':_0x25be12};}function validateAccess(_0x38cfdd,_0x481cdd){const _0x4f7a32=_0x5e5bff;let _0x413187=devices[_0x481cdd]['ip'],_0x10f10a;const _0x3693dd=_0x3b2cc6=>{const _0x1951b6=_0x4493;if(settings[_0x1951b6(0x1a9)]){if(settings[_0x1951b6(0x228)]){if(telegram2FaApproved(_0x481cdd)){const _0x4d9382=generateLoginToken(_0x481cdd);return{'allow':!![],'reason':_0x1951b6(0x1a2),'token':_0x4d9382};}else return{'allow':![],'reason':_0x1951b6(0x16a),'token':null};}else return _0x10f10a=validToken(_0x3b2cc6,_0x481cdd),_0x10f10a[_0x1951b6(0x200)](_0x1951b6(0x192))?{'allow':!![],'reason':_0x1951b6(0x1fb),'token':_0x3b2cc6}:{'allow':![],'reason':_0x1951b6(0x16a),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x4f7a32(0x177)]){let _0x5c2aad=[...settings[_0x4f7a32(0x1f8)],'::1','::ffff:127.0.0.1',_0x4f7a32(0x194)];if(_0x5c2aad['includes'](_0x413187))return _0x3693dd(_0x38cfdd);else{_0x10f10a=validToken(_0x38cfdd,_0x481cdd);if(_0x10f10a[_0x4f7a32(0x200)](_0x4f7a32(0x192)))return _0x3693dd(_0x38cfdd);else{if(telegramIpApproved(_0x481cdd)){const _0x191b0f=generateToken(_0x481cdd);return _0x10f10a=_0x3693dd(_0x38cfdd),_0x10f10a[_0x4f7a32(0x26b)]?{'allow':!![],'reason':_0x4f7a32(0x15a),'token':_0x191b0f}:_0x10f10a;}else return settings[_0x4f7a32(0x27d)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x4f7a32(0x1c7),'token':null};}}}else return _0x3693dd(_0x38cfdd);}function timelyDecrypt(_0x13901c,_0x4aa454=!![]){const _0x19f1c8=_0x5e5bff;if(_0x13901c)try{const _0xe7bb31=crypt[_0x19f1c8(0x1a4)](secure[_0x19f1c8(0x28a)],_0x13901c)[_0x19f1c8(0x19c)],_0xfed678=_0xe7bb31[_0x19f1c8(0x22a)]('@')[0x0],_0x3760e5=_0xe7bb31[_0x19f1c8(0x22a)]('@')[0x1],_0x37790e=new Date()[_0x19f1c8(0x19f)]();if(_0x4aa454){if(_0x37790e-_0x3760e5<maxSecretAge*0x3e8)return _0xfed678;else return![];}else return _0xfed678;}catch(_0xc9c6b5){return![];}else return![];}const validToken=(_0x56ca8c,_0x4efe7b)=>{const _0x5d7147=_0x5e5bff,_0x474e10=devices[_0x4efe7b]['ip'];if(!_0x56ca8c)return{'error':_0x5d7147(0x15d)};for(let _0x5b2c0f of blacklist){if(_0x5b2c0f[_0x5d7147(0x261)]==_0x56ca8c)return{'error':'Token\x20blacklisted'};}let _0x1aed44;try{_0x1aed44=jwt[_0x5d7147(0x1ed)](_0x56ca8c,secure[_0x5d7147(0x27b)]+_0x4efe7b);}catch{return{'error':_0x5d7147(0x15f)};}if(!_0x1aed44['hasOwnProperty'](_0x5d7147(0x1be))&&!_0x1aed44[_0x5d7147(0x200)](_0x5d7147(0x255))||!_0x1aed44[_0x5d7147(0x200)](_0x5d7147(0x259)))return{'error':_0x5d7147(0x19b)};if(!_0x1aed44['hasOwnProperty']('username')&&_0x1aed44[_0x5d7147(0x200)](_0x5d7147(0x1be))){const {clientip:_0x87dcfa}=_0x1aed44;return _0x474e10==_0x87dcfa?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x5d7147(0x280)};}else{if(_0x1aed44[_0x5d7147(0x200)](_0x5d7147(0x255))&&_0x1aed44[_0x5d7147(0x200)](_0x5d7147(0x1be))){const {username:_0x4b8fd0,clientip:_0x2cf215}=_0x1aed44;return settings[_0x5d7147(0x1e5)]==_0x4b8fd0&&_0x474e10==_0x2cf215?{'success':_0x5d7147(0x20d)}:{'error':_0x5d7147(0x218)};}}},generateLoginToken=_0x2a87c1=>{const _0x201dbd=_0x5e5bff;if(_0x2a87c1){const _0x59940a=devices[_0x2a87c1]['ip'];return jwt[_0x201dbd(0x157)]({'username':settings[_0x201dbd(0x1e5)],'clientip':_0x59940a},secure[_0x201dbd(0x27b)]+_0x2a87c1,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x455f23=>{const _0x308a74=_0x5e5bff;if(_0x455f23){const _0x2ffa64=devices[_0x455f23]['ip'];return jwt[_0x308a74(0x157)]({'clientip':_0x2ffa64},secure['secret']+_0x455f23,{'expiresIn':devices[_0x455f23][_0x308a74(0x276)][_0x308a74(0x152)]*0x3c});}else return![];},telegramIpApproved=_0xc8ecd7=>{const _0x24c308=_0x5e5bff;let _0x207abb=![];return devices[_0xc8ecd7][_0x24c308(0x276)]&&devices[_0xc8ecd7][_0x24c308(0x276)][_0x24c308(0x152)]!='reject'&&(_0x207abb=devices[_0xc8ecd7][_0x24c308(0x276)][_0x24c308(0x1be)]==devices[_0xc8ecd7]['ip']&&new Date()[_0x24c308(0x19f)]()-devices[_0xc8ecd7][_0x24c308(0x276)][_0x24c308(0x211)]<devices[_0xc8ecd7][_0x24c308(0x276)][_0x24c308(0x152)]*0x3c*0x3e8),_0x207abb;},telegram2FaApproved=_0x10cf84=>{const _0x132665=_0x5e5bff;let _0x25e66c=![];return devices[_0x10cf84][_0x132665(0x24a)]&&devices[_0x10cf84][_0x132665(0x24a)]['expiry']!=_0x132665(0x202)&&(_0x25e66c=devices[_0x10cf84]['telegram2FaApproval'][_0x132665(0x1be)]==devices[_0x10cf84]['ip']&&new Date()[_0x132665(0x19f)]()-devices[_0x10cf84][_0x132665(0x24a)][_0x132665(0x211)]<devices[_0x10cf84][_0x132665(0x24a)][_0x132665(0x152)]*0x3c*0x3e8),_0x25e66c;},normalizeIP=_0x2c79ef=>{const _0x2793cd=_0x5e5bff;let _0xc08fc7=null,_0x3e2527=null;if(ipaddr[_0x2793cd(0x274)](_0x2c79ef)){const _0x45ae0b=ipaddr[_0x2793cd(0x217)](_0x2c79ef);_0x45ae0b[_0x2793cd(0x29a)]()===_0x2793cd(0x169)?(_0x45ae0b[_0x2793cd(0x158)]()&&(_0xc08fc7=_0x45ae0b[_0x2793cd(0x264)]()[_0x2793cd(0x1ea)]()),_0x3e2527=_0x45ae0b['toString']()):(_0xc08fc7=_0x45ae0b[_0x2793cd(0x1ea)](),_0x3e2527=_0x45ae0b[_0x2793cd(0x1cd)]()[_0x2793cd(0x1ea)]());}return{'show':_0xc08fc7?_0xc08fc7:_0x3e2527,'store':_0x3e2527};};