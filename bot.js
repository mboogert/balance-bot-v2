const _0x3a559c=_0x4dd2;(function(_0x49a831,_0xbf6d96){const _0x105bb3=_0x4dd2,_0x29754d=_0x49a831();while(!![]){try{const _0x20099f=parseInt(_0x105bb3(0xe5))/0x1*(parseInt(_0x105bb3(0x167))/0x2)+-parseInt(_0x105bb3(0x148))/0x3+-parseInt(_0x105bb3(0x10f))/0x4*(-parseInt(_0x105bb3(0x12d))/0x5)+-parseInt(_0x105bb3(0x10e))/0x6+parseInt(_0x105bb3(0x11d))/0x7+parseInt(_0x105bb3(0x168))/0x8*(-parseInt(_0x105bb3(0x185))/0x9)+parseInt(_0x105bb3(0x145))/0xa*(-parseInt(_0x105bb3(0xba))/0xb);if(_0x20099f===_0xbf6d96)break;else _0x29754d['push'](_0x29754d['shift']());}catch(_0x5fa72c){_0x29754d['push'](_0x29754d['shift']());}}}(_0x8d85,0x344ff));const _0x57646f=function(){let _0x113f62=!![];return function(_0x4754ef,_0x372bf7){const _0x179f1a=_0x113f62?function(){const _0xd22679=_0x4dd2;if(_0x372bf7){const _0x19f78c=_0x372bf7[_0xd22679(0xb8)](_0x4754ef,arguments);return _0x372bf7=null,_0x19f78c;}}:function(){};return _0x113f62=![],_0x179f1a;};}(),_0x38072b=_0x57646f(this,function(){const _0x200197=_0x4dd2;return _0x38072b[_0x200197(0x15e)]()[_0x200197(0xe9)](_0x200197(0xa6))[_0x200197(0x15e)]()[_0x200197(0xb5)](_0x38072b)['search'](_0x200197(0xa6));});_0x38072b();'use strict';const ccxt=require(_0x3a559c(0xfc)),low=require(_0x3a559c(0x9d)),FileSync=require(_0x3a559c(0x197)),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger}=require('binance'),Crypt=require(_0x3a559c(0x183))[_0x3a559c(0x136)];let exchange,wsClient;global[_0x3a559c(0x141)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x3a559c(0xd5))[_0x3a559c(0x12e)],botID=process[_0x3a559c(0x18c)][0x2]||_0x3a559c(0x10c),pattern=/^[0-9]{3}$/;if(!pattern[_0x3a559c(0xfe)](botID))return console['log'](_0x3a559c(0xb2)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x3a559c(0x126)](0x1);const userID=process[_0x3a559c(0x18c)][0x3]||'',configpath=userID?_0x3a559c(0xd4)+userID+'/':_0x3a559c(0xd4);!fs[_0x3a559c(0x190)](configpath)&&fs[_0x3a559c(0xea)](configpath);const configfile=configpath+_0x3a559c(0x175)+botID+_0x3a559c(0xf2),logfile=configpath+'bot-'+botID+_0x3a559c(0x16d),performancefile=configpath+_0x3a559c(0x175)+botID+_0x3a559c(0x15d),coinresultsfile=configpath+_0x3a559c(0x175)+botID+_0x3a559c(0x14f),settingsfile=configpath+_0x3a559c(0xc1),securefile=configpath+_0x3a559c(0xe0),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x3a559c(0x12a)]({'logs':[]})[_0x3a559c(0x8d)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3a559c(0x12a)]({'data':[]})[_0x3a559c(0x8d)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x3a559c(0x12a)]({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3a559c(0x12a)]({'coins':[]})[_0x3a559c(0x8d)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);function _0x4dd2(_0x4cad0d,_0x4825a1){const _0x2c8b3d=_0x8d85();return _0x4dd2=function(_0x38072b,_0x57646f){_0x38072b=_0x38072b-0x86;let _0x8d8577=_0x2c8b3d[_0x38072b];return _0x8d8577;},_0x4dd2(_0x4cad0d,_0x4825a1);}let stablecoins={'eur':{'coin':'BTCEUR','symbol':'BTC/EUR'},'usd':{'coin':'BTCUSDT','symbol':_0x3a559c(0x179)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x30ffd4)=>{},'debug':(..._0x1603ab)=>{},'notice':(..._0x19d92b)=>{},'info':(..._0x26dee8)=>{},'warning':(..._0x23207f)=>{},'error':async function(..._0x306a76){const _0x12f02e=_0x3a559c,_0x531596=new Date()[_0x12f02e(0xce)]();if(!lastErrorShown||_0x531596-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x12f02e(0xce)](),logHistory(_0x12f02e(0x140),_0x12f02e(0xf9)+consecutivePauses+_0x12f02e(0x95));let _0x43ce7b='';if(_0x306a76[0x0])_0x43ce7b+=_0x306a76[0x0];if(_0x306a76[0x1]&&_0x306a76[0x1][_0x12f02e(0x140)]&&_0x306a76[0x1][_0x12f02e(0x140)][_0x12f02e(0x125)])_0x43ce7b+='\x20-\x20'+_0x306a76[0x1][_0x12f02e(0x140)][_0x12f02e(0x125)];logging(_0x12f02e(0xf9)+consecutivePauses+_0x12f02e(0x154),''+_0x43ce7b),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x3a559c(0xa4),'rsaStandard':_0x3a559c(0xf0)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x3a559c(0x19c)]!=config[_0x3a559c(0x19c)]&&updateTimeshift(settings[_0x3a559c(0x19c)]);process[_0x3a559c(0x96)]({'started':_0x3a559c(0xa1)}),initializeProcessListeners();function proxyEmit(_0x4ab48d,_0x47a1f6=null){const _0x316906=_0x3a559c;process[_0x316906(0x96)]({'function':_0x4ab48d,'args':_0x47a1f6});}function initializeProcessListeners(){const _0x1e0bc5=_0x3a559c;process['on'](_0x1e0bc5(0x125),_0x4c5d8f=>{const _0x3b5168=_0x1e0bc5;switch(Object['keys'](_0x4c5d8f)[0x0]){case _0x3b5168(0x19c):_0x4c5d8f['timeshift']!=undefined&&(settings[_0x3b5168(0x19c)]=_0x4c5d8f[_0x3b5168(0x19c)],updateTimeshift(settings['timeshift']));break;case _0x3b5168(0x132):switch(_0x4c5d8f[_0x3b5168(0x132)]){case _0x3b5168(0x178):initclient();break;case _0x3b5168(0x17c):emitHistory(_0x4c5d8f['args']);break;case'getPortfolio':getPortfolio(_0x4c5d8f[_0x3b5168(0x17b)]);break;case'storeConfiguration':storeConfiguration(_0x4c5d8f['args']);break;case _0x3b5168(0x184):storeHeadless(_0x4c5d8f[_0x3b5168(0x17b)]);break;case _0x3b5168(0xa5):getStartingBalances();break;case _0x3b5168(0x170):placeOrder(_0x4c5d8f[_0x3b5168(0x17b)]);break;case'cancelLoading':cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x43b464=_0x3a559c;if(pidBalances)clearTimeout(pidBalances);if(config[_0x43b464(0x127)]!=''){await initExchange(config[_0x43b464(0x127)],config[_0x43b464(0x13c)]);let _0x2bf3ce=await loadSymbols();_0x2bf3ce&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x2b4b7f,_0x101127){const _0x2cf2c6=_0x3a559c,_0x4c20b9=ccxt[config[_0x2cf2c6(0x11e)]];let _0x513f79;switch(config['exchange']){case _0x2cf2c6(0xa8):_0x513f79=_0x2cf2c6(0x17d);break;case _0x2cf2c6(0xee):_0x513f79='wss://stream.binance.us:9443';break;default:_0x513f79=_0x2cf2c6(0x17d);}exchange=new _0x4c20b9({'apiKey':_0x2b4b7f,'secret':_0x101127,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x2b4b7f,'api_secret':_0x101127,'beautify':!![],'wsUrl':_0x513f79},logger),config[_0x2cf2c6(0x11e)]==_0x2cf2c6(0xee)&&(stablecoins={'eur':{'coin':_0x2cf2c6(0xfa),'symbol':_0x2cf2c6(0xc5)},'usd':{'coin':_0x2cf2c6(0x11b),'symbol':_0x2cf2c6(0x179)}});}async function loadSymbols(){const _0x4023b9=_0x3a559c;let _0xc102a9;try{markets=await exchange[_0x4023b9(0x112)]();const _0x3973da=[_0x4023b9(0x90),_0x4023b9(0x186),_0x4023b9(0x106)];allSymbols=exchange[_0x4023b9(0xae)][_0x4023b9(0x149)](_0x42165d=>{const _0x1aa22e=_0x4023b9;let _0x24f714=![];return _0x3973da[_0x1aa22e(0xda)](_0x1a1d04=>{const _0x35af2d=_0x1aa22e;if(_0x42165d[_0x35af2d(0xe1)](_0x1a1d04))_0x24f714=!![];}),!_0x24f714;}),_0xc102a9=!![];}catch(_0x34a9c1){await handleError(_0x34a9c1,_0x4023b9(0xc7)),_0xc102a9=![];}return _0xc102a9;}async function initbot(){const _0x1a29dc=_0x3a559c;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x487c47=dbCoinResults['get'](_0x1a29dc(0x9e))[_0x1a29dc(0x146)]();if(_0x487c47[_0x1a29dc(0xd0)]==0x0)await resetCoinResults();}async function initclient(){const _0x3b047e=_0x3a559c;proxyEmit('configuration',emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3b047e(0x8c),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x4db0e0=_0x3a559c;wsinitialized=![];ws1&&(ws1[_0x4db0e0(0xda)](_0x14fd36=>{const _0xeedb1a=_0x4db0e0;try{wsClient[_0xeedb1a(0x180)](_0x14fd36);}catch(_0x160ae0){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x168f39){}ws2=null;}}async function initws(){const _0x1d411d=_0x3a559c;cleanws();let _0x152863=[];currentCoins[_0x1d411d(0xda)](_0x42d096=>{const _0x49f884=_0x1d411d;if(_0x42d096['coin']!=config[_0x49f884(0x16a)])_0x152863['push'](noslash(_0x42d096[_0x49f884(0xc6)]));});if(!_0x152863[_0x1d411d(0xe1)](stablecoins[_0x1d411d(0x17f)][_0x1d411d(0x18a)]))_0x152863['push'](stablecoins[_0x1d411d(0x17f)][_0x1d411d(0x18a)]);if(!_0x152863[_0x1d411d(0xe1)](stablecoins[_0x1d411d(0xbe)][_0x1d411d(0x18a)]))_0x152863[_0x1d411d(0x92)](stablecoins[_0x1d411d(0xbe)]['coin']);if(!_0x152863['includes'](_0x1d411d(0xbb)+config['basecoin']))_0x152863[_0x1d411d(0x92)](_0x1d411d(0xbb)+config[_0x1d411d(0x16a)]);try{_0x152863[_0x1d411d(0xda)]((_0x835941,_0x309c83)=>{const _0x49682d=_0x1d411d;ws1[_0x309c83]=wsClient[_0x49682d(0x18f)](_0x835941,'1m');}),ws2=wsClient[_0x1d411d(0xa3)](),wsClient['on'](_0x1d411d(0xbf),_0x378b18=>{const _0x476b66=_0x1d411d;if(!Array[_0x476b66(0xcd)](_0x378b18)&&!_0x378b18[_0x476b66(0x143)][_0x476b66(0xe1)]('userData')){if(_0x378b18[_0x476b66(0x15f)]==='kline'){global[_0x476b66(0x141)][_0x378b18['kline']['symbol']]=_0x378b18[_0x476b66(0x100)][_0x476b66(0x144)];return;}}else{if(!Array[_0x476b66(0xcd)](_0x378b18)&&_0x378b18[_0x476b66(0x143)][_0x476b66(0xe1)](_0x476b66(0x173))){if(_0x378b18[_0x476b66(0x114)][_0x476b66(0xe1)](_0x476b66(0x116))){updateNumberCoins(_0x378b18);return;}}}}),wsClient['on'](_0x1d411d(0x8f),async _0x530cbd=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x224f0e){await handleError(_0x224f0e,_0x1d411d(0x8a));}let _0xb7942d,_0x3b8571=0x0;loading[_0x1d411d(0x124)]=[];let _0xbbbe60=0x0;currentCoins['forEach'](_0x4ac349=>{const _0x3263d=_0x1d411d;if(_0x4ac349['coin']!=config[_0x3263d(0x16a)])loading['remainingSymbols'][_0x3263d(0x92)](_0x4ac349['symbol']);}),loadingCanceled=![];while(_0xb7942d!=currentCoins[_0x1d411d(0xd0)]-0x1){_0xb7942d=0x0,currentCoins[_0x1d411d(0xda)](_0x361af2=>{const _0x304254=_0x1d411d;_0x361af2[_0x304254(0x18a)]!=config[_0x304254(0x16a)]&&global[_0x304254(0x141)][noslash(_0x361af2[_0x304254(0xc6)])]&&(loading[_0x304254(0x124)]=loading[_0x304254(0x124)]['filter'](_0x4df124=>_0x4df124!=_0x361af2[_0x304254(0xc6)]),_0xb7942d++);}),loading[_0x1d411d(0x151)]=Math['round'](_0xb7942d/(currentCoins[_0x1d411d(0xd0)]-0x1)*0x64);_0xbbbe60>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0xb7942d!=_0x3b8571&&(_0x3b8571=_0xb7942d,emitLoadingProgress()),_0xbbbe60++,await sleep(0xc8);}if(_0xb7942d==currentCoins[_0x1d411d(0xd0)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x4bef2a=_0x3a559c;proxyEmit(_0x4bef2a(0x130),loading);}async function getFiat(){const _0x4e1abd=_0x3a559c;let _0x14c53a=0x0,_0xe58721=0x0;try{_0x14c53a=global[_0x4e1abd(0x141)][stablecoins[_0x4e1abd(0x17f)][_0x4e1abd(0x18a)]],_0xe58721=global[_0x4e1abd(0x141)][stablecoins[_0x4e1abd(0xbe)][_0x4e1abd(0x18a)]];}catch(_0x4c7020){await handleError(_0x4c7020,_0x4e1abd(0x19a));}return{'eur':Number(_0x14c53a),'usd':Number(_0xe58721)};}async function setStartDatePerformance(_0x43b430){const _0x38c717=_0x3a559c,_0x512c6a=fns[_0x38c717(0xc9)](new Date(_0x43b430['startdate']),_0x38c717(0xb9));let _0x36a802=[];_0x36a802[stablecoins['eur'][_0x38c717(0x18a)]]=await getCloses(stablecoins[_0x38c717(0x17f)][_0x38c717(0xc6)],new Date(_0x43b430['startdate']),0x1),_0x36a802[stablecoins['usd'][_0x38c717(0x18a)]]=await getCloses(stablecoins[_0x38c717(0xbe)]['symbol'],new Date(_0x43b430[_0x38c717(0x12b)]),0x1);let _0x179db8,_0x201543=[];_0x43b430['portfolio'][_0x38c717(0xda)](_0x276fb8=>{const _0xb881cb=_0x38c717;!_0x276fb8[_0xb881cb(0xf3)]&&_0x201543[_0xb881cb(0x92)]({'coin':_0x276fb8[_0xb881cb(0x18a)],'number':_0x276fb8['startnumber'],'price':_0x276fb8[_0xb881cb(0x139)]});}),_0x179db8={'date':_0x512c6a,'eur':_0x36a802[stablecoins[_0x38c717(0x17f)][_0x38c717(0x18a)]][0x0],'usd':_0x36a802[stablecoins[_0x38c717(0xbe)][_0x38c717(0x18a)]][0x0],'coins':_0x201543};let _0x58ae0e=dbPerformance[_0x38c717(0x133)]('data')[_0x38c717(0x121)]({'date':_0x512c6a})[_0x38c717(0x146)]();_0x58ae0e?dbPerformance['get']('data')['find']({'date':_0x512c6a})['assign'](_0x179db8)['write']():dbPerformance[_0x38c717(0x133)](_0x38c717(0xc0))[_0x38c717(0x92)](_0x179db8)[_0x38c717(0x8d)](),_0x58ae0e=dbPerformance[_0x38c717(0x133)](_0x38c717(0xc0))[_0x38c717(0x9f)](_0x38c717(0xcf))[_0x38c717(0x146)](),_0x58ae0e[_0x38c717(0xda)](_0x201cbf=>{const _0x4e2866=_0x38c717;_0x201cbf['date']<_0x512c6a&&dbPerformance['get'](_0x4e2866(0xc0))[_0x4e2866(0x155)]({'date':_0x201cbf[_0x4e2866(0xcf)]})[_0x4e2866(0x8d)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x5f31c8){const _0x28d75b=_0x3a559c;let _0x7bf758,_0x405616=[];logHistory(_0x28d75b(0xef),'Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes'),_0x5f31c8[_0x28d75b(0x14e)]['forEach'](_0x5bbb52=>{const _0x34650c=_0x28d75b;if(_0x5bbb52[_0x34650c(0x18a)]!=config[_0x34650c(0x16a)]&&!_0x5bbb52[_0x34650c(0xf3)])_0x405616[_0x34650c(0x92)]({'coin':_0x5bbb52[_0x34650c(0x18a)],'symbol':_0x5bbb52[_0x34650c(0xc6)]});});let _0x499f94=[];try{const _0x38882b=fns[_0x28d75b(0xc9)](fns[_0x28d75b(0x150)](_0x5f31c8['startdate'][_0x28d75b(0x172)](/\//g,'-')),_0x28d75b(0x8b));for(const _0x553e70 of _0x405616){if(_0x553e70[_0x28d75b(0x18a)]!=config[_0x28d75b(0x16a)])_0x7bf758=await exchange[_0x28d75b(0x12f)](_0x553e70[_0x28d75b(0xc6)],Date[_0x28d75b(0x16f)](_0x38882b));_0x7bf758[_0x28d75b(0xda)](_0x544928=>{const _0x4069e0=_0x28d75b,_0x2d1387=_0x553e70[_0x4069e0(0xc6)][_0x4069e0(0xe1)](config[_0x4069e0(0x16a)]+'/'),_0x2c43cc=fns[_0x4069e0(0xc9)](fns[_0x4069e0(0x150)](_0x544928['datetime']),_0x4069e0(0x15b)),_0x3db263=fns[_0x4069e0(0xc9)](fns[_0x4069e0(0x150)](_0x544928[_0x4069e0(0x118)]),_0x4069e0(0xb9));let _0x5928de;if(_0x544928[_0x4069e0(0xfb)]==_0x4069e0(0x110)&&_0x2d1387==![])_0x5928de=_0x544928['amount'];if(_0x544928[_0x4069e0(0xfb)]==_0x4069e0(0x110)&&_0x2d1387==!![])_0x5928de=-_0x544928[_0x4069e0(0x193)]*_0x544928[_0x4069e0(0xac)];if(_0x544928[_0x4069e0(0xfb)]==_0x4069e0(0xb1)&&_0x2d1387==![])_0x5928de=-_0x544928[_0x4069e0(0x193)];if(_0x544928[_0x4069e0(0xfb)]==_0x4069e0(0xb1)&&_0x2d1387==!![])_0x5928de=_0x544928[_0x4069e0(0x193)]*_0x544928[_0x4069e0(0xac)];_0x499f94[_0x4069e0(0x92)]({'timestamp':_0x2c43cc,'date':_0x3db263,'coin':_0x553e70[_0x4069e0(0x18a)],'symbol':_0x553e70[_0x4069e0(0xc6)],'type':_0x544928[_0x4069e0(0x11f)],'side':_0x544928[_0x4069e0(0xfb)],'reverse':_0x2d1387,'amount':formatResult(_0x544928[_0x4069e0(0xf1)],0x8),'filled':formatResult(_0x544928['filled'],0x8),'coinamount':formatResult(_0x5928de,0x8),'price':formatResult(_0x544928[_0x4069e0(0xac)],0x8)});let _0x35dfb7;if(_0x544928[_0x4069e0(0xfb)]==_0x4069e0(0x110)&&_0x2d1387==![])_0x35dfb7=-_0x544928[_0x4069e0(0x193)]*_0x544928[_0x4069e0(0xac)];if(_0x544928[_0x4069e0(0xfb)]=='buy'&&_0x2d1387==!![])_0x35dfb7=_0x544928[_0x4069e0(0x193)];if(_0x544928[_0x4069e0(0xfb)]=='sell'&&_0x2d1387==![])_0x35dfb7=_0x544928[_0x4069e0(0x193)]*_0x544928[_0x4069e0(0xac)];if(_0x544928['side']=='sell'&&_0x2d1387==!![])_0x35dfb7=-_0x544928['amount'];_0x499f94[_0x4069e0(0x92)]({'date':_0x3db263,'coin':config['basecoin'],'coinamount':formatResult(_0x35dfb7,0x8)});});}_0x499f94[_0x28d75b(0x153)]((_0x227d1a,_0x595d39)=>_0x227d1a[_0x28d75b(0xdf)]>_0x595d39[_0x28d75b(0xdf)]?0x1:_0x595d39[_0x28d75b(0xdf)]>_0x227d1a[_0x28d75b(0xdf)]?-0x1:0x0),dbLogs[_0x28d75b(0x133)](_0x28d75b(0x13e))[_0x28d75b(0x155)]()[_0x28d75b(0x8d)](),_0x499f94[_0x28d75b(0xda)](_0x4e35cb=>{const _0xabd59a=_0x28d75b;let _0x2b5aba;_0x4e35cb[_0xabd59a(0x18a)]!=config[_0xabd59a(0x16a)]&&(_0x2b5aba={'time':_0x4e35cb[_0xabd59a(0xdf)],'type':'order','event':_0xabd59a(0x159)+_0x4e35cb[_0xabd59a(0xc6)]+'\x20'+_0x4e35cb[_0xabd59a(0xfb)]+'\x20#'+_0x4e35cb[_0xabd59a(0x193)]+'\x20@'+_0x4e35cb[_0xabd59a(0xac)]},dbLogs[_0xabd59a(0x133)](_0xabd59a(0x13e))[_0xabd59a(0x92)](_0x2b5aba)[_0xabd59a(0x8d)]());});const _0x39307e=fns['eachDayOfInterval']({'start':new Date(_0x5f31c8[_0x28d75b(0x12b)]),'end':new Date()})[_0x28d75b(0xa0)](_0x19eb13=>fns[_0x28d75b(0xc9)](_0x19eb13,_0x28d75b(0xb9)));let _0x16b9c5=[];_0x5f31c8['portfolio']['forEach'](_0x245d0a=>{const _0x5aab2a=_0x28d75b;if(!_0x245d0a[_0x5aab2a(0xf3)]){_0x16b9c5[_0x245d0a[_0x5aab2a(0x18a)]]=[];let _0xa4ead7=_0x245d0a[_0x5aab2a(0xdc)];_0x39307e[_0x5aab2a(0xda)]((_0x1e692e,_0x2207dd)=>{const _0x46e26a=_0x5aab2a;let _0x1a4364=_0x499f94[_0x46e26a(0x149)](_0x2e6ab1=>_0x2e6ab1[_0x46e26a(0x18a)]==_0x245d0a[_0x46e26a(0x18a)]&&_0x2e6ab1[_0x46e26a(0xcf)]==_0x1e692e);if(_0x1a4364[_0x46e26a(0xd0)]!=0x0){let _0x20fd9e=_0x1a4364[_0x46e26a(0x13f)]((_0x10a208,_0x2812c1)=>{const _0x1a1139=_0x46e26a;return _0x10a208+=_0x2812c1[_0x1a1139(0x164)],_0x10a208;},0x0);_0xa4ead7+=_0x20fd9e;}_0x16b9c5[_0x245d0a[_0x46e26a(0x18a)]][_0x1e692e]=_0xa4ead7;});}});const _0x202767=[..._0x405616];_0x202767[_0x28d75b(0x92)]({'coin':stablecoins[_0x28d75b(0x17f)]['coin'],'symbol':stablecoins[_0x28d75b(0x17f)][_0x28d75b(0xc6)]}),_0x202767[_0x28d75b(0x92)]({'coin':stablecoins[_0x28d75b(0xbe)][_0x28d75b(0x18a)],'symbol':stablecoins[_0x28d75b(0xbe)]['symbol']});let _0x36d46f=[];for(const _0xe7cc3 of _0x202767){_0x36d46f[_0xe7cc3[_0x28d75b(0x18a)]]=await getCloses(_0xe7cc3['symbol'],new Date(_0x5f31c8[_0x28d75b(0x12b)]));}dbPerformance[_0x28d75b(0x133)](_0x28d75b(0xc0))['remove']()['write'](),_0x39307e[_0x28d75b(0xda)]((_0x10257e,_0x2da891)=>{const _0x1bf876=_0x28d75b;let _0x5e5cf1,_0x4c857=[];_0x2da891==0x0?(_0x5f31c8['portfolio']['forEach'](_0x1edba0=>{const _0xcab415=_0x4dd2;!_0x1edba0[_0xcab415(0xf3)]&&_0x4c857['push']({'coin':_0x1edba0[_0xcab415(0x18a)],'number':_0x1edba0['startnumber'],'price':_0x1edba0['startprice']});}),_0x5e5cf1={'date':_0x10257e,'eur':_0x36d46f[stablecoins[_0x1bf876(0x17f)][_0x1bf876(0x18a)]][_0x2da891],'usd':_0x36d46f[stablecoins[_0x1bf876(0xbe)][_0x1bf876(0x18a)]][_0x2da891],'coins':_0x4c857}):(_0x5f31c8[_0x1bf876(0x14e)][_0x1bf876(0xda)](_0x407986=>{const _0x3d397c=_0x1bf876;!_0x407986[_0x3d397c(0xf3)]&&_0x4c857['push']({'coin':_0x407986[_0x3d397c(0x18a)],'number':_0x16b9c5[_0x407986[_0x3d397c(0x18a)]][_0x10257e],'price':_0x407986[_0x3d397c(0x18a)]==config[_0x3d397c(0x16a)]?0x1:_0x36d46f[_0x407986[_0x3d397c(0x18a)]][_0x2da891]});}),_0x5e5cf1={'date':_0x10257e,'eur':_0x36d46f[stablecoins[_0x1bf876(0x17f)]['coin']][_0x2da891],'usd':_0x36d46f[stablecoins['usd'][_0x1bf876(0x18a)]][_0x2da891],'coins':_0x4c857}),dbPerformance[_0x1bf876(0x133)](_0x1bf876(0xc0))[_0x1bf876(0x92)](_0x5e5cf1)[_0x1bf876(0x8d)]();}),emitPerformance(),await resetCoinResults();for(let _0x2c2d6a of _0x499f94){_0x2c2d6a[_0x28d75b(0x18a)]!=config['basecoin']&&await updateCoinResults(_0x2c2d6a);}logHistory(_0x28d75b(0xef),_0x28d75b(0x152));}catch(_0xdaed73){await handleError(_0xdaed73,'recreateHistory()');}}async function getCloses(_0xb737eb,_0x437486,_0x172c36=undefined){const _0x4456b0=_0x3a559c,_0x2a03f0='1d';let _0x5f2330,_0x435401;const _0x3be7ac=fns[_0x4456b0(0xaa)](new Date(),_0x437486)+0x1;try{const _0x7f1aad=exchange[_0x4456b0(0x11c)]()-_0x3be7ac*0x18*0xe10*0x3e8;_0x5f2330=await exchange[_0x4456b0(0xeb)](_0xb737eb,_0x2a03f0,_0x7f1aad,_0x172c36),_0x435401=await exchange[_0x4456b0(0x10b)](_0xb737eb);}catch(_0x3731ad){await handleError(_0x3731ad,_0x4456b0(0xf6));}let _0xb94ce6=ohlcvToCloses(_0x5f2330);return _0xb94ce6[_0x4456b0(0x92)](_0x435401[_0xb737eb][_0x4456b0(0x94)]),_0xb94ce6;}function ohlcvToCloses(_0x3fbcdf){let _0x4bc306=[];return _0x3fbcdf['forEach'](function(_0x5652bc){const _0x4d4e41=_0x4dd2;_0x4bc306[_0x4d4e41(0x92)](_0x5652bc[0x4]);}),_0x4bc306;}function getConfiguration(_0x45cb6e){const _0x3e4cf2=_0x3a559c;let _0x4e4cef=dbConfig[_0x3e4cf2(0x133)](_0x3e4cf2(0xde))[_0x3e4cf2(0x121)]({'botID':_0x45cb6e})['value']();if(_0x4e4cef){let _0xd605e2=![];!_0x4e4cef[_0x3e4cf2(0x11e)]&&(_0x4e4cef={..._0x4e4cef,'exchange':'binance'},_0xd605e2=!![]),!_0x4e4cef['basecoin']&&(_0x4e4cef={..._0x4e4cef,'basecoin':_0x3e4cf2(0x14c)},_0xd605e2=!![]),!_0x4e4cef[_0x3e4cf2(0x182)]&&(_0x4e4cef={..._0x4e4cef,'ordertype':_0x3e4cf2(0x88)},_0xd605e2=!![]),!_0x4e4cef[_0x3e4cf2(0x102)]&&(_0x4e4cef={..._0x4e4cef,'timeout':0x14},_0xd605e2=!![]),!_0x4e4cef[_0x3e4cf2(0xdb)]&&(_0x4e4cef={..._0x4e4cef,'emojibuy':''},_0xd605e2=!![]),!_0x4e4cef[_0x3e4cf2(0x11a)]&&(_0x4e4cef={..._0x4e4cef,'emojisell':''},_0xd605e2=!![]),!_0x4e4cef[_0x3e4cf2(0xe8)]&&(_0x4e4cef={..._0x4e4cef,'showname':![]},_0xd605e2=!![]),_0xd605e2&&(_0x4e4cef={'botID':_0x4e4cef[_0x3e4cf2(0x198)],'exchange':_0x4e4cef['exchange'],'apiKey':_0x4e4cef[_0x3e4cf2(0x127)],'apiSecret':_0x4e4cef['apiSecret'],'basecoin':_0x4e4cef['basecoin'],'botname':_0x4e4cef[_0x3e4cf2(0xd2)],'showname':_0x4e4cef[_0x3e4cf2(0xe8)],'threshold':_0x4e4cef[_0x3e4cf2(0x17a)],'ordertype':_0x4e4cef['ordertype'],'timeout':_0x4e4cef[_0x3e4cf2(0x102)],'startdate':_0x4e4cef[_0x3e4cf2(0x12b)],'recreate':_0x4e4cef['recreate'],'timeshift':_0x4e4cef[_0x3e4cf2(0x19c)],'headless':_0x4e4cef[_0x3e4cf2(0x119)],'cooldown':_0x4e4cef[_0x3e4cf2(0x16c)],'emojibuy':_0x4e4cef['emojibuy'],'emojisell':_0x4e4cef[_0x3e4cf2(0x11a)],'portfolio':_0x4e4cef[_0x3e4cf2(0x14e)]},dbConfig[_0x3e4cf2(0x133)]('bot')[_0x3e4cf2(0x155)]()[_0x3e4cf2(0x8d)](),dbConfig[_0x3e4cf2(0x133)](_0x3e4cf2(0xde))[_0x3e4cf2(0x92)](_0x4e4cef)[_0x3e4cf2(0x8d)]());}else _0x4e4cef={'botID':_0x45cb6e,'exchange':_0x3e4cf2(0xa8),'apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x45cb6e,'showname':![],'threshold':'3','ordertype':_0x3e4cf2(0x88),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3e4cf2(0x19c)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x4e4cef;}function emittedConfiguration(){const _0x8558c2=_0x3a559c;let _0x14a7df;return config['apiKey']==''?_0x14a7df=config:_0x14a7df={...config,'apiKey':_0x8558c2(0xbc),'apiSecret':_0x8558c2(0xbc)},_0x14a7df;}function _0x8d85(){const _0x40e02d=['search','mkdirSync','fetchOHLCV','orderType','secure','binanceus','success','RSA-OAEP','filled','-config.json','excluded','limit-high','page','getCloses()','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','time','WebSockets(','BTCBUSD','side','ccxt','distribution','test','fees','kline','limit','timeout','differenceInSeconds','has','Market','HOT/EUR','asset','configuration-stored','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','fetchTickers','001','breakeven','1074894NmzKPh','1118204LeHAEb','buy','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','loadMarkets','\x20orders\x20in\x20less\x20than\x20','wsMarket','ask','spot','InsufficientFunds','datetime','headless','emojisell','BTCUSDT','milliseconds','2546705WzsczO','exchange','type','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','find','total','event','remainingSymbols','message','exit','apiKey','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','availableBalance','defaults','startdate','toLowerCase','5vxYmtt','version','fetchOrders','coin-loading-progress','Order(s)\x20validated\x20-\x20balancing\x20resumed','function','get','round','assign','Crypt','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','USDC','startprice','getFullYear','\x20hour','apiSecret','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','logs','reduce','error','ticker','executionReport','wsKey','close','190jpvAur','value','restart','1004376hhUEzh','filter','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','limits','BTC','starting-balances','portfolio','-results.json','parseISO','progress','Performance\x20recreation\x20completed\x20successfully','sort',')\x20|\x20Error\x20details:\x20','remove','currency','\x20order:\x20','DDoSProtection','Order:\x20','performance','yyyy/MM/dd\x20HH:mm:ss','getHours','-performance.json','toString','eventType','EUR','LIMIT','orderStatus','AuthenticationError','coinamount','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','split','10964ozqcet','194696Bbqzjc','abs','basecoin','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','cooldown','-events.json','accumulatedQuantity','parse','placeOrder','fee','replace','userData','orderId','bot-','cancelOrder()','Executed\x20','initclient','BTC/USDT','threshold','args','emitHistory','wss://stream.binance.com:9443','indexOf','eur','closeWs','configuration','ordertype','hybrid-crypto-js','storeHeadless','63tFKIyM','HOT/BTC','delta','cost','FILLED','coin','splice','argv','API-key\x20format\x20invalid','min','subscribeSpotKline','existsSync','offset','RequestTimeout','amount','getCoins()','Limit\x20(high-margin)','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','lowdb/adapters/FileSync','botID','privateKey','getFiat()','Order\x20amount\x20is\x20invalid:\x20','timeshift','toFixed','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','getMinutes','market','USDT','initws()','yyyy-MM-dd\x27T\x27HH:mm:ss','balances','write','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','reconnected','DAI/','padStart','push','Pausing\x20bot\x20for\x205\x20minutes\x20(','last',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','send','stringify','getDate','event-history','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','MIN_NOTIONAL','getPortfolio()','lowdb','coins','sortBy','map','running','BUSD','subscribeSpotUserDataStream','sha256','getStartingBalances','(((.+)+)+)+$','createOrder','binance','recreate','differenceInCalendarDays','Order\x20filled:\x20','price','trade','symbols','kill','target','sell','Error:\x20Invalid\x20argument\x20','fromCodePoint','\x20minutes\x20-\x20balancing\x20resumed','constructor','reverse','entries','apply','yyyy/MM/dd','14113fAMGOG','BNB','************','outboundAccountPosition','usd','formattedMessage','data','bb-settings.json','buys','getMonth','decrypt','BTC/BUSD','symbol','loadSymbols()','limit-low','format','enabled','valid','number','isArray','getTime','date','length','add','botname','realized','./config/','./version.json',':\x20Bot\x20','Binance\x20API\x20key\x20is\x20invalid','keys','Limit\x20(low-margin)','forEach','emojibuy','startnumber','bid','bot','timestamp','bb-secure.json','includes','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','sells','slice','51qPKXTY','log','getSeconds','showname'];_0x8d85=function(){return _0x40e02d;};return _0x8d85();}function getSettings(){const _0x31b1a9=_0x3a559c;return dbSettings[_0x31b1a9(0x133)]('settings')[_0x31b1a9(0x146)]();}function getSecure(){const _0xd8e2dd=_0x3a559c;return dbSecure[_0xd8e2dd(0x133)](_0xd8e2dd(0xed))[_0xd8e2dd(0x146)]()||{};}function updateTimeshift(_0x376962){const _0x40837d=_0x3a559c;let _0xc3b59d=dbConfig[_0x40837d(0x133)](_0x40837d(0xde))[_0x40837d(0x121)]({'botID':botID})[_0x40837d(0x146)]();_0xc3b59d&&dbConfig['get']('bot')['find']({'botID':botID})[_0x40837d(0x135)]({'timeshift':_0x376962})[_0x40837d(0x8d)](),config[_0x40837d(0x19c)]=_0x376962,proxyEmit(_0x40837d(0x181),emittedConfiguration());}async function storeConfiguration(_0x28c271){const _0x373da5=_0x3a559c;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x24229c=dbConfig['get'](_0x373da5(0xde))['find']({'botID':botID})[_0x373da5(0x146)]();_0x28c271={..._0x28c271,'apiKey':crypt[_0x373da5(0xc4)](secure['privateKey'],_0x28c271[_0x373da5(0x127)])[_0x373da5(0x125)],'apiSecret':crypt[_0x373da5(0xc4)](secure[_0x373da5(0x199)],_0x28c271[_0x373da5(0x13c)])[_0x373da5(0x125)]};if(_0x24229c){if(_0x28c271[_0x373da5(0x127)]=='************')_0x28c271[_0x373da5(0x127)]=config[_0x373da5(0x127)];if(_0x28c271['apiSecret']==_0x373da5(0xbc))_0x28c271[_0x373da5(0x13c)]=config['apiSecret'];dbConfig[_0x373da5(0x133)]('bot')[_0x373da5(0x121)]({'botID':botID})[_0x373da5(0x135)](_0x28c271)[_0x373da5(0x8d)]();}else dbConfig[_0x373da5(0x133)](_0x373da5(0xde))[_0x373da5(0x92)](_0x28c271)[_0x373da5(0x8d)](),process[_0x373da5(0x96)]({'status':_0x373da5(0xca),'live':_0x373da5(0xa1)});config={..._0x28c271};if(config[_0x373da5(0xa9)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x373da5(0x96)]({'botname':_0x28c271[_0x373da5(0xd2)]}),proxyEmit(_0x373da5(0x108)),reset();}async function storeHeadless(_0x2d97be){const _0x889069=_0x3a559c,_0x3f50cc={...config,'headless':_0x2d97be[_0x889069(0x119)]};let _0xaf0b58=dbConfig[_0x889069(0x133)](_0x889069(0xde))[_0x889069(0x121)]({'botID':botID})[_0x889069(0x146)]();_0xaf0b58&&dbConfig[_0x889069(0x133)]('bot')['find']({'botID':botID})['assign'](_0x3f50cc)[_0x889069(0x8d)](),config={..._0x3f50cc},proxyEmit(_0x889069(0x181),emittedConfiguration());}function noslash(_0x15c01d){const _0x1fd6ed=_0x3a559c;return _0x15c01d[_0x1fd6ed(0x172)]('/','');}function updateNumberCoins(_0x3b4f30){const _0x4b9865=_0x3a559c;_0x3b4f30[_0x4b9865(0x15f)]&&_0x3b4f30[_0x4b9865(0x15f)]==_0x4b9865(0xbd)&&_0x3b4f30[_0x4b9865(0x8c)][_0x4b9865(0xda)](_0x3b38d5=>{const _0x3cff7b=_0x4b9865;let _0x29d5cf=currentCoins['find'](_0x4a12e4=>_0x4a12e4[_0x3cff7b(0x18a)]==_0x3b38d5[_0x3cff7b(0x107)]),_0x25fed6=config[_0x3cff7b(0x14e)][_0x3cff7b(0x121)](_0x26731d=>_0x26731d[_0x3cff7b(0x18a)]==_0x3b38d5['asset']);if(_0x29d5cf&&_0x25fed6)_0x29d5cf[_0x3cff7b(0xcc)]=Number(_0x3b38d5[_0x3cff7b(0x129)])+(_0x25fed6[_0x3cff7b(0x191)]||0x0);});if(_0x3b4f30[_0x4b9865(0x15f)]&&_0x3b4f30[_0x4b9865(0x15f)]==_0x4b9865(0x142)){if(_0x3b4f30[_0x4b9865(0xec)]==_0x4b9865(0x161)&&_0x3b4f30[_0x4b9865(0x162)]==_0x4b9865(0x189)){if(lastOrders)lastOrders['forEach'](_0x32c534=>{const _0x481531=_0x4b9865;if(_0x32c534['orderId']==_0x3b4f30[_0x481531(0x174)]){if(_0x32c534[_0x481531(0xb6)])_0x32c534[_0x481531(0xf1)]=_0x3b4f30[_0x481531(0x16e)]*_0x32c534['price'];else _0x32c534[_0x481531(0xf1)]=_0x3b4f30[_0x481531(0x16e)];}});}}}async function getCoins(_0x368bae=!![],_0x4c6a3a=config[_0x3a559c(0x16a)]){const _0x41d0bc=_0x3a559c;let _0x4aff1a,_0x3ad3cc=[],_0x1cf6e8=[],_0x38b09=[];try{_0x4aff1a=await exchange['fetchBalance'](),mybalances=_0x4aff1a[_0x41d0bc(0x122)];if(!_0x368bae)for(const [_0x268bdb,_0x19692a]of Object['entries'](mybalances)){_0x38b09['push'](_0x268bdb);}else config[_0x41d0bc(0x14e)]['forEach'](_0x557bac=>{const _0x573c01=_0x41d0bc;if(!_0x557bac[_0x573c01(0xf3)])_0x38b09[_0x573c01(0x92)](_0x557bac['coin']);});if(_0x4c6a3a=='')for(const [_0x379fee,_0x472864]of Object[_0x41d0bc(0xb7)](mybalances)){_0x472864[_0x41d0bc(0x15e)]()!=0x0&&_0x1cf6e8[_0x41d0bc(0x92)]({'coin':_0x379fee});}else for(const [_0x10cf04,_0x550756]of Object[_0x41d0bc(0xb7)](mybalances)){if(_0x38b09[_0x41d0bc(0xe1)](_0x10cf04)){const _0x382d80=config[_0x41d0bc(0x14e)]['find'](_0x38f874=>_0x38f874['coin']==_0x10cf04);if((_0x550756[_0x41d0bc(0x15e)]()!=0x0||_0x382d80)&&(allSymbols['includes'](_0x10cf04+'/'+_0x4c6a3a)||_0x10cf04==_0x4c6a3a))_0x1cf6e8['push']({'coin':_0x10cf04,'symbol':_0x10cf04+'/'+_0x4c6a3a,'reverse':![],'number':_0x550756+(_0x382d80&&_0x382d80['offset']||0x0)}),_0x10cf04!=_0x4c6a3a&&_0x3ad3cc['push'](_0x10cf04+'/'+_0x4c6a3a);else(_0x550756['toString']()!=0x0||_0x382d80)&&allSymbols[_0x41d0bc(0xe1)](_0x4c6a3a+'/'+_0x10cf04)&&(_0x1cf6e8[_0x41d0bc(0x92)]({'coin':_0x10cf04,'symbol':_0x4c6a3a+'/'+_0x10cf04,'reverse':!![],'number':_0x550756+(_0x382d80&&_0x382d80[_0x41d0bc(0x191)]||0x0)}),_0x10cf04!=_0x4c6a3a&&_0x3ad3cc['push'](_0x4c6a3a+'/'+_0x10cf04));}}}catch(_0x34a4b8){if(!_0x368bae){if(_0x34a4b8[_0x41d0bc(0x15e)]()[_0x41d0bc(0xe1)](_0x41d0bc(0x18d)))return logHistory(_0x41d0bc(0x140),_0x41d0bc(0xd7)),![];else{if(_0x34a4b8[_0x41d0bc(0x15e)]()[_0x41d0bc(0xe1)](_0x41d0bc(0x163)))return logHistory(_0x41d0bc(0x140),_0x41d0bc(0x86)),![];else{if(_0x34a4b8[_0x41d0bc(0x15e)]()[_0x41d0bc(0xe1)](_0x41d0bc(0x165)))return logHistory('error','Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x34a4b8,_0x41d0bc(0x194));}}}else await handleError(_0x34a4b8,_0x41d0bc(0x194));}return _0x1cf6e8;}async function getPortfolio(_0x17a548){const _0x9e44c4=_0x3a559c;let _0x38f24e=[],_0x5b1fb2=[],_0x400d90,_0x5471c2=[],_0x105006,_0x3fc990;_0x17a548[_0x9e44c4(0x127)]===_0x9e44c4(0xbc)||_0x17a548[_0x9e44c4(0x13c)]===_0x9e44c4(0xbc)?(_0x105006=config['apiKey'],_0x3fc990=config[_0x9e44c4(0x13c)]):(_0x105006=_0x17a548[_0x9e44c4(0x127)],_0x3fc990=_0x17a548['apiSecret']);await initExchange(_0x105006,_0x3fc990);let _0x45aef3=await loadSymbols();if(_0x45aef3){_0x5471c2=await getCoins(![],_0x17a548['basecoin']);if(_0x5471c2===![])proxyEmit(_0x9e44c4(0x14e),![]);else{if(_0x17a548['basecoin']=='')proxyEmit(_0x9e44c4(0x14e),_0x5471c2);else{_0x5471c2[_0x9e44c4(0xda)](_0xd5748f=>{const _0x4f0a6f=_0x9e44c4;_0x38f24e['push'](_0xd5748f[_0x4f0a6f(0xc6)]);});try{_0x5b1fb2=await exchange[_0x9e44c4(0x10b)](_0x38f24e);}catch(_0xeefdf0){await handleError(_0xeefdf0,_0x9e44c4(0x9c));}_0x5471c2[_0x9e44c4(0xda)](_0x259330=>{const _0x300f5b=_0x9e44c4;_0x259330[_0x300f5b(0x18a)]!=_0x17a548[_0x300f5b(0x16a)]?_0x400d90=_0x259330[_0x300f5b(0xb6)]?0x1/_0x5b1fb2[_0x259330[_0x300f5b(0xc6)]][_0x300f5b(0x94)]:_0x5b1fb2[_0x259330[_0x300f5b(0xc6)]][_0x300f5b(0x94)]:_0x400d90=0x1,_0x259330[_0x300f5b(0xac)]=formatResult(_0x400d90,0x8);}),proxyEmit(_0x9e44c4(0x14e),_0x5471c2);}}}else proxyEmit(_0x9e44c4(0x14e),![]);}function checkMinimums(_0x2353ff){const _0x2f5186=_0x3a559c;let _0x24771c=!![];const _0x4eede2=!_0x2353ff[_0x2f5186(0xb6)]?markets[_0x2353ff[_0x2f5186(0xc6)]][_0x2f5186(0x14b)][_0x2f5186(0x193)]['min']:markets[_0x2353ff[_0x2f5186(0xc6)]][_0x2f5186(0x14b)][_0x2f5186(0x188)]['min'],_0x1f84fb=!_0x2353ff[_0x2f5186(0xb6)]?markets[_0x2353ff[_0x2f5186(0xc6)]][_0x2f5186(0x14b)][_0x2f5186(0x188)][_0x2f5186(0x18e)]:markets[_0x2353ff[_0x2f5186(0xc6)]][_0x2f5186(0x14b)]['amount'][_0x2f5186(0x18e)];if(Math[_0x2f5186(0x169)](_0x2353ff[_0x2f5186(0xad)])<_0x4eede2)_0x24771c=![];if(Math[_0x2f5186(0x169)](_0x2353ff[_0x2f5186(0xad)])*_0x2353ff[_0x2f5186(0x94)]<_0x1f84fb)_0x24771c=![];return _0x24771c;}async function getBalances(){const _0x41fa45=_0x3a559c;let _0x414164=0x0,_0xe4132;const _0x5d9731=config[_0x41fa45(0x17a)];currentCoins[_0x41fa45(0xda)](_0x2a52a5=>{const _0x3dd431=_0x41fa45;if(_0x2a52a5[_0x3dd431(0x18a)]!=config[_0x3dd431(0x16a)]){let _0x6fd0c2=global[_0x3dd431(0x141)][noslash(_0x2a52a5['symbol'])];_0xe4132=_0x2a52a5[_0x3dd431(0xb6)]?0x1/_0x6fd0c2:_0x6fd0c2;}else _0xe4132=0x1;let _0x5bcfcb=_0x2a52a5[_0x3dd431(0xcc)]*_0xe4132;_0x414164+=_0x5bcfcb,_0x2a52a5[_0x3dd431(0x94)]=formatResult(Number(_0xe4132),0x8),_0x2a52a5['value']=_0x5bcfcb;}),currentCoins['forEach'](_0x4f4ad6=>{const _0x4a7b75=_0x41fa45;let _0x3c1e93=config[_0x4a7b75(0x14e)][_0x4a7b75(0x121)](_0x1973a7=>_0x1973a7[_0x4a7b75(0x18a)]==_0x4f4ad6[_0x4a7b75(0x18a)]),_0xc7dbe=Number(_0x3c1e93[_0x4a7b75(0xfd)]),_0x1d19b1=_0x4f4ad6['value']/_0x414164*0x64,_0x1d5989=_0xc7dbe*_0x414164/0x64/_0x4f4ad6[_0x4a7b75(0x94)]-_0x4f4ad6['number'];_0x4f4ad6[_0x4a7b75(0xfd)]=formatResult(_0x1d19b1,0x3),_0x4f4ad6[_0x4a7b75(0xb0)]=formatResult(_0xc7dbe,0x3),_0x4f4ad6[_0x4a7b75(0xad)]=formatResult(_0x1d5989,0x8),_0x4f4ad6[_0x4a7b75(0xfb)]='',_0x4f4ad6[_0x4a7b75(0xcb)]='';if(_0x4f4ad6[_0x4a7b75(0x18a)]!=config['basecoin']){if(_0x4f4ad6[_0x4a7b75(0xfd)]>_0xc7dbe)_0x4f4ad6['side']='sell',_0x4f4ad6['valid']=checkMinimums(_0x4f4ad6);else _0x4f4ad6[_0x4a7b75(0xfd)]<_0xc7dbe&&(_0x4f4ad6[_0x4a7b75(0xfb)]='buy',_0x4f4ad6[_0x4a7b75(0xcb)]=checkMinimums(_0x4f4ad6));}_0x4f4ad6[_0x4a7b75(0x187)]=_0x4f4ad6[_0x4a7b75(0xfd)]/_0x4f4ad6[_0x4a7b75(0xb0)]-0x1;}),currentCoins[_0x41fa45(0x153)]((_0xc4c527,_0x21005f)=>_0xc4c527[_0x41fa45(0x187)]<_0x21005f[_0x41fa45(0x187)]?0x1:_0x21005f[_0x41fa45(0x187)]<_0xc4c527['delta']?-0x1:0x0);const _0x18b6a4=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x18b6a4[_0x41fa45(0x17f)],'usd':_0x18b6a4[_0x41fa45(0xbe)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x5d9731},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config[_0x41fa45(0x119)])headlessMode({'portfolio':currentCoins,'threshold':_0x5d9731});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x234273=_0x3a559c;if(!lastBalances)return;let _0x3ae62b=await getStartingBalances(![]),_0x1272c2=[],_0x5d8184;JSON[_0x234273(0x16f)](lastBalances[_0x234273(0x14e)])[_0x234273(0xda)](_0x447949=>{const _0x23557b=_0x234273;let _0x5a9852={'coin':_0x447949[_0x23557b(0x18a)],'number':_0x447949['number'],'price':_0x447949['last']};_0x1272c2[_0x23557b(0x92)](_0x5a9852);});const _0x3f4415=await getFiat();_0x5d8184={'date':lastBalances[_0x234273(0xf8)][_0x234273(0x166)]('\x20')[0x0],'eur':_0x3f4415[_0x234273(0x17f)],'usd':_0x3f4415[_0x234273(0xbe)],'coins':_0x1272c2};let _0x3803de=dbPerformance[_0x234273(0x133)]('data')[_0x234273(0x121)]({'date':_0x5d8184[_0x234273(0xcf)]})[_0x234273(0x146)]();_0x3803de?dbPerformance['get'](_0x234273(0xc0))['find']({'date':_0x5d8184[_0x234273(0xcf)]})['assign'](_0x5d8184)[_0x234273(0x8d)]():dbPerformance[_0x234273(0x133)](_0x234273(0xc0))['push'](_0x5d8184)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x4d83b0=_0x3a559c;if(dbPerformance['has'](_0x4d83b0(0xc0))[_0x4d83b0(0x146)]()){let _0x46d709=dbPerformance[_0x4d83b0(0x133)]('data')[_0x4d83b0(0x9f)]('date')[_0x4d83b0(0x146)]();proxyEmit('performance',_0x46d709),lastPerformanceEmitted=getDate();}else proxyEmit(_0x4d83b0(0x15a),[]);}async function getStartingBalances(_0x1b7974=!![]){const _0x3f612d=_0x3a559c;let _0x3163dc=dbPerformance[_0x3f612d(0x133)](_0x3f612d(0xc0))[_0x3f612d(0x121)]({'date':config['startdate']})[_0x3f612d(0x146)]();config[_0x3f612d(0x127)]!=''&&!_0x3163dc&&(await setStartDatePerformance(config),_0x3163dc=dbPerformance[_0x3f612d(0x133)](_0x3f612d(0xc0))[_0x3f612d(0x121)]({'date':config['startdate']})[_0x3f612d(0x146)]());if(config[_0x3f612d(0x127)]==''||!_0x3163dc)return{};let _0x2c3392=0x0,_0x373231=0x0,_0x3f9652=0x0,_0x34f16d=[],_0x2c1ce1=0x0;config[_0x3f612d(0x14e)][_0x3f612d(0xda)](_0x29ac52=>{const _0x16593b=_0x3f612d;if(!_0x29ac52['excluded']){_0x34f16d[_0x2c1ce1]={'coin':_0x29ac52['coin'],'symbol':_0x29ac52[_0x16593b(0xc6)],'number':_0x29ac52['startnumber'],'price':_0x29ac52[_0x16593b(0x139)]},_0x2c3392+=_0x29ac52[_0x16593b(0x139)]*_0x29ac52['startnumber'];if(config[_0x16593b(0x16a)]==_0x16593b(0x14c))_0x373231+=_0x29ac52[_0x16593b(0x139)]*_0x29ac52[_0x16593b(0xdc)]*_0x3163dc['eur'],_0x3f9652+=_0x29ac52['startprice']*_0x29ac52[_0x16593b(0xdc)]*_0x3163dc[_0x16593b(0xbe)];else{if(config['basecoin']==_0x16593b(0xa2)||config[_0x16593b(0x16a)]==_0x16593b(0x89)||config[_0x16593b(0x16a)]==_0x16593b(0x138))_0x373231+=_0x29ac52['startprice']*_0x29ac52['startnumber']*_0x3163dc[_0x16593b(0x17f)]/_0x3163dc[_0x16593b(0xbe)],_0x3f9652+=_0x29ac52[_0x16593b(0x139)]*_0x29ac52[_0x16593b(0xdc)];else config[_0x16593b(0x16a)]==_0x16593b(0x160)&&(_0x373231+=_0x29ac52['startprice']*_0x29ac52[_0x16593b(0xdc)],_0x3f9652+=_0x29ac52[_0x16593b(0x139)]*_0x29ac52[_0x16593b(0xdc)]*_0x3163dc[_0x16593b(0xbe)]/_0x3163dc[_0x16593b(0x17f)]);}_0x2c1ce1++;}});let _0x39249a={'basecoin':_0x2c3392,'eur':_0x373231,'usd':_0x3f9652,'coins':_0x34f16d};if(_0x1b7974)proxyEmit(_0x3f612d(0x14d),_0x39249a);return _0x39249a;}function headlessMode(_0x3d4d2e){const _0x288582=_0x3a559c;let _0x55212d=_0x3d4d2e['portfolio'],_0x49e9f4=_0x3d4d2e[_0x288582(0x17a)],_0x4c57eb=[];for(let _0x237a00 of _0x55212d){if(_0x237a00[_0x288582(0x18a)]!=config[_0x288582(0x16a)]){if(_0x237a00['distribution']/_0x237a00[_0x288582(0xb0)]-0x1>=_0x49e9f4/0x64){if(_0x237a00['valid'])_0x4c57eb[_0x288582(0x92)](_0x237a00);}else{if(_0x237a00['distribution']/_0x237a00['target']-0x1<=-_0x49e9f4/0x64){if(_0x237a00[_0x288582(0xcb)])_0x4c57eb[_0x288582(0x92)](_0x237a00);}}}}_0x4c57eb[_0x288582(0xd0)]>0x0&&placeOrder(_0x4c57eb);}function symbolToCoin(_0x5824d5){const _0x44a1eb=_0x3a559c;let _0x367c01;if(_0x5824d5['includes']('/'+config[_0x44a1eb(0x16a)]))_0x367c01=_0x5824d5[_0x44a1eb(0x172)]('/'+config[_0x44a1eb(0x16a)],'');if(_0x5824d5[_0x44a1eb(0xe1)](config['basecoin']+'/'))_0x367c01=_0x5824d5['replace'](config[_0x44a1eb(0x16a)]+'/','');return _0x367c01;}async function validateOrders(_0x2e99f6=0x0){const _0x3b9fa0=_0x3a559c;let _0x502dc2=[],_0x4dff4b=config[_0x3b9fa0(0x182)]==_0x3b9fa0(0x88)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3b9fa0(0x102)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x3b9fa0(0xda)](_0x58ca4d=>{const _0x29cc06=_0x3b9fa0;let _0x60c034=previousCoins[_0x29cc06(0x121)](_0x4ab4de=>_0x4ab4de['coin']==symbolToCoin(_0x58ca4d['symbol'])),_0x59e883=currentCoins[_0x29cc06(0x121)](_0x28b5a3=>_0x28b5a3[_0x29cc06(0x18a)]==symbolToCoin(_0x58ca4d[_0x29cc06(0xc6)])),_0x5ed572,_0x5f342c;_0x58ca4d[_0x29cc06(0xfb)]==_0x29cc06(0x110)&&!_0x58ca4d[_0x29cc06(0xb6)]||_0x58ca4d[_0x29cc06(0xfb)]==_0x29cc06(0xb1)&&_0x58ca4d[_0x29cc06(0xb6)]?(_0x5ed572=_0x60c034['number']+0.9*_0x58ca4d[_0x29cc06(0xf1)],_0x5f342c=_0x60c034[_0x29cc06(0xcc)]+1.1*_0x58ca4d[_0x29cc06(0xf1)]):(_0x5ed572=_0x60c034[_0x29cc06(0xcc)]-1.1*_0x58ca4d['filled'],_0x5f342c=_0x60c034[_0x29cc06(0xcc)]-0.9*_0x58ca4d['filled']);const _0x295e2c=_0x58ca4d[_0x29cc06(0xf1)]!=0x0&&_0x59e883['number']>=_0x5ed572&&_0x59e883[_0x29cc06(0xcc)]<=_0x5f342c;_0x502dc2[_0x29cc06(0x92)](_0x295e2c);if(_0x295e2c&&config[_0x29cc06(0x182)]!=_0x29cc06(0x88)){if(_0x58ca4d[_0x29cc06(0xb6)])logHistory('order','Order\x20filled:\x20'+_0x58ca4d['symbol']+'\x20'+_0x58ca4d[_0x29cc06(0xfb)]+'\x20#'+formatResult(_0x58ca4d[_0x29cc06(0xf1)]/_0x58ca4d['price'],0x8)+'\x20@'+formatResult(_0x58ca4d[_0x29cc06(0xac)],0x8));else logHistory('order',_0x29cc06(0xab)+_0x58ca4d['symbol']+'\x20'+_0x58ca4d[_0x29cc06(0xfb)]+'\x20#'+formatResult(_0x58ca4d['filled'],0x8)+'\x20@'+formatResult(_0x58ca4d['price'],0x8));}}),_0x502dc2[_0x3b9fa0(0xda)]((_0x4efe2,_0x20cf0e)=>{const _0x45fd29=_0x3b9fa0;if(_0x4efe2)lastOrders[_0x45fd29(0x18b)](_0x20cf0e,0x1);});if(_0x2e99f6<_0x4dff4b&&_0x502dc2[_0x3b9fa0(0xe1)](![])){if(_0x2e99f6==0x0){config[_0x3b9fa0(0x182)]==_0x3b9fa0(0x88)?logHistory(_0x3b9fa0(0x140),_0x3b9fa0(0x109)):logHistory(_0x3b9fa0(0x140),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x2e99f6);},0xa*0x3e8);}else{(_0x2e99f6==0x1||_0x2e99f6==Math[_0x3b9fa0(0x134)](_0x4dff4b/0x2)||_0x2e99f6==_0x4dff4b-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x2e99f6);},validateOrderInterval);}}else{lockOrders=![];if(_0x2e99f6>0x0&&!_0x502dc2[_0x3b9fa0(0xe1)](![]))config[_0x3b9fa0(0x182)]==_0x3b9fa0(0x88)?logHistory(_0x3b9fa0(0xef),_0x3b9fa0(0x131)):logHistory(_0x3b9fa0(0xef),'Order(s)\x20filled\x20-\x20balancing\x20resumed');else _0x2e99f6>0x0&&_0x502dc2[_0x3b9fa0(0xe1)](![])&&(config['ordertype']==_0x3b9fa0(0x88)?logHistory('success','Order(s)\x20not\x20validated\x20after\x20'+Math[_0x3b9fa0(0x134)](_0x4dff4b*validateOrderInterval/0xea60)+_0x3b9fa0(0xb4)):(lastOrders['forEach'](async _0xbec9c7=>{const _0x1053ec=_0x3b9fa0;try{const _0x295583=await exchange['cancelOrder'](_0xbec9c7[_0x1053ec(0x174)],_0xbec9c7[_0x1053ec(0xc6)]);}catch(_0x510977){if(_0x510977[_0x1053ec(0x15e)]()[_0x1053ec(0xe1)]('OrderNotFound')){}else await handleError(_0x510977,_0x1053ec(0x176));}}),logHistory(_0x3b9fa0(0xef),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x3b9fa0(0x134)](_0x4dff4b*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x3aeb69=_0x3a559c;dbCoinResults[_0x3aeb69(0x133)](_0x3aeb69(0x9e))[_0x3aeb69(0x155)]()[_0x3aeb69(0x8d)]();let _0x46aaaa=await getStartingBalances(![]);_0x46aaaa[_0x3aeb69(0x9e)][_0x3aeb69(0xda)](_0x3feb59=>{const _0x333d07=_0x3aeb69,_0x529636=_0x3feb59[_0x333d07(0xc6)][_0x333d07(0xe1)](config[_0x333d07(0x16a)]+'/');if(_0x3feb59[_0x333d07(0x18a)]!=config[_0x333d07(0x16a)]){let _0x4a65e3={'coin':_0x3feb59[_0x333d07(0x18a)],'number':_0x3feb59[_0x333d07(0xcc)],'breakeven':_0x3feb59[_0x333d07(0xac)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x333d07(0x133)](_0x333d07(0x9e))[_0x333d07(0x92)](_0x4a65e3)[_0x333d07(0x8d)]();}});}async function updateCoinResults(_0x5e6491){const _0x4ff4d9=_0x3a559c;let _0x30afbc,_0x3e6784,_0x5171af,_0x17bfab,_0x4abce2,_0x21f986,_0x4aaaaa=dbCoinResults[_0x4ff4d9(0x133)](_0x4ff4d9(0x9e))['find']({'coin':_0x5e6491['coin']})[_0x4ff4d9(0x146)]();if(!_0x4aaaaa)return;if(_0x5e6491[_0x4ff4d9(0x171)]&&_0x5e6491['fee'][_0x4ff4d9(0x156)]==config['basecoin'])_0x30afbc=_0x5e6491['fee'][_0x4ff4d9(0x188)];else{if(_0x5e6491['fee']&&_0x5e6491[_0x4ff4d9(0x171)][_0x4ff4d9(0x156)]=='BNB')_0x30afbc=_0x5e6491[_0x4ff4d9(0x171)][_0x4ff4d9(0x188)]*global['ticker'][_0x4ff4d9(0xbb)+config['basecoin']];else _0x30afbc=0.001*_0x5e6491[_0x4ff4d9(0xf1)];}const _0x99cc57=_0x5e6491[_0x4ff4d9(0xc6)][_0x4ff4d9(0xe1)](config['basecoin']+'/');_0x99cc57&&(_0x21f986={'coin':_0x5e6491[_0x4ff4d9(0x18a)],'symbol':_0x5e6491['symbol'],'filled':_0x5e6491[_0x4ff4d9(0xf1)]*_0x5e6491[_0x4ff4d9(0xac)],'side':_0x5e6491[_0x4ff4d9(0xfb)]==_0x4ff4d9(0xb1)?'buy':'sell','price':0x1/_0x5e6491['price']},_0x5e6491={..._0x21f986});_0x5e6491[_0x4ff4d9(0xfb)]==_0x4ff4d9(0x110)?_0x5171af=(_0x4aaaaa[_0x4ff4d9(0x10d)]*_0x4aaaaa[_0x4ff4d9(0xcc)]+_0x5e6491['price']*_0x5e6491[_0x4ff4d9(0xf1)])/(_0x4aaaaa[_0x4ff4d9(0xcc)]+_0x5e6491[_0x4ff4d9(0xf1)]):_0x5171af=(_0x4aaaaa[_0x4ff4d9(0x10d)]*_0x4aaaaa['number']-_0x5e6491['price']*_0x5e6491[_0x4ff4d9(0xf1)])/(_0x4aaaaa['number']-_0x5e6491[_0x4ff4d9(0xf1)]);_0x5e6491[_0x4ff4d9(0xfb)]==_0x4ff4d9(0x110)?_0x17bfab=_0x4aaaaa['realized']:_0x17bfab=_0x4aaaaa[_0x4ff4d9(0xd3)]+(_0x5e6491[_0x4ff4d9(0xac)]-_0x4aaaaa[_0x4ff4d9(0x10d)])*_0x5e6491[_0x4ff4d9(0xf1)];_0x3e6784=_0x5e6491[_0x4ff4d9(0xfb)]==_0x4ff4d9(0xb1)?_0x4aaaaa[_0x4ff4d9(0xcc)]-_0x5e6491['filled']:_0x4aaaaa[_0x4ff4d9(0xcc)]+_0x5e6491[_0x4ff4d9(0xf1)],_0x4abce2=(_0x5e6491[_0x4ff4d9(0xac)]-_0x5171af)*_0x3e6784;let _0x3c8db7={'coin':_0x5e6491[_0x4ff4d9(0x18a)],'number':_0x3e6784,'breakeven':formatResult(_0x5171af,0x8),'realized':formatResult(_0x17bfab,0x8),'unrealized':formatResult(_0x4abce2,0x8),'fees':formatResult(_0x4aaaaa[_0x4ff4d9(0xff)]+_0x30afbc,0x8),'sells':_0x5e6491[_0x4ff4d9(0xfb)]==_0x4ff4d9(0xb1)?_0x4aaaaa[_0x4ff4d9(0xe3)]+0x1:_0x4aaaaa[_0x4ff4d9(0xe3)],'buys':_0x5e6491['side']=='buy'?_0x4aaaaa[_0x4ff4d9(0xc2)]+0x1:_0x4aaaaa[_0x4ff4d9(0xc2)]};dbCoinResults[_0x4ff4d9(0x133)]('coins')[_0x4ff4d9(0x121)]({'coin':_0x5e6491[_0x4ff4d9(0x18a)]})['assign'](_0x3c8db7)['write']();}async function placeOrder(_0x306f24){const _0x597e0d=_0x3a559c,_0x114506=config[_0x597e0d(0x182)]==_0x597e0d(0x88)?_0x597e0d(0x88):_0x597e0d(0x101);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON[_0x597e0d(0x97)](currentCoins));for(const _0x11f149 of _0x306f24){let _0x399dd4,_0x49b9ee,_0x2c6691,_0x4a2830,_0x3d442f,_0x1e0cab=_0x11f149[_0x597e0d(0xc6)];try{const _0x10bf80=await exchange[_0x597e0d(0x10b)](_0x1e0cab),_0x22b2d9=_0x10bf80[_0x1e0cab];_0x399dd4=_0x22b2d9['last'],_0x49b9ee=_0x22b2d9[_0x597e0d(0xdd)],_0x2c6691=_0x22b2d9[_0x597e0d(0x115)];_0x11f149[_0x597e0d(0xb6)]?(_0x4a2830=_0x11f149[_0x597e0d(0xfb)]==_0x597e0d(0x110)?_0x597e0d(0xb1):_0x597e0d(0x110),_0x3d442f=Math[_0x597e0d(0x169)](_0x11f149['trade'])/_0x399dd4):(_0x4a2830=_0x11f149[_0x597e0d(0xfb)],_0x3d442f=Math['abs'](_0x11f149[_0x597e0d(0xad)]));_0x114506=='limit'&&(config[_0x597e0d(0x182)]==_0x597e0d(0xf4)&&(_0x399dd4=_0x4a2830==_0x597e0d(0x110)?_0x49b9ee:_0x2c6691),config['ordertype']==_0x597e0d(0xc8)&&(_0x399dd4=_0x4a2830==_0x597e0d(0x110)?_0x2c6691:_0x49b9ee));_0x3d442f=formatResult(_0x3d442f,0x8),_0x399dd4=formatResult(_0x399dd4,0x8);const _0x24f8b4=await exchange[_0x597e0d(0xa7)](_0x1e0cab,_0x114506,_0x4a2830,_0x3d442f,_0x399dd4);lastOrders['push']({'orderId':_0x24f8b4['id'],'symbol':_0x1e0cab,'side':_0x4a2830,'reverse':_0x11f149['reverse'],'amount':_0x11f149[_0x597e0d(0xb6)]?_0x24f8b4['amount']*_0x24f8b4[_0x597e0d(0xac)]:_0x24f8b4[_0x597e0d(0x193)],'filled':_0x11f149['reverse']?_0x24f8b4['filled']*_0x24f8b4[_0x597e0d(0xac)]:_0x24f8b4['filled'],'price':_0x24f8b4[_0x597e0d(0xac)]});const _0x751ccd=_0x4a2830=='sell'?config['emojisell']?String[_0x597e0d(0xb3)]('0x'+config['emojisell'])+'\x20':'':config[_0x597e0d(0xdb)]?String[_0x597e0d(0xb3)]('0x'+config[_0x597e0d(0xdb)])+'\x20':'',_0x342f66=_0x114506==_0x597e0d(0x88)?_0x597e0d(0x105):config[_0x597e0d(0x182)]=='limit-high'?_0x597e0d(0x195):_0x597e0d(0xd9);if(_0x114506==_0x597e0d(0x88))logHistory('order',''+_0x751ccd+_0x342f66+_0x597e0d(0x157)+_0x1e0cab+'\x20'+_0x4a2830+'\x20#'+formatResult(_0x24f8b4[_0x597e0d(0xf1)],0x8)+'\x20@'+formatResult(_0x24f8b4['price'],0x8));else logHistory('order',''+_0x751ccd+_0x342f66+_0x597e0d(0x157)+_0x1e0cab+'\x20'+_0x4a2830+'\x20#'+formatResult(_0x24f8b4['amount'],0x8)+'\x20@'+formatResult(_0x24f8b4[_0x597e0d(0xac)],0x8));_0x24f8b4['coin']=_0x11f149['coin'],await updateCoinResults(_0x24f8b4);if(config[_0x597e0d(0x16c)]!=0x0){let _0x2107b0=null;if(cooldownTracker['length']==config[_0x597e0d(0x16c)]-0x1)_0x2107b0=cooldownTracker['shift']();const _0x29458a=getTimeStamp();cooldownTracker['push'](_0x29458a);if(_0x2107b0){const _0x3d171e=fns[_0x597e0d(0x103)](new Date(_0x29458a),new Date(_0x2107b0));_0x3d171e<cooldownInterval&&(logHistory('error',_0x597e0d(0x177)+config[_0x597e0d(0x16c)]+_0x597e0d(0x113)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x597e0d(0x13b)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x4deab1){if(_0x4deab1[_0x597e0d(0x15e)]()['includes'](_0x597e0d(0x9b)))logHistory(_0x597e0d(0x140),_0x597e0d(0x196)+_0x1e0cab);else{if(_0x4deab1[_0x597e0d(0x15e)]()[_0x597e0d(0xe1)]('Invalid\x20quantity'))logHistory('error',_0x597e0d(0x19b)+_0x1e0cab);else await handleError(_0x4deab1,'placeOrder()');}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x597e0d(0x119)]&&(config[_0x597e0d(0x182)]==_0x597e0d(0x88)?logHistory('error',_0x597e0d(0x14a)):logHistory(_0x597e0d(0x140),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled'));else coolingDown&&(!config[_0x597e0d(0x119)]&&logHistory(_0x597e0d(0x140),_0x597e0d(0x128)));}}function logHistory(_0x2fdf4d,_0x3c35db,_0x345478=''){const _0xad408f=_0x3a559c;let _0xb859e3={'time':getTimeStamp(),'type':_0x2fdf4d,'event':_0x3c35db,'botname':config['botname'],'showname':config[_0xad408f(0xe8)]};dbLogs[_0xad408f(0x133)](_0xad408f(0x13e))['push'](_0xb859e3)[_0xad408f(0x8d)]();if(_0x345478=='')_0x345478=_0x3c35db;proxyEmit(_0xad408f(0x123),{'log':_0xb859e3,'summary':_0x345478}),process['send']({'telegram':_0xb859e3}),logging(''+_0xb859e3[_0xad408f(0x123)]);}function emitHistory(_0x3ec3f9={}){const _0x1664c1=_0x3a559c;Object[_0x1664c1(0xd8)](_0x3ec3f9)['length']==0x0&&(_0x3ec3f9={'type':['order',_0x1664c1(0x123)],'event':'','page':0x1});if(_0x3ec3f9[_0x1664c1(0x11f)][_0x1664c1(0xe1)]('event'))_0x3ec3f9[_0x1664c1(0x11f)][_0x1664c1(0x18b)](_0x3ec3f9[_0x1664c1(0x11f)][_0x1664c1(0x17e)](_0x1664c1(0x123)),0x1,_0x1664c1(0x140),_0x1664c1(0xef));if(dbLogs[_0x1664c1(0x104)](_0x1664c1(0x13e))[_0x1664c1(0x146)]()){let _0x411c1d=dbLogs[_0x1664c1(0x133)](_0x1664c1(0x13e))[_0x1664c1(0x149)](_0xc4e871=>{const _0x3823d7=_0x1664c1;if(_0x3ec3f9['type'][_0x3823d7(0xd0)]==0x0)return![];else return _0x3ec3f9[_0x3823d7(0x11f)][_0x3823d7(0xe1)](_0xc4e871[_0x3823d7(0x11f)]);})[_0x1664c1(0x149)](_0x23b096=>{const _0x297cbd=_0x1664c1;if(_0x3ec3f9['event']=='')return!![];else return _0x23b096[_0x297cbd(0x123)][_0x297cbd(0x12c)]()[_0x297cbd(0xe1)](_0x3ec3f9[_0x297cbd(0x123)][_0x297cbd(0x12c)]());})[_0x1664c1(0x9f)](_0x1664c1(0xf8)),_0x19a2d7=_0x411c1d[_0x1664c1(0x146)]()['length'];_0x411c1d=_0x411c1d[_0x1664c1(0xb6)]()[_0x1664c1(0xe4)]((_0x3ec3f9[_0x1664c1(0xf5)]-0x1)*logPageSize,_0x3ec3f9[_0x1664c1(0xf5)]*logPageSize-0x1)[_0x1664c1(0xb6)]()[_0x1664c1(0x146)](),proxyEmit(_0x1664c1(0x99),{'logs':_0x411c1d,'total':_0x19a2d7});}else proxyEmit(_0x1664c1(0x99),{'logs':[],'total':0x0});}async function pauseBot(_0x2290c3){const _0x29d9a4=_0x3a559c,_0x199b46=new Date()[_0x29d9a4(0xce)]();if(!lastBotPause)lastBotPause=new Date()[_0x29d9a4(0xce)](),consecutivePauses=0x1;else{if(_0x199b46-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x29d9a4(0x96)]({'stop':_0x29d9a4(0x147)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x29d9a4(0xce)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x29d9a4(0x140),_0x29d9a4(0x93)+consecutivePauses+')'),await sleep(_0x2290c3),botPaused=![],reset();}}async function handleError(_0x2708d8,_0x1740c6,_0x19db54=''){const _0x3cea7a=_0x3a559c;if(_0x2708d8[_0x3cea7a(0x15e)]()['includes'](_0x3cea7a(0x158)))logHistory(_0x3cea7a(0x140),_0x1740c6+'\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)'),await pauseBot(pauseBotInterval);else{if(_0x2708d8['toString']()[_0x3cea7a(0xe1)]('ExchangeNotAvailable'))logHistory('error',_0x1740c6+_0x3cea7a(0x16b)),await pauseBot(pauseBotInterval);else{if(_0x2708d8['toString']()[_0x3cea7a(0xe1)](_0x3cea7a(0x192)))logHistory(_0x3cea7a(0x140),_0x1740c6+_0x3cea7a(0x111)),await pauseBot(pauseBotInterval);else{if(_0x2708d8[_0x3cea7a(0x15e)]()[_0x3cea7a(0xe1)](_0x3cea7a(0x18d)))logHistory('error',_0x1740c6+_0x3cea7a(0x13d)),logHistory(_0x3cea7a(0x140),_0x3cea7a(0x10a)),process['send']({'stop':_0x3cea7a(0xaf)});else{if(_0x2708d8[_0x3cea7a(0x15e)]()[_0x3cea7a(0xe1)](_0x3cea7a(0x163)))logHistory(_0x3cea7a(0x140),_0x1740c6+_0x3cea7a(0x9a)),logHistory(_0x3cea7a(0x140),_0x3cea7a(0x10a)),process[_0x3cea7a(0x96)]({'stop':_0x3cea7a(0xaf)});else{if(_0x2708d8[_0x3cea7a(0x15e)]()[_0x3cea7a(0xe1)](_0x3cea7a(0x165)))logHistory('error',_0x1740c6+_0x3cea7a(0x120)),logHistory(_0x3cea7a(0x140),_0x3cea7a(0x10a)),process[_0x3cea7a(0x96)]({'stop':_0x3cea7a(0xaf)});else{if(_0x2708d8['toString']()[_0x3cea7a(0xe1)](_0x3cea7a(0xe2)))logHistory(_0x3cea7a(0x140),_0x1740c6+_0x3cea7a(0x8e)),logHistory(_0x3cea7a(0x140),_0x3cea7a(0x10a)),process[_0x3cea7a(0x96)]({'stop':_0x3cea7a(0xaf)});else{if(_0x2708d8[_0x3cea7a(0x15e)]()[_0x3cea7a(0xe1)]('InvalidNonce'))logHistory(_0x3cea7a(0x140),_0x1740c6+_0x3cea7a(0x137)),await pauseBot(pauseBotInterval),process['send']({'stop':_0x3cea7a(0x147)});else _0x2708d8[_0x3cea7a(0x15e)]()[_0x3cea7a(0xe1)](_0x3cea7a(0x117))?logHistory(_0x3cea7a(0x140),_0x1740c6+_0x3cea7a(0xf7)):(logHistory('error',_0x1740c6+'\x20|\x20Unknown\x20error\x20occured'),logging(_0x1740c6+'\x20|\x20Error\x20details:\x20',_0x2708d8),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x1854cd,_0x17e1c2){const _0xb275f5=_0x3a559c;return parseFloat(_0x1854cd[_0xb275f5(0x19d)](_0x17e1c2));}function logging(_0x23b813,_0x5dea59=''){const _0x2feff2=_0x3a559c;if(config['showname'])console[_0x2feff2(0xe6)](getTimeStamp()+':\x20'+config[_0x2feff2(0xd2)]+'\x20>\x20'+_0x23b813,_0x5dea59);else console[_0x2feff2(0xe6)](getTimeStamp()+_0x2feff2(0xd6)+botID+'\x20>\x20'+_0x23b813,_0x5dea59);}function getServerTime(){const _0x190682=_0x3a559c,_0x5234e3=new Date();return _0x5234e3[_0x190682(0x13a)]()+'/'+(_0x5234e3['getMonth']()+0x1)[_0x190682(0x15e)]()[_0x190682(0x91)](0x2,'0')+'/'+_0x5234e3[_0x190682(0x98)]()[_0x190682(0x15e)]()[_0x190682(0x91)](0x2,'0')+'\x20'+_0x5234e3[_0x190682(0x15c)]()[_0x190682(0x15e)]()[_0x190682(0x91)](0x2,'0')+':'+_0x5234e3[_0x190682(0x87)]()['toString']()[_0x190682(0x91)](0x2,'0')+':'+_0x5234e3[_0x190682(0xe7)]()[_0x190682(0x15e)]()[_0x190682(0x91)](0x2,'0');}function getTimeStamp(){const _0x414a10=_0x3a559c,_0x50cbc6=shiftedTime();return _0x50cbc6['getFullYear']()+'/'+(_0x50cbc6[_0x414a10(0xc3)]()+0x1)['toString']()[_0x414a10(0x91)](0x2,'0')+'/'+_0x50cbc6[_0x414a10(0x98)]()[_0x414a10(0x15e)]()['padStart'](0x2,'0')+'\x20'+_0x50cbc6['getHours']()[_0x414a10(0x15e)]()[_0x414a10(0x91)](0x2,'0')+':'+_0x50cbc6[_0x414a10(0x87)]()[_0x414a10(0x15e)]()['padStart'](0x2,'0')+':'+_0x50cbc6[_0x414a10(0xe7)]()[_0x414a10(0x15e)]()[_0x414a10(0x91)](0x2,'0');}function getDate(){const _0x17b77f=_0x3a559c,_0x12a87d=shiftedTime();return _0x12a87d['getFullYear']()+'/'+(_0x12a87d[_0x17b77f(0xc3)]()+0x1)[_0x17b77f(0x15e)]()[_0x17b77f(0x91)](0x2,'0')+'/'+_0x12a87d[_0x17b77f(0x98)]()[_0x17b77f(0x15e)]()[_0x17b77f(0x91)](0x2,'0');}function getHour(){const _0x38bbed=_0x3a559c,_0x1cf4e5=shiftedTime();return _0x1cf4e5[_0x38bbed(0x15c)]()[_0x38bbed(0x15e)]()[_0x38bbed(0x91)](0x2,'0');}function sleep(_0x24e3a2){return new Promise(_0x52da5e=>setTimeout(_0x52da5e,_0x24e3a2));}function shiftedTime(){const _0x132fcf=_0x3a559c,_0x13849c=new Date();let _0x4b62ef=_0x13849c;if(config&&config['timeshift']!==0x0)_0x4b62ef=fns[_0x132fcf(0xd1)](_0x13849c,{'hours':config[_0x132fcf(0x19c)]});return _0x4b62ef;}