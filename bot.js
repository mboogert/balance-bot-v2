const _0x4a8d43=_0x4b88;(function(_0xcae8d9,_0x36ad12){const _0xd72ad5=_0x4b88,_0x5535e5=_0xcae8d9();while(!![]){try{const _0x382e7a=parseInt(_0xd72ad5(0x1e3))/0x1+-parseInt(_0xd72ad5(0x1cc))/0x2+parseInt(_0xd72ad5(0x1e1))/0x3+-parseInt(_0xd72ad5(0x21c))/0x4*(parseInt(_0xd72ad5(0x27f))/0x5)+parseInt(_0xd72ad5(0x22c))/0x6+-parseInt(_0xd72ad5(0x200))/0x7+parseInt(_0xd72ad5(0x1aa))/0x8*(-parseInt(_0xd72ad5(0x216))/0x9);if(_0x382e7a===_0x36ad12)break;else _0x5535e5['push'](_0x5535e5['shift']());}catch(_0x187be8){_0x5535e5['push'](_0x5535e5['shift']());}}}(_0x29a0,0x205ba));const _0x528070=function(){let _0x222544=!![];return function(_0x1b4673,_0x20adfd){const _0x3acfbb=_0x222544?function(){const _0x3b5adf=_0x4b88;if(_0x20adfd){const _0x880e8c=_0x20adfd[_0x3b5adf(0x251)](_0x1b4673,arguments);return _0x20adfd=null,_0x880e8c;}}:function(){};return _0x222544=![],_0x3acfbb;};}(),_0x2238be=_0x528070(this,function(){const _0xbe215f=_0x4b88;return _0x2238be[_0xbe215f(0x1f5)]()['search'](_0xbe215f(0x1f1))[_0xbe215f(0x1f5)]()['constructor'](_0x2238be)[_0xbe215f(0x18c)]('(((.+)+)+)+$');});_0x2238be();'use strict';const ccxt=require(_0x4a8d43(0x206)),low=require(_0x4a8d43(0x1c7)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),{WebsocketClient,DefaultLogger}=require(_0x4a8d43(0x233)),Crypt=require('hybrid-crypto-js')['Crypt'];let exchange,wsClient;global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;function _0x29a0(){const _0x50590b=['153282rdXEPU','realized','72605ytNHNs','error','storeConfiguration','progress','padStart','has','coinamount','getStartingBalances','event','slice','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','eventType','getCoins()','argv','(((.+)+)+)+$','\x20orders\x20in\x20less\x20than\x20','getSeconds','parse','toString','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','yyyy/MM/dd','ticker','timestamp','DDoSProtection','cancelOrder()','amount','eachDayOfInterval','target','forEach','336490zbeiCZ','subscribeSpotKline','getPortfolio()','distribution','milliseconds','HOT/EUR','ccxt','getMinutes','eur','cancelLoading','add','symbol','usd','initclient','BTCUSDT','settings','delta','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','value','RequestTimeout','write','shift','27awLezn','Order(s)\x20not\x20validated\x20after\x20','getMonth','ask','remove','************','4EXwtyx','availableBalance','Invalid\x20quantity','./version.json','bot-','createOrder','filter','buys','number','privateKey','-events.json','entries','bb-secure.json','Binance\x20API\x20key\x20is\x20invalid','Executed\x20','bid','1459242KwTYWZ','USDT','get','assign','subscribeSpotUserDataStream','InvalidNonce','running','binance','excluded','ordertype','bot','currency','last','Market','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','page','abs','emitHistory','getFiat()','logs','map','binanceus','sell','./config/','log','Order\x20filled:\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','args','isArray','getHours','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','botname','trade','type','emojisell','loadSymbols()','wss://stream.binance.us:9443','apply','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','split','ExchangeNotAvailable','\x20>\x20','replace','-config.json','fetchBalance','breakeven','storeHeadless','function','startprice','filled','InsufficientFunds','indexOf','Performance\x20recreation\x20completed\x20successfully','toLowerCase','BNB','outboundAccountPosition','datetime','API-key\x20format\x20invalid','001','\x20order:\x20','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','yyyy-MM-dd\x27T\x27HH:mm:ss','test','fetchOHLCV','length','starting-balances','-results.json','Pausing\x20bot\x20for\x205\x20minutes\x20(','order','getPortfolio','MIN_NOTIONAL','showname','cooldown','limits','apiKey','BTC/BUSD','includes','cost','balances',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available',',\x20must\x20be\x20a\x203\x20digit\x20number','decrypt','USDC','445245WhAPWG','min','threshold','placeOrder','reconnected','\x20-\x20','fetchTickers','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','push','configuration','recreate','sells','stringify','buy','Order\x20amount\x20is\x20invalid:\x20','getFullYear','total',')\x20|\x20Error\x20details:\x20','configuration-stored','defaults','event-history','reverse','BTC','Limit\x20(low-margin)','getCloses()','DAI/','sortBy','HOT/BTC','Order(s)\x20validated\x20-\x20balancing\x20resumed','secure','getTime','BTC/EUR','search','WebSockets(','orderStatus','getDate','coins','orderId','startdate','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','closeWs','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','limit-low','side','AuthenticationError','limit-high','formattedMessage','message','asset','toFixed','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','parseISO','keys','timeshift','data','coin','Binance\x20API\x20secret\x20is\x20invalid','BTCBUSD','\x20minutes\x20-\x20balancing\x20resumed','success','Order(s)\x20filled\x20-\x20balancing\x20resumed','36952wvKiuB','fee','apiSecret','kline','sort','find','close','format','yyyy/MM/dd\x20HH:mm:ss','accumulatedQuantity','Limit\x20(high-margin)','portfolio','coin-loading-progress','time','price','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','date','OrderNotFound','emojibuy',':\x20Bot\x20','differenceInSeconds','fromCodePoint','wss://stream.binance.com:9443','differenceInCalendarDays','kill','startnumber','remainingSymbols','recreateHistory()','spot','lowdb','wsMarket','round','splice','basecoin','166784fEYDRi','valid','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','market','wsKey','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','existsSync','timeout','exit','\x20hour','exchange','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','limit','send','FILLED','sha256','restart','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','performance','\x20|\x20Error\x20details:\x20','headless'];_0x29a0=function(){return _0x50590b;};return _0x29a0();}let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x4a8d43(0x21f))['version'],botID=process[_0x4a8d43(0x1f0)][0x2]||_0x4a8d43(0x266),pattern=/^[0-9]{3}$/;if(!pattern[_0x4a8d43(0x26a)](botID))return console[_0x4a8d43(0x244)]('Error:\x20Invalid\x20argument\x20'+botID+_0x4a8d43(0x27c)),process[_0x4a8d43(0x1d4)](0x1);const userID=process[_0x4a8d43(0x1f0)][0x3]||'',configpath=userID?_0x4a8d43(0x243)+userID+'/':'./config/';!fs[_0x4a8d43(0x1d2)](configpath)&&fs['mkdirSync'](configpath);const configfile=configpath+_0x4a8d43(0x220)+botID+_0x4a8d43(0x257),logfile=configpath+_0x4a8d43(0x220)+botID+_0x4a8d43(0x226),performancefile=configpath+_0x4a8d43(0x220)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x4a8d43(0x26e),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x4a8d43(0x228),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4a8d43(0x292)]({'logs':[]})[_0x4a8d43(0x214)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[]})[_0x4a8d43(0x214)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x4a8d43(0x292)]({'bot':[]})[_0x4a8d43(0x214)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4a8d43(0x292)]({'coins':[]})[_0x4a8d43(0x214)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':'BTCEUR','symbol':_0x4a8d43(0x18b)},'usd':{'coin':_0x4a8d43(0x20e),'symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x237f62)=>{},'debug':(..._0x22c6fa)=>{},'notice':(..._0x38f583)=>{},'info':(..._0x30f871)=>{},'warning':(..._0x11c362)=>{},'error':async function(..._0x26a219){const _0x20c8d3=_0x4a8d43,_0x1647cf=new Date()[_0x20c8d3(0x29d)]();if(!lastErrorShown||_0x1647cf-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x20c8d3(0x29d)](),logHistory('error','WebSockets('+consecutivePauses+_0x20c8d3(0x27b));let _0x4d9a5e='';if(_0x26a219[0x0])_0x4d9a5e+=_0x26a219[0x0];if(_0x26a219[0x1]&&_0x26a219[0x1]['error']&&_0x26a219[0x1][_0x20c8d3(0x1e4)]['message'])_0x4d9a5e+=_0x20c8d3(0x284)+_0x26a219[0x1][_0x20c8d3(0x1e4)][_0x20c8d3(0x19c)];logging(_0x20c8d3(0x18d)+consecutivePauses+_0x20c8d3(0x290),''+_0x4d9a5e),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x4a8d43(0x1db),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x4a8d43(0x1a2)]!=config['timeshift']&&updateTimeshift(settings['timeshift']);process['send']({'started':_0x4a8d43(0x232)}),initializeProcessListeners();function proxyEmit(_0x16a1f6,_0x31c505=null){const _0x521d0f=_0x4a8d43;process[_0x521d0f(0x1d9)]({'function':_0x16a1f6,'args':_0x31c505});}function initializeProcessListeners(){const _0x52075d=_0x4a8d43;process['on'](_0x52075d(0x19c),_0x4affb1=>{const _0x4bbb97=_0x52075d;switch(Object['keys'](_0x4affb1)[0x0]){case _0x4bbb97(0x1a2):_0x4affb1['timeshift']!=undefined&&(settings['timeshift']=_0x4affb1[_0x4bbb97(0x1a2)],updateTimeshift(settings[_0x4bbb97(0x1a2)]));break;case _0x4bbb97(0x25b):switch(_0x4affb1[_0x4bbb97(0x25b)]){case _0x4bbb97(0x20d):initclient();break;case _0x4bbb97(0x23d):emitHistory(_0x4affb1[_0x4bbb97(0x247)]);break;case _0x4bbb97(0x271):getPortfolio(_0x4affb1[_0x4bbb97(0x247)]);break;case _0x4bbb97(0x1e5):storeConfiguration(_0x4affb1[_0x4bbb97(0x247)]);break;case _0x4bbb97(0x25a):storeHeadless(_0x4affb1[_0x4bbb97(0x247)]);break;case _0x4bbb97(0x1ea):getStartingBalances();break;case _0x4bbb97(0x282):placeOrder(_0x4affb1[_0x4bbb97(0x247)]);break;case _0x4bbb97(0x209):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x37d2c6=_0x4a8d43;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x37d2c6(0x276)],config[_0x37d2c6(0x1ac)]);let _0x3d9eeb=await loadSymbols();_0x3d9eeb&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x18c159,_0xf3656c){const _0x3c6363=_0x4a8d43,_0x10751d=ccxt[config[_0x3c6363(0x1d6)]];let _0x49856e;switch(config[_0x3c6363(0x1d6)]){case'binance':_0x49856e='wss://stream.binance.com:9443';break;case _0x3c6363(0x241):_0x49856e=_0x3c6363(0x250);break;default:_0x49856e=_0x3c6363(0x1c0);}exchange=new _0x10751d({'apiKey':_0x18c159,'secret':_0xf3656c,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x18c159,'api_secret':_0xf3656c,'beautify':!![],'wsUrl':_0x49856e},logger),config['exchange']==_0x3c6363(0x241)&&(stablecoins={'eur':{'coin':_0x3c6363(0x1a6),'symbol':_0x3c6363(0x277)},'usd':{'coin':_0x3c6363(0x20e),'symbol':'BTC/USDT'}});}async function loadSymbols(){const _0x342b1f=_0x4a8d43;let _0x515e0e;try{markets=await exchange['loadMarkets']();const _0x45be35=[_0x342b1f(0x298),_0x342b1f(0x29a),_0x342b1f(0x205)];allSymbols=exchange['symbols'][_0x342b1f(0x222)](_0x5dbd87=>{const _0x1a7f05=_0x342b1f;let _0x4e3be5=![];return _0x45be35[_0x1a7f05(0x1ff)](_0x270a5b=>{const _0x258213=_0x1a7f05;if(_0x5dbd87[_0x258213(0x278)](_0x270a5b))_0x4e3be5=!![];}),!_0x4e3be5;}),_0x515e0e=!![];}catch(_0xa905a3){await handleError(_0xa905a3,_0x342b1f(0x24f)),_0x515e0e=![];}return _0x515e0e;}async function initbot(){const _0x1873be=_0x4a8d43;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x4062c7=dbCoinResults[_0x1873be(0x22e)]('coins')[_0x1873be(0x212)]();if(_0x4062c7['length']==0x0)await resetCoinResults();}function _0x4b88(_0x396717,_0x77a144){const _0x4a561f=_0x29a0();return _0x4b88=function(_0x2238be,_0x528070){_0x2238be=_0x2238be-0x18b;let _0x29a0c1=_0x4a561f[_0x2238be];return _0x29a0c1;},_0x4b88(_0x396717,_0x77a144);}async function initclient(){const _0x43f6ea=_0x4a8d43;proxyEmit(_0x43f6ea(0x288),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x43f6ea(0x27a),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x1681bf=_0x4a8d43;wsinitialized=![];ws1&&(ws1['forEach'](_0x5a01c3=>{const _0x385a33=_0x4b88;try{wsClient[_0x385a33(0x194)](_0x5a01c3);}catch(_0x1eca24){}}),ws1=[]);if(ws2){try{wsClient[_0x1681bf(0x194)](ws2);}catch(_0x1280b0){}ws2=null;}}async function initws(){const _0x3cdbba=_0x4a8d43;cleanws();let _0x56aa41=[];currentCoins[_0x3cdbba(0x1ff)](_0x3b5c67=>{const _0x22c940=_0x3cdbba;if(_0x3b5c67[_0x22c940(0x1a4)]!=config[_0x22c940(0x1cb)])_0x56aa41['push'](noslash(_0x3b5c67[_0x22c940(0x20b)]));});if(!_0x56aa41[_0x3cdbba(0x278)](stablecoins[_0x3cdbba(0x208)][_0x3cdbba(0x1a4)]))_0x56aa41[_0x3cdbba(0x287)](stablecoins[_0x3cdbba(0x208)][_0x3cdbba(0x1a4)]);if(!_0x56aa41[_0x3cdbba(0x278)](stablecoins[_0x3cdbba(0x20c)][_0x3cdbba(0x1a4)]))_0x56aa41[_0x3cdbba(0x287)](stablecoins[_0x3cdbba(0x20c)][_0x3cdbba(0x1a4)]);if(!_0x56aa41['includes'](_0x3cdbba(0x262)+config['basecoin']))_0x56aa41['push'](_0x3cdbba(0x262)+config[_0x3cdbba(0x1cb)]);try{_0x56aa41[_0x3cdbba(0x1ff)]((_0x2c1252,_0x2933d7)=>{const _0x5f2b09=_0x3cdbba;ws1[_0x2933d7]=wsClient[_0x5f2b09(0x201)](_0x2c1252,'1m');}),ws2=wsClient[_0x3cdbba(0x230)](),wsClient['on'](_0x3cdbba(0x19b),_0x3e355a=>{const _0x5a5c57=_0x3cdbba;if(!Array[_0x5a5c57(0x248)](_0x3e355a)&&!_0x3e355a[_0x5a5c57(0x1d0)][_0x5a5c57(0x278)]('userData')){if(_0x3e355a[_0x5a5c57(0x1ee)]===_0x5a5c57(0x1ad)){global[_0x5a5c57(0x1f8)][_0x3e355a[_0x5a5c57(0x1ad)][_0x5a5c57(0x20b)]]=_0x3e355a[_0x5a5c57(0x1ad)][_0x5a5c57(0x1b0)];return;}}else{if(!Array[_0x5a5c57(0x248)](_0x3e355a)&&_0x3e355a[_0x5a5c57(0x1d0)][_0x5a5c57(0x278)]('userData')){if(_0x3e355a[_0x5a5c57(0x1c8)][_0x5a5c57(0x278)](_0x5a5c57(0x1c6))){updateNumberCoins(_0x3e355a);return;}}}}),wsClient['on'](_0x3cdbba(0x283),async _0x152272=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x15c523){await handleError(_0x15c523,'initws()');}let _0x504730,_0x2bb6eb=0x0;loading[_0x3cdbba(0x1c4)]=[];let _0x5d9b9a=0x0;currentCoins[_0x3cdbba(0x1ff)](_0x2eafc1=>{const _0x28565b=_0x3cdbba;if(_0x2eafc1[_0x28565b(0x1a4)]!=config[_0x28565b(0x1cb)])loading[_0x28565b(0x1c4)][_0x28565b(0x287)](_0x2eafc1[_0x28565b(0x20b)]);}),loadingCanceled=![];while(_0x504730!=currentCoins[_0x3cdbba(0x26c)]-0x1){_0x504730=0x0,currentCoins[_0x3cdbba(0x1ff)](_0x704fb6=>{const _0x42cc22=_0x3cdbba;_0x704fb6['coin']!=config[_0x42cc22(0x1cb)]&&global[_0x42cc22(0x1f8)][noslash(_0x704fb6['symbol'])]&&(loading[_0x42cc22(0x1c4)]=loading[_0x42cc22(0x1c4)][_0x42cc22(0x222)](_0x9288c1=>_0x9288c1!=_0x704fb6[_0x42cc22(0x20b)]),_0x504730++);}),loading[_0x3cdbba(0x1e6)]=Math['round'](_0x504730/(currentCoins[_0x3cdbba(0x26c)]-0x1)*0x64);_0x5d9b9a>0x1e*0x5&&(loading[_0x3cdbba(0x1d3)]=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x504730!=_0x2bb6eb&&(_0x2bb6eb=_0x504730,emitLoadingProgress()),_0x5d9b9a++,await sleep(0xc8);}if(_0x504730==currentCoins[_0x3cdbba(0x26c)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x43fa1b=_0x4a8d43;proxyEmit(_0x43fa1b(0x1b6),loading);}async function getFiat(){const _0x3eaa1f=_0x4a8d43;let _0x3ef0a7=0x0,_0x144f76=0x0;try{_0x3ef0a7=global['ticker'][stablecoins[_0x3eaa1f(0x208)]['coin']],_0x144f76=global[_0x3eaa1f(0x1f8)][stablecoins[_0x3eaa1f(0x20c)][_0x3eaa1f(0x1a4)]];}catch(_0x39cc0b){await handleError(_0x39cc0b,_0x3eaa1f(0x23e));}return{'eur':Number(_0x3ef0a7),'usd':Number(_0x144f76)};}async function setStartDatePerformance(_0x3579dc){const _0x49bb5d=_0x4a8d43,_0x4fa823=fns[_0x49bb5d(0x1b1)](new Date(_0x3579dc['startdate']),_0x49bb5d(0x1f7));let _0x19bd97=[];_0x19bd97[stablecoins[_0x49bb5d(0x208)][_0x49bb5d(0x1a4)]]=await getCloses(stablecoins[_0x49bb5d(0x208)][_0x49bb5d(0x20b)],new Date(_0x3579dc[_0x49bb5d(0x192)]),0x1),_0x19bd97[stablecoins[_0x49bb5d(0x20c)][_0x49bb5d(0x1a4)]]=await getCloses(stablecoins[_0x49bb5d(0x20c)]['symbol'],new Date(_0x3579dc[_0x49bb5d(0x192)]),0x1);let _0x1f62b7,_0x162f76=[];_0x3579dc[_0x49bb5d(0x1b5)][_0x49bb5d(0x1ff)](_0x29a117=>{const _0x14ed07=_0x49bb5d;!_0x29a117[_0x14ed07(0x234)]&&_0x162f76[_0x14ed07(0x287)]({'coin':_0x29a117[_0x14ed07(0x1a4)],'number':_0x29a117[_0x14ed07(0x1c3)],'price':_0x29a117[_0x14ed07(0x25c)]});}),_0x1f62b7={'date':_0x4fa823,'eur':_0x19bd97[stablecoins[_0x49bb5d(0x208)][_0x49bb5d(0x1a4)]][0x0],'usd':_0x19bd97[stablecoins[_0x49bb5d(0x20c)][_0x49bb5d(0x1a4)]][0x0],'coins':_0x162f76};let _0x3e95fe=dbPerformance[_0x49bb5d(0x22e)]('data')['find']({'date':_0x4fa823})['value']();_0x3e95fe?dbPerformance['get'](_0x49bb5d(0x1a3))[_0x49bb5d(0x1af)]({'date':_0x4fa823})['assign'](_0x1f62b7)['write']():dbPerformance[_0x49bb5d(0x22e)](_0x49bb5d(0x1a3))[_0x49bb5d(0x287)](_0x1f62b7)[_0x49bb5d(0x214)](),_0x3e95fe=dbPerformance[_0x49bb5d(0x22e)]('data')[_0x49bb5d(0x299)](_0x49bb5d(0x1ba))[_0x49bb5d(0x212)](),_0x3e95fe['forEach'](_0x16e706=>{const _0x2d6634=_0x49bb5d;_0x16e706[_0x2d6634(0x1ba)]<_0x4fa823&&dbPerformance[_0x2d6634(0x22e)](_0x2d6634(0x1a3))[_0x2d6634(0x21a)]({'date':_0x16e706[_0x2d6634(0x1ba)]})[_0x2d6634(0x214)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x3abf94){const _0x46765d=_0x4a8d43;let _0x203472,_0x7ffac=[];logHistory(_0x46765d(0x1a8),_0x46765d(0x1dd)),_0x3abf94[_0x46765d(0x1b5)][_0x46765d(0x1ff)](_0x920f66=>{const _0x57b3ff=_0x46765d;if(_0x920f66[_0x57b3ff(0x1a4)]!=config[_0x57b3ff(0x1cb)]&&!_0x920f66[_0x57b3ff(0x234)])_0x7ffac['push']({'coin':_0x920f66[_0x57b3ff(0x1a4)],'symbol':_0x920f66[_0x57b3ff(0x20b)]});});let _0x277012=[];try{const _0x58af73=fns['format'](fns['parseISO'](_0x3abf94[_0x46765d(0x192)]['replace'](/\//g,'-')),_0x46765d(0x269));for(const _0x52eafa of _0x7ffac){if(_0x52eafa[_0x46765d(0x1a4)]!=config['basecoin'])_0x203472=await exchange['fetchOrders'](_0x52eafa['symbol'],Date[_0x46765d(0x1f4)](_0x58af73));_0x203472[_0x46765d(0x1ff)](_0x4c57d1=>{const _0x17eea3=_0x46765d,_0xbcba99=_0x52eafa[_0x17eea3(0x20b)][_0x17eea3(0x278)](config[_0x17eea3(0x1cb)]+'/'),_0x1e54bd=fns[_0x17eea3(0x1b1)](fns['parseISO'](_0x4c57d1[_0x17eea3(0x264)]),_0x17eea3(0x1b2)),_0x274c6f=fns[_0x17eea3(0x1b1)](fns[_0x17eea3(0x1a0)](_0x4c57d1[_0x17eea3(0x264)]),'yyyy/MM/dd');let _0x350ce0;if(_0x4c57d1[_0x17eea3(0x198)]==_0x17eea3(0x28c)&&_0xbcba99==![])_0x350ce0=_0x4c57d1['amount'];if(_0x4c57d1[_0x17eea3(0x198)]=='buy'&&_0xbcba99==!![])_0x350ce0=-_0x4c57d1[_0x17eea3(0x1fc)]*_0x4c57d1['price'];if(_0x4c57d1['side']=='sell'&&_0xbcba99==![])_0x350ce0=-_0x4c57d1[_0x17eea3(0x1fc)];if(_0x4c57d1[_0x17eea3(0x198)]==_0x17eea3(0x242)&&_0xbcba99==!![])_0x350ce0=_0x4c57d1[_0x17eea3(0x1fc)]*_0x4c57d1['price'];_0x277012[_0x17eea3(0x287)]({'timestamp':_0x1e54bd,'date':_0x274c6f,'coin':_0x52eafa[_0x17eea3(0x1a4)],'symbol':_0x52eafa[_0x17eea3(0x20b)],'type':_0x4c57d1[_0x17eea3(0x24d)],'side':_0x4c57d1[_0x17eea3(0x198)],'reverse':_0xbcba99,'amount':formatResult(_0x4c57d1[_0x17eea3(0x25d)],0x8),'filled':formatResult(_0x4c57d1[_0x17eea3(0x25d)],0x8),'coinamount':formatResult(_0x350ce0,0x8),'price':formatResult(_0x4c57d1['price'],0x8)});let _0x2351e3;if(_0x4c57d1[_0x17eea3(0x198)]==_0x17eea3(0x28c)&&_0xbcba99==![])_0x2351e3=-_0x4c57d1[_0x17eea3(0x1fc)]*_0x4c57d1[_0x17eea3(0x1b8)];if(_0x4c57d1[_0x17eea3(0x198)]==_0x17eea3(0x28c)&&_0xbcba99==!![])_0x2351e3=_0x4c57d1['amount'];if(_0x4c57d1['side']=='sell'&&_0xbcba99==![])_0x2351e3=_0x4c57d1[_0x17eea3(0x1fc)]*_0x4c57d1['price'];if(_0x4c57d1[_0x17eea3(0x198)]=='sell'&&_0xbcba99==!![])_0x2351e3=-_0x4c57d1[_0x17eea3(0x1fc)];_0x277012[_0x17eea3(0x287)]({'date':_0x274c6f,'coin':config[_0x17eea3(0x1cb)],'coinamount':formatResult(_0x2351e3,0x8)});});}_0x277012['sort']((_0x3b3a77,_0x381a83)=>_0x3b3a77[_0x46765d(0x1f9)]>_0x381a83[_0x46765d(0x1f9)]?0x1:_0x381a83['timestamp']>_0x3b3a77['timestamp']?-0x1:0x0),dbLogs[_0x46765d(0x22e)](_0x46765d(0x23f))[_0x46765d(0x21a)]()[_0x46765d(0x214)](),_0x277012[_0x46765d(0x1ff)](_0xb79a98=>{const _0xcb2b04=_0x46765d;let _0x198f72;_0xb79a98[_0xcb2b04(0x1a4)]!=config['basecoin']&&(_0x198f72={'time':_0xb79a98['timestamp'],'type':_0xcb2b04(0x270),'event':'Order:\x20'+_0xb79a98[_0xcb2b04(0x20b)]+'\x20'+_0xb79a98[_0xcb2b04(0x198)]+'\x20#'+_0xb79a98[_0xcb2b04(0x1fc)]+'\x20@'+_0xb79a98[_0xcb2b04(0x1b8)]},dbLogs['get'](_0xcb2b04(0x23f))[_0xcb2b04(0x287)](_0x198f72)[_0xcb2b04(0x214)]());});const _0x53e123=fns[_0x46765d(0x1fd)]({'start':new Date(_0x3abf94['startdate']),'end':new Date()})[_0x46765d(0x240)](_0x57253b=>fns[_0x46765d(0x1b1)](_0x57253b,_0x46765d(0x1f7)));let _0x2fda6f=[];_0x3abf94[_0x46765d(0x1b5)][_0x46765d(0x1ff)](_0x80ee33=>{const _0x32add3=_0x46765d;if(!_0x80ee33[_0x32add3(0x234)]){_0x2fda6f[_0x80ee33[_0x32add3(0x1a4)]]=[];let _0x1d7ad3=_0x80ee33[_0x32add3(0x1c3)];_0x53e123[_0x32add3(0x1ff)]((_0x2644da,_0x21e0ab)=>{const _0x5698cf=_0x32add3;let _0x47a065=_0x277012[_0x5698cf(0x222)](_0x324d35=>_0x324d35['coin']==_0x80ee33[_0x5698cf(0x1a4)]&&_0x324d35[_0x5698cf(0x1ba)]==_0x2644da);if(_0x47a065[_0x5698cf(0x26c)]!=0x0){let _0x1cbdda=_0x47a065['reduce']((_0x3202e2,_0xf65f61)=>{const _0x39c54e=_0x5698cf;return _0x3202e2+=_0xf65f61[_0x39c54e(0x1e9)],_0x3202e2;},0x0);_0x1d7ad3+=_0x1cbdda;}_0x2fda6f[_0x80ee33['coin']][_0x2644da]=_0x1d7ad3;});}});const _0xb2fc20=[..._0x7ffac];_0xb2fc20[_0x46765d(0x287)]({'coin':stablecoins[_0x46765d(0x208)][_0x46765d(0x1a4)],'symbol':stablecoins[_0x46765d(0x208)]['symbol']}),_0xb2fc20['push']({'coin':stablecoins[_0x46765d(0x20c)][_0x46765d(0x1a4)],'symbol':stablecoins[_0x46765d(0x20c)]['symbol']});let _0x4b2498=[];for(const _0x865fd6 of _0xb2fc20){_0x4b2498[_0x865fd6[_0x46765d(0x1a4)]]=await getCloses(_0x865fd6[_0x46765d(0x20b)],new Date(_0x3abf94[_0x46765d(0x192)]));}dbPerformance[_0x46765d(0x22e)](_0x46765d(0x1a3))['remove']()['write'](),_0x53e123[_0x46765d(0x1ff)]((_0x18ee88,_0x2de4e0)=>{const _0x39187e=_0x46765d;let _0x59ae4c,_0x232b05=[];_0x2de4e0==0x0?(_0x3abf94[_0x39187e(0x1b5)][_0x39187e(0x1ff)](_0x2db44e=>{const _0x156172=_0x39187e;!_0x2db44e[_0x156172(0x234)]&&_0x232b05[_0x156172(0x287)]({'coin':_0x2db44e[_0x156172(0x1a4)],'number':_0x2db44e['startnumber'],'price':_0x2db44e[_0x156172(0x25c)]});}),_0x59ae4c={'date':_0x18ee88,'eur':_0x4b2498[stablecoins[_0x39187e(0x208)][_0x39187e(0x1a4)]][_0x2de4e0],'usd':_0x4b2498[stablecoins[_0x39187e(0x20c)][_0x39187e(0x1a4)]][_0x2de4e0],'coins':_0x232b05}):(_0x3abf94[_0x39187e(0x1b5)][_0x39187e(0x1ff)](_0x11b2b2=>{const _0x639f3f=_0x39187e;!_0x11b2b2[_0x639f3f(0x234)]&&_0x232b05['push']({'coin':_0x11b2b2['coin'],'number':_0x2fda6f[_0x11b2b2['coin']][_0x18ee88],'price':_0x11b2b2[_0x639f3f(0x1a4)]==config[_0x639f3f(0x1cb)]?0x1:_0x4b2498[_0x11b2b2[_0x639f3f(0x1a4)]][_0x2de4e0]});}),_0x59ae4c={'date':_0x18ee88,'eur':_0x4b2498[stablecoins['eur']['coin']][_0x2de4e0],'usd':_0x4b2498[stablecoins[_0x39187e(0x20c)][_0x39187e(0x1a4)]][_0x2de4e0],'coins':_0x232b05}),dbPerformance[_0x39187e(0x22e)](_0x39187e(0x1a3))[_0x39187e(0x287)](_0x59ae4c)[_0x39187e(0x214)]();}),emitPerformance(),await resetCoinResults();for(let _0x3780f4 of _0x277012){_0x3780f4[_0x46765d(0x1a4)]!=config['basecoin']&&await updateCoinResults(_0x3780f4);}logHistory(_0x46765d(0x1a8),_0x46765d(0x260));}catch(_0x500c7){await handleError(_0x500c7,_0x46765d(0x1c5));}}async function getCloses(_0x38d0eb,_0x44e6b7,_0x1972ad=undefined){const _0x880884=_0x4a8d43,_0x3ceef0='1d';let _0x3dca14,_0x1e41bc;const _0x59da3b=fns[_0x880884(0x1c1)](new Date(),_0x44e6b7)+0x1;try{const _0x2a9bef=exchange[_0x880884(0x204)]()-_0x59da3b*0x18*0xe10*0x3e8;_0x3dca14=await exchange[_0x880884(0x26b)](_0x38d0eb,_0x3ceef0,_0x2a9bef,_0x1972ad),_0x1e41bc=await exchange['fetchTickers'](_0x38d0eb);}catch(_0x4ac9da){await handleError(_0x4ac9da,_0x880884(0x297));}let _0x333cd4=ohlcvToCloses(_0x3dca14);return _0x333cd4[_0x880884(0x287)](_0x1e41bc[_0x38d0eb][_0x880884(0x238)]),_0x333cd4;}function ohlcvToCloses(_0x34552a){let _0xf3dee2=[];return _0x34552a['forEach'](function(_0x485c76){const _0x480372=_0x4b88;_0xf3dee2[_0x480372(0x287)](_0x485c76[0x4]);}),_0xf3dee2;}function getConfiguration(_0x1d793c){const _0x361646=_0x4a8d43;let _0x8bc22a=dbConfig[_0x361646(0x22e)](_0x361646(0x236))[_0x361646(0x1af)]({'botID':_0x1d793c})['value']();if(_0x8bc22a){let _0x30364d=![];!_0x8bc22a[_0x361646(0x1d6)]&&(_0x8bc22a={..._0x8bc22a,'exchange':_0x361646(0x233)},_0x30364d=!![]),!_0x8bc22a[_0x361646(0x1cb)]&&(_0x8bc22a={..._0x8bc22a,'basecoin':_0x361646(0x295)},_0x30364d=!![]),!_0x8bc22a[_0x361646(0x235)]&&(_0x8bc22a={..._0x8bc22a,'ordertype':_0x361646(0x1cf)},_0x30364d=!![]),!_0x8bc22a[_0x361646(0x1d3)]&&(_0x8bc22a={..._0x8bc22a,'timeout':0x14},_0x30364d=!![]),!_0x8bc22a[_0x361646(0x1bc)]&&(_0x8bc22a={..._0x8bc22a,'emojibuy':''},_0x30364d=!![]),!_0x8bc22a[_0x361646(0x24e)]&&(_0x8bc22a={..._0x8bc22a,'emojisell':''},_0x30364d=!![]),!_0x8bc22a[_0x361646(0x273)]&&(_0x8bc22a={..._0x8bc22a,'showname':![]},_0x30364d=!![]),_0x30364d&&(_0x8bc22a={'botID':_0x8bc22a['botID'],'exchange':_0x8bc22a[_0x361646(0x1d6)],'apiKey':_0x8bc22a[_0x361646(0x276)],'apiSecret':_0x8bc22a[_0x361646(0x1ac)],'basecoin':_0x8bc22a[_0x361646(0x1cb)],'botname':_0x8bc22a[_0x361646(0x24b)],'showname':_0x8bc22a[_0x361646(0x273)],'threshold':_0x8bc22a[_0x361646(0x281)],'ordertype':_0x8bc22a[_0x361646(0x235)],'timeout':_0x8bc22a[_0x361646(0x1d3)],'startdate':_0x8bc22a[_0x361646(0x192)],'recreate':_0x8bc22a[_0x361646(0x289)],'timeshift':_0x8bc22a[_0x361646(0x1a2)],'headless':_0x8bc22a[_0x361646(0x1e0)],'cooldown':_0x8bc22a[_0x361646(0x274)],'emojibuy':_0x8bc22a[_0x361646(0x1bc)],'emojisell':_0x8bc22a[_0x361646(0x24e)],'portfolio':_0x8bc22a[_0x361646(0x1b5)]},dbConfig[_0x361646(0x22e)]('bot')['remove']()['write'](),dbConfig[_0x361646(0x22e)](_0x361646(0x236))['push'](_0x8bc22a)[_0x361646(0x214)]());}else _0x8bc22a={'botID':_0x1d793c,'exchange':_0x361646(0x233),'apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x1d793c,'showname':![],'threshold':'3','ordertype':_0x361646(0x1cf),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x361646(0x1a2)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x8bc22a;}function emittedConfiguration(){const _0x141140=_0x4a8d43;let _0x1de226;return config[_0x141140(0x276)]==''?_0x1de226=config:_0x1de226={...config,'apiKey':_0x141140(0x21b),'apiSecret':_0x141140(0x21b)},_0x1de226;}function getSettings(){const _0x534bcf=_0x4a8d43;return dbSettings[_0x534bcf(0x22e)](_0x534bcf(0x20f))[_0x534bcf(0x212)]();}function getSecure(){const _0x241945=_0x4a8d43;return dbSecure[_0x241945(0x22e)](_0x241945(0x29c))[_0x241945(0x212)]()||{};}function updateTimeshift(_0x51ed23){const _0x290e62=_0x4a8d43;let _0x115980=dbConfig[_0x290e62(0x22e)](_0x290e62(0x236))[_0x290e62(0x1af)]({'botID':botID})[_0x290e62(0x212)]();_0x115980&&dbConfig[_0x290e62(0x22e)](_0x290e62(0x236))[_0x290e62(0x1af)]({'botID':botID})['assign']({'timeshift':_0x51ed23})[_0x290e62(0x214)](),config[_0x290e62(0x1a2)]=_0x51ed23,proxyEmit(_0x290e62(0x288),emittedConfiguration());}async function storeConfiguration(_0x32cc3e){const _0x20ad66=_0x4a8d43;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x41fc80=dbConfig['get'](_0x20ad66(0x236))['find']({'botID':botID})['value']();_0x32cc3e={..._0x32cc3e,'apiKey':crypt[_0x20ad66(0x27d)](secure[_0x20ad66(0x225)],_0x32cc3e[_0x20ad66(0x276)])[_0x20ad66(0x19c)],'apiSecret':crypt[_0x20ad66(0x27d)](secure[_0x20ad66(0x225)],_0x32cc3e[_0x20ad66(0x1ac)])['message']};if(_0x41fc80){if(_0x32cc3e[_0x20ad66(0x276)]==_0x20ad66(0x21b))_0x32cc3e['apiKey']=config[_0x20ad66(0x276)];if(_0x32cc3e[_0x20ad66(0x1ac)]==_0x20ad66(0x21b))_0x32cc3e[_0x20ad66(0x1ac)]=config[_0x20ad66(0x1ac)];dbConfig[_0x20ad66(0x22e)](_0x20ad66(0x236))[_0x20ad66(0x1af)]({'botID':botID})[_0x20ad66(0x22f)](_0x32cc3e)[_0x20ad66(0x214)]();}else dbConfig[_0x20ad66(0x22e)](_0x20ad66(0x236))['push'](_0x32cc3e)[_0x20ad66(0x214)](),process[_0x20ad66(0x1d9)]({'status':'enabled','live':_0x20ad66(0x232)});config={..._0x32cc3e};if(config[_0x20ad66(0x289)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x20ad66(0x1d9)]({'botname':_0x32cc3e['botname']}),proxyEmit(_0x20ad66(0x291)),reset();}async function storeHeadless(_0x5affe2){const _0x1448ea=_0x4a8d43,_0x5626bc={...config,'headless':_0x5affe2[_0x1448ea(0x1e0)]};let _0x235fdf=dbConfig[_0x1448ea(0x22e)]('bot')[_0x1448ea(0x1af)]({'botID':botID})[_0x1448ea(0x212)]();_0x235fdf&&dbConfig[_0x1448ea(0x22e)](_0x1448ea(0x236))[_0x1448ea(0x1af)]({'botID':botID})['assign'](_0x5626bc)[_0x1448ea(0x214)](),config={..._0x5626bc},proxyEmit(_0x1448ea(0x288),emittedConfiguration());}function noslash(_0x2f574a){const _0x81c468=_0x4a8d43;return _0x2f574a[_0x81c468(0x256)]('/','');}function updateNumberCoins(_0x365a85){const _0x23cb25=_0x4a8d43;_0x365a85[_0x23cb25(0x1ee)]&&_0x365a85[_0x23cb25(0x1ee)]==_0x23cb25(0x263)&&_0x365a85['balances'][_0x23cb25(0x1ff)](_0x3cd0ca=>{const _0x2fffe9=_0x23cb25;let _0x174a26=currentCoins[_0x2fffe9(0x1af)](_0x26ccc9=>_0x26ccc9[_0x2fffe9(0x1a4)]==_0x3cd0ca[_0x2fffe9(0x19d)]);if(_0x174a26)_0x174a26[_0x2fffe9(0x224)]=Number(_0x3cd0ca[_0x2fffe9(0x21d)]);});if(_0x365a85['eventType']&&_0x365a85[_0x23cb25(0x1ee)]=='executionReport'){if(_0x365a85['orderType']=='LIMIT'&&_0x365a85[_0x23cb25(0x18e)]==_0x23cb25(0x1da)){if(lastOrders)lastOrders['forEach'](_0x3a76c8=>{const _0x311570=_0x23cb25;if(_0x3a76c8[_0x311570(0x191)]==_0x365a85[_0x311570(0x191)]){if(_0x3a76c8[_0x311570(0x294)])_0x3a76c8[_0x311570(0x25d)]=_0x365a85[_0x311570(0x1b3)]*_0x3a76c8['price'];else _0x3a76c8[_0x311570(0x25d)]=_0x365a85[_0x311570(0x1b3)];}});}}}async function getCoins(_0x5cc2d8=!![],_0x5e5b11=config[_0x4a8d43(0x1cb)]){const _0x36b52a=_0x4a8d43;let _0xdca0a4,_0xbbd387=[],_0x3150d7=[],_0x20b79a=[];try{_0xdca0a4=await exchange[_0x36b52a(0x258)](),mybalances=_0xdca0a4[_0x36b52a(0x28f)];if(!_0x5cc2d8)for(const [_0x49a981,_0x3a6869]of Object['entries'](mybalances)){_0x20b79a['push'](_0x49a981);}else config[_0x36b52a(0x1b5)][_0x36b52a(0x1ff)](_0x59f07c=>{const _0x2ab34f=_0x36b52a;if(!_0x59f07c[_0x2ab34f(0x234)])_0x20b79a[_0x2ab34f(0x287)](_0x59f07c[_0x2ab34f(0x1a4)]);});if(_0x5e5b11=='')for(const [_0x2c5b47,_0x3ff6dc]of Object[_0x36b52a(0x227)](mybalances)){_0x3ff6dc[_0x36b52a(0x1f5)]()!=0x0&&_0x3150d7['push']({'coin':_0x2c5b47});}else for(const [_0x1203a6,_0x4e5e04]of Object[_0x36b52a(0x227)](mybalances)){if(_0x20b79a[_0x36b52a(0x278)](_0x1203a6)){if((_0x4e5e04[_0x36b52a(0x1f5)]()!=0x0||config[_0x36b52a(0x1b5)]['find'](_0x325480=>_0x325480['coin']==_0x1203a6))&&(allSymbols['includes'](_0x1203a6+'/'+_0x5e5b11)||_0x1203a6==_0x5e5b11))_0x3150d7[_0x36b52a(0x287)]({'coin':_0x1203a6,'symbol':_0x1203a6+'/'+_0x5e5b11,'reverse':![],'number':_0x4e5e04}),_0x1203a6!=_0x5e5b11&&_0xbbd387['push'](_0x1203a6+'/'+_0x5e5b11);else(_0x4e5e04['toString']()!=0x0||config['portfolio'][_0x36b52a(0x1af)](_0x268443=>_0x268443['coin']==_0x1203a6))&&allSymbols[_0x36b52a(0x278)](_0x5e5b11+'/'+_0x1203a6)&&(_0x3150d7[_0x36b52a(0x287)]({'coin':_0x1203a6,'symbol':_0x5e5b11+'/'+_0x1203a6,'reverse':!![],'number':_0x4e5e04}),_0x1203a6!=_0x5e5b11&&_0xbbd387[_0x36b52a(0x287)](_0x5e5b11+'/'+_0x1203a6));}}}catch(_0x3f9443){if(!_0x5cc2d8){if(_0x3f9443[_0x36b52a(0x1f5)]()['includes']('API-key\x20format\x20invalid'))return logHistory('error',_0x36b52a(0x229)),![];else{if(_0x3f9443[_0x36b52a(0x1f5)]()[_0x36b52a(0x278)]('AuthenticationError'))return logHistory('error',_0x36b52a(0x1d7)),![];else{if(_0x3f9443[_0x36b52a(0x1f5)]()[_0x36b52a(0x278)](_0x36b52a(0x1ce)))return logHistory('error',_0x36b52a(0x1a5)),![];else await handleError(_0x3f9443,_0x36b52a(0x1ef));}}}else await handleError(_0x3f9443,_0x36b52a(0x1ef));}return _0x3150d7;}async function getPortfolio(_0x4fd2af){const _0x5f1f8f=_0x4a8d43;let _0x53186d=[],_0x58adcc=[],_0x4e61b3,_0x10ba0e=[],_0x566b17,_0x4e52f5;_0x4fd2af[_0x5f1f8f(0x276)]===_0x5f1f8f(0x21b)||_0x4fd2af[_0x5f1f8f(0x1ac)]===_0x5f1f8f(0x21b)?(_0x566b17=config['apiKey'],_0x4e52f5=config[_0x5f1f8f(0x1ac)]):(_0x566b17=_0x4fd2af[_0x5f1f8f(0x276)],_0x4e52f5=_0x4fd2af[_0x5f1f8f(0x1ac)]);await initExchange(_0x566b17,_0x4e52f5);let _0x2c8227=await loadSymbols();if(_0x2c8227){_0x10ba0e=await getCoins(![],_0x4fd2af[_0x5f1f8f(0x1cb)]);if(_0x10ba0e===![])proxyEmit(_0x5f1f8f(0x1b5),![]);else{if(_0x4fd2af[_0x5f1f8f(0x1cb)]=='')proxyEmit(_0x5f1f8f(0x1b5),_0x10ba0e);else{_0x10ba0e[_0x5f1f8f(0x1ff)](_0x22af39=>{const _0x925818=_0x5f1f8f;_0x53186d[_0x925818(0x287)](_0x22af39[_0x925818(0x20b)]);});try{_0x58adcc=await exchange[_0x5f1f8f(0x285)](_0x53186d);}catch(_0x13fd9e){await handleError(_0x13fd9e,_0x5f1f8f(0x202));}_0x10ba0e[_0x5f1f8f(0x1ff)](_0x49feaa=>{const _0x45cf62=_0x5f1f8f;_0x49feaa[_0x45cf62(0x1a4)]!=_0x4fd2af[_0x45cf62(0x1cb)]?_0x4e61b3=_0x49feaa[_0x45cf62(0x294)]?0x1/_0x58adcc[_0x49feaa['symbol']][_0x45cf62(0x238)]:_0x58adcc[_0x49feaa[_0x45cf62(0x20b)]][_0x45cf62(0x238)]:_0x4e61b3=0x1,_0x49feaa[_0x45cf62(0x1b8)]=formatResult(_0x4e61b3,0x8);}),proxyEmit(_0x5f1f8f(0x1b5),_0x10ba0e);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x7f30d0){const _0x4edeaf=_0x4a8d43;let _0x46df8b=!![];const _0x2dc46e=!_0x7f30d0[_0x4edeaf(0x294)]?markets[_0x7f30d0[_0x4edeaf(0x20b)]][_0x4edeaf(0x275)][_0x4edeaf(0x1fc)][_0x4edeaf(0x280)]:markets[_0x7f30d0['symbol']][_0x4edeaf(0x275)][_0x4edeaf(0x279)]['min'],_0x3c9375=!_0x7f30d0[_0x4edeaf(0x294)]?markets[_0x7f30d0[_0x4edeaf(0x20b)]][_0x4edeaf(0x275)][_0x4edeaf(0x279)][_0x4edeaf(0x280)]:markets[_0x7f30d0['symbol']]['limits'][_0x4edeaf(0x1fc)][_0x4edeaf(0x280)];if(Math[_0x4edeaf(0x23c)](_0x7f30d0[_0x4edeaf(0x24c)])<_0x2dc46e)_0x46df8b=![];if(Math[_0x4edeaf(0x23c)](_0x7f30d0[_0x4edeaf(0x24c)])*_0x7f30d0['last']<_0x3c9375)_0x46df8b=![];return _0x46df8b;}async function getBalances(){const _0x2386d4=_0x4a8d43;let _0x4d299d=0x0,_0x286278;const _0x434303=config['threshold'];currentCoins[_0x2386d4(0x1ff)](_0x12376d=>{const _0x13e5b0=_0x2386d4;if(_0x12376d['coin']!=config['basecoin']){let _0x2399e7=global['ticker'][noslash(_0x12376d[_0x13e5b0(0x20b)])];_0x286278=_0x12376d['reverse']?0x1/_0x2399e7:_0x2399e7;}else _0x286278=0x1;let _0x45c568=_0x12376d[_0x13e5b0(0x224)]*_0x286278;_0x4d299d+=_0x45c568,_0x12376d[_0x13e5b0(0x238)]=formatResult(Number(_0x286278),0x8),_0x12376d['value']=_0x45c568;}),currentCoins[_0x2386d4(0x1ff)](_0x26b4c8=>{const _0xf83f2f=_0x2386d4;let _0x5412dc=config['portfolio']['find'](_0x4b73aa=>_0x4b73aa[_0xf83f2f(0x1a4)]==_0x26b4c8['coin']),_0x1cb5ae=Number(_0x5412dc['distribution']),_0x43b37e=_0x26b4c8[_0xf83f2f(0x212)]/_0x4d299d*0x64,_0x5b6d23=_0x1cb5ae*_0x4d299d/0x64/_0x26b4c8[_0xf83f2f(0x238)]-_0x26b4c8['number'];_0x26b4c8[_0xf83f2f(0x203)]=formatResult(_0x43b37e,0x3),_0x26b4c8['target']=formatResult(_0x1cb5ae,0x3),_0x26b4c8['trade']=formatResult(_0x5b6d23,0x8),_0x26b4c8['side']='',_0x26b4c8[_0xf83f2f(0x1cd)]='';if(_0x26b4c8[_0xf83f2f(0x1a4)]!=config[_0xf83f2f(0x1cb)]){if(_0x26b4c8['distribution']>_0x1cb5ae)_0x26b4c8[_0xf83f2f(0x198)]=_0xf83f2f(0x242),_0x26b4c8[_0xf83f2f(0x1cd)]=checkMinimums(_0x26b4c8);else _0x26b4c8['distribution']<_0x1cb5ae&&(_0x26b4c8[_0xf83f2f(0x198)]=_0xf83f2f(0x28c),_0x26b4c8[_0xf83f2f(0x1cd)]=checkMinimums(_0x26b4c8));}_0x26b4c8[_0xf83f2f(0x210)]=_0x26b4c8[_0xf83f2f(0x203)]/_0x26b4c8[_0xf83f2f(0x1fe)]-0x1;}),currentCoins[_0x2386d4(0x1ae)]((_0x112825,_0x206f7e)=>_0x112825[_0x2386d4(0x210)]<_0x206f7e[_0x2386d4(0x210)]?0x1:_0x206f7e[_0x2386d4(0x210)]<_0x112825['delta']?-0x1:0x0);const _0x4f556f=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4f556f[_0x2386d4(0x208)],'usd':_0x4f556f[_0x2386d4(0x20c)],'portfolio':JSON[_0x2386d4(0x28b)](currentCoins),'threshold':_0x434303},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(config[_0x2386d4(0x1e0)])headlessMode({'portfolio':currentCoins,'threshold':_0x434303});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1f93c3=_0x4a8d43;if(!lastBalances)return;let _0x157a22=await getStartingBalances(![]),_0x248af5=[],_0x45b37d=[],_0x3d190f;JSON[_0x1f93c3(0x1f4)](lastBalances[_0x1f93c3(0x1b5)])[_0x1f93c3(0x1ff)](_0x501d3c=>{const _0x139f00=_0x1f93c3;let _0x58aa34={'coin':_0x501d3c[_0x139f00(0x1a4)],'number':_0x501d3c[_0x139f00(0x224)],'price':_0x501d3c[_0x139f00(0x238)]};_0x248af5[_0x139f00(0x287)](_0x58aa34);if(!_0x157a22[_0x139f00(0x190)]||!_0x157a22[_0x139f00(0x190)]['find'](_0x4fba81=>_0x4fba81['coin']==_0x501d3c[_0x139f00(0x1a4)]&&_0x4fba81[_0x139f00(0x224)]!=0x0))_0x45b37d[_0x139f00(0x287)](_0x58aa34);});const _0x4d17e6=await getFiat();_0x3d190f={'date':lastBalances[_0x1f93c3(0x1b7)][_0x1f93c3(0x253)]('\x20')[0x0],'eur':_0x4d17e6[_0x1f93c3(0x208)],'usd':_0x4d17e6[_0x1f93c3(0x20c)],'coins':_0x248af5};let _0x3692a2=dbPerformance[_0x1f93c3(0x22e)]('data')[_0x1f93c3(0x1af)]({'date':_0x3d190f['date']})[_0x1f93c3(0x212)]();_0x3692a2?dbPerformance[_0x1f93c3(0x22e)](_0x1f93c3(0x1a3))['find']({'date':_0x3d190f[_0x1f93c3(0x1ba)]})[_0x1f93c3(0x22f)](_0x3d190f)[_0x1f93c3(0x214)]():dbPerformance[_0x1f93c3(0x22e)](_0x1f93c3(0x1a3))[_0x1f93c3(0x287)](_0x3d190f)[_0x1f93c3(0x214)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x24f87f=_0x4a8d43;if(dbPerformance['has']('data')[_0x24f87f(0x212)]()){let _0x274f2c=dbPerformance['get'](_0x24f87f(0x1a3))[_0x24f87f(0x299)](_0x24f87f(0x1ba))['value']();proxyEmit(_0x24f87f(0x1de),_0x274f2c),lastPerformanceEmitted=getDate();}else proxyEmit(_0x24f87f(0x1de),[]);}async function getStartingBalances(_0xc794c8=!![]){const _0x38a0c5=_0x4a8d43;let _0xefc670=dbPerformance[_0x38a0c5(0x22e)]('data')[_0x38a0c5(0x1af)]({'date':config[_0x38a0c5(0x192)]})[_0x38a0c5(0x212)]();config[_0x38a0c5(0x276)]!=''&&!_0xefc670&&(await setStartDatePerformance(config),_0xefc670=dbPerformance['get'](_0x38a0c5(0x1a3))[_0x38a0c5(0x1af)]({'date':config[_0x38a0c5(0x192)]})[_0x38a0c5(0x212)]());if(config[_0x38a0c5(0x276)]==''||!_0xefc670)return{};let _0x49b8d2=0x0,_0x1f1b5a=0x0,_0x477152=0x0,_0x53104c=[],_0x193119=0x0;config[_0x38a0c5(0x1b5)][_0x38a0c5(0x1ff)](_0x547461=>{const _0x3f4961=_0x38a0c5;if(!_0x547461['excluded']){_0x53104c[_0x193119]={'coin':_0x547461[_0x3f4961(0x1a4)],'symbol':_0x547461[_0x3f4961(0x20b)],'number':_0x547461[_0x3f4961(0x1c3)],'price':_0x547461[_0x3f4961(0x25c)]},_0x49b8d2+=_0x547461[_0x3f4961(0x25c)]*_0x547461[_0x3f4961(0x1c3)];if(config['basecoin']==_0x3f4961(0x295))_0x1f1b5a+=_0x547461[_0x3f4961(0x25c)]*_0x547461[_0x3f4961(0x1c3)]*_0xefc670[_0x3f4961(0x208)],_0x477152+=_0x547461[_0x3f4961(0x25c)]*_0x547461[_0x3f4961(0x1c3)]*_0xefc670['usd'];else{if(config[_0x3f4961(0x1cb)]=='BUSD'||config[_0x3f4961(0x1cb)]==_0x3f4961(0x22d)||config[_0x3f4961(0x1cb)]==_0x3f4961(0x27e))_0x1f1b5a+=_0x547461[_0x3f4961(0x25c)]*_0x547461['startnumber']*_0xefc670[_0x3f4961(0x208)]/_0xefc670['usd'],_0x477152+=_0x547461[_0x3f4961(0x25c)]*_0x547461[_0x3f4961(0x1c3)];else config[_0x3f4961(0x1cb)]=='EUR'&&(_0x1f1b5a+=_0x547461['startprice']*_0x547461[_0x3f4961(0x1c3)],_0x477152+=_0x547461[_0x3f4961(0x25c)]*_0x547461[_0x3f4961(0x1c3)]*_0xefc670['usd']/_0xefc670[_0x3f4961(0x208)]);}_0x193119++;}});let _0x2e3859={'basecoin':_0x49b8d2,'eur':_0x1f1b5a,'usd':_0x477152,'coins':_0x53104c};if(_0xc794c8)proxyEmit(_0x38a0c5(0x26d),_0x2e3859);return _0x2e3859;}function headlessMode(_0x54d45b){const _0x2cd65b=_0x4a8d43;let _0x30800d=_0x54d45b[_0x2cd65b(0x1b5)],_0x4dda5c=_0x54d45b['threshold'],_0x5be0e5=[];for(let _0x3b8001 of _0x30800d){if(_0x3b8001['coin']!=config['basecoin']){if(_0x3b8001[_0x2cd65b(0x203)]/_0x3b8001[_0x2cd65b(0x1fe)]-0x1>=_0x4dda5c/0x64){if(_0x3b8001['valid'])_0x5be0e5['push'](_0x3b8001);}else{if(_0x3b8001[_0x2cd65b(0x203)]/_0x3b8001[_0x2cd65b(0x1fe)]-0x1<=-_0x4dda5c/0x64){if(_0x3b8001[_0x2cd65b(0x1cd)])_0x5be0e5[_0x2cd65b(0x287)](_0x3b8001);}}}}_0x5be0e5['length']>0x0&&placeOrder(_0x5be0e5);}function symbolToCoin(_0x39977a){const _0x7751c1=_0x4a8d43;let _0x302a20;if(_0x39977a['includes']('/'+config['basecoin']))_0x302a20=_0x39977a[_0x7751c1(0x256)]('/'+config[_0x7751c1(0x1cb)],'');if(_0x39977a[_0x7751c1(0x278)](config[_0x7751c1(0x1cb)]+'/'))_0x302a20=_0x39977a[_0x7751c1(0x256)](config['basecoin']+'/','');return _0x302a20;}async function validateOrders(_0x482dd5=0x0){const _0x119ac2=_0x4a8d43;let _0x35610e=[],_0x5290c2=config[_0x119ac2(0x235)]==_0x119ac2(0x1cf)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x119ac2(0x1d3)]*0x3c*0x3e8/validateOrderInterval;lastOrders['forEach'](_0x57cbb4=>{const _0x3189c9=_0x119ac2;let _0x52b9b5=previousCoins[_0x3189c9(0x1af)](_0x4a8889=>_0x4a8889['coin']==symbolToCoin(_0x57cbb4[_0x3189c9(0x20b)])),_0x37c178=currentCoins[_0x3189c9(0x1af)](_0x40dde8=>_0x40dde8['coin']==symbolToCoin(_0x57cbb4[_0x3189c9(0x20b)])),_0x3bb4f6,_0x1e5e1a;_0x57cbb4[_0x3189c9(0x198)]=='buy'&&!_0x57cbb4[_0x3189c9(0x294)]||_0x57cbb4[_0x3189c9(0x198)]==_0x3189c9(0x242)&&_0x57cbb4[_0x3189c9(0x294)]?(_0x3bb4f6=_0x52b9b5['number']+0.9*_0x57cbb4[_0x3189c9(0x25d)],_0x1e5e1a=_0x52b9b5[_0x3189c9(0x224)]+1.1*_0x57cbb4['filled']):(_0x3bb4f6=_0x52b9b5['number']-1.1*_0x57cbb4[_0x3189c9(0x25d)],_0x1e5e1a=_0x52b9b5[_0x3189c9(0x224)]-0.9*_0x57cbb4[_0x3189c9(0x25d)]);const _0x53e96c=_0x57cbb4[_0x3189c9(0x25d)]!=0x0&&_0x37c178['number']>=_0x3bb4f6&&_0x37c178[_0x3189c9(0x224)]<=_0x1e5e1a;_0x35610e['push'](_0x53e96c);if(_0x53e96c&&config['ordertype']!=_0x3189c9(0x1cf)){if(_0x57cbb4[_0x3189c9(0x294)])logHistory('order',_0x3189c9(0x245)+_0x57cbb4[_0x3189c9(0x20b)]+'\x20'+_0x57cbb4[_0x3189c9(0x198)]+'\x20#'+formatResult(_0x57cbb4[_0x3189c9(0x25d)]/_0x57cbb4['price'],0x8)+'\x20@'+formatResult(_0x57cbb4['price'],0x8));else logHistory(_0x3189c9(0x270),_0x3189c9(0x245)+_0x57cbb4[_0x3189c9(0x20b)]+'\x20'+_0x57cbb4['side']+'\x20#'+formatResult(_0x57cbb4[_0x3189c9(0x25d)],0x8)+'\x20@'+formatResult(_0x57cbb4[_0x3189c9(0x1b8)],0x8));}}),_0x35610e[_0x119ac2(0x1ff)]((_0x5ba35a,_0x1ed219)=>{const _0x556126=_0x119ac2;if(_0x5ba35a)lastOrders[_0x556126(0x1ca)](_0x1ed219,0x1);});if(_0x482dd5<_0x5290c2&&_0x35610e[_0x119ac2(0x278)](![])){if(_0x482dd5==0x0){config[_0x119ac2(0x235)]==_0x119ac2(0x1cf)?logHistory(_0x119ac2(0x1e4),_0x119ac2(0x19f)):logHistory(_0x119ac2(0x1e4),_0x119ac2(0x211));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x482dd5);},0xa*0x3e8);}else{(_0x482dd5==0x1||_0x482dd5==Math[_0x119ac2(0x1c9)](_0x5290c2/0x2)||_0x482dd5==_0x5290c2-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x482dd5);},validateOrderInterval);}}else{lockOrders=![];if(_0x482dd5>0x0&&!_0x35610e[_0x119ac2(0x278)](![]))config[_0x119ac2(0x235)]==_0x119ac2(0x1cf)?logHistory(_0x119ac2(0x1a8),_0x119ac2(0x29b)):logHistory(_0x119ac2(0x1a8),_0x119ac2(0x1a9));else _0x482dd5>0x0&&_0x35610e[_0x119ac2(0x278)](![])&&(config[_0x119ac2(0x235)]==_0x119ac2(0x1cf)?logHistory(_0x119ac2(0x1a8),_0x119ac2(0x217)+Math[_0x119ac2(0x1c9)](_0x5290c2*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x119ac2(0x1ff)](async _0x4811c9=>{const _0x324338=_0x119ac2;try{const _0x2e9ca1=await exchange['cancelOrder'](_0x4811c9[_0x324338(0x191)],_0x4811c9[_0x324338(0x20b)]);}catch(_0xa53304){if(_0xa53304[_0x324338(0x1f5)]()[_0x324338(0x278)](_0x324338(0x1bb))){}else await handleError(_0xa53304,_0x324338(0x1fb));}}),logHistory(_0x119ac2(0x1a8),_0x119ac2(0x246)+Math[_0x119ac2(0x1c9)](_0x5290c2*validateOrderInterval/0xea60)+_0x119ac2(0x1a7))));}}async function resetCoinResults(){const _0x47db36=_0x4a8d43;dbCoinResults['get'](_0x47db36(0x190))[_0x47db36(0x21a)]()[_0x47db36(0x214)]();let _0x105874=await getStartingBalances(![]);_0x105874[_0x47db36(0x190)]['forEach'](_0x2c86d6=>{const _0x1f79b2=_0x47db36,_0x3ea8b0=_0x2c86d6[_0x1f79b2(0x20b)]['includes'](config[_0x1f79b2(0x1cb)]+'/');if(_0x2c86d6[_0x1f79b2(0x1a4)]!=config[_0x1f79b2(0x1cb)]){let _0x5ab564={'coin':_0x2c86d6[_0x1f79b2(0x1a4)],'number':_0x2c86d6['number'],'breakeven':_0x2c86d6[_0x1f79b2(0x1b8)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x1f79b2(0x190))[_0x1f79b2(0x287)](_0x5ab564)['write']();}});}async function updateCoinResults(_0x537adb){const _0x1db178=_0x4a8d43;let _0x459aca,_0x28697b,_0x54b76e,_0x1cffb6,_0x1f9f6e,_0x22b147,_0x2c2f59=dbCoinResults[_0x1db178(0x22e)](_0x1db178(0x190))[_0x1db178(0x1af)]({'coin':_0x537adb[_0x1db178(0x1a4)]})['value']();if(!_0x2c2f59)return;if(_0x537adb['fee']&&_0x537adb[_0x1db178(0x1ab)]['currency']==config['basecoin'])_0x459aca=_0x537adb[_0x1db178(0x1ab)][_0x1db178(0x279)];else{if(_0x537adb['fee']&&_0x537adb[_0x1db178(0x1ab)][_0x1db178(0x237)]==_0x1db178(0x262))_0x459aca=_0x537adb[_0x1db178(0x1ab)]['cost']*global[_0x1db178(0x1f8)][_0x1db178(0x262)+config[_0x1db178(0x1cb)]];else _0x459aca=0.001*_0x537adb[_0x1db178(0x25d)];}const _0x39d84f=_0x537adb['symbol'][_0x1db178(0x278)](config[_0x1db178(0x1cb)]+'/');_0x39d84f&&(_0x22b147={'coin':_0x537adb[_0x1db178(0x1a4)],'symbol':_0x537adb[_0x1db178(0x20b)],'filled':_0x537adb[_0x1db178(0x25d)]*_0x537adb['price'],'side':_0x537adb[_0x1db178(0x198)]==_0x1db178(0x242)?_0x1db178(0x28c):_0x1db178(0x242),'price':0x1/_0x537adb[_0x1db178(0x1b8)]},_0x537adb={..._0x22b147});_0x537adb[_0x1db178(0x198)]==_0x1db178(0x28c)?_0x54b76e=(_0x2c2f59['breakeven']*_0x2c2f59[_0x1db178(0x224)]+_0x537adb[_0x1db178(0x1b8)]*_0x537adb[_0x1db178(0x25d)])/(_0x2c2f59['number']+_0x537adb[_0x1db178(0x25d)]):_0x54b76e=(_0x2c2f59[_0x1db178(0x259)]*_0x2c2f59[_0x1db178(0x224)]-_0x537adb[_0x1db178(0x1b8)]*_0x537adb['filled'])/(_0x2c2f59[_0x1db178(0x224)]-_0x537adb[_0x1db178(0x25d)]);_0x537adb[_0x1db178(0x198)]=='buy'?_0x1cffb6=_0x2c2f59[_0x1db178(0x1e2)]:_0x1cffb6=_0x2c2f59['realized']+(_0x537adb[_0x1db178(0x1b8)]-_0x2c2f59[_0x1db178(0x259)])*_0x537adb['filled'];_0x28697b=_0x537adb[_0x1db178(0x198)]=='sell'?_0x2c2f59[_0x1db178(0x224)]-_0x537adb['filled']:_0x2c2f59[_0x1db178(0x224)]+_0x537adb[_0x1db178(0x25d)],_0x1f9f6e=(_0x537adb['price']-_0x54b76e)*_0x28697b;let _0x2b7f55={'coin':_0x537adb['coin'],'number':_0x28697b,'breakeven':formatResult(_0x54b76e,0x8),'realized':formatResult(_0x1cffb6,0x8),'unrealized':formatResult(_0x1f9f6e,0x8),'fees':formatResult(_0x2c2f59['fees']+_0x459aca,0x8),'sells':_0x537adb['side']==_0x1db178(0x242)?_0x2c2f59[_0x1db178(0x28a)]+0x1:_0x2c2f59['sells'],'buys':_0x537adb[_0x1db178(0x198)]=='buy'?_0x2c2f59[_0x1db178(0x223)]+0x1:_0x2c2f59['buys']};dbCoinResults[_0x1db178(0x22e)](_0x1db178(0x190))[_0x1db178(0x1af)]({'coin':_0x537adb[_0x1db178(0x1a4)]})[_0x1db178(0x22f)](_0x2b7f55)[_0x1db178(0x214)]();}async function placeOrder(_0x4d3413){const _0xa52a4d=_0x4a8d43,_0x4b20f4=config[_0xa52a4d(0x235)]==_0xa52a4d(0x1cf)?_0xa52a4d(0x1cf):_0xa52a4d(0x1d8);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0xa52a4d(0x1f4)](JSON[_0xa52a4d(0x28b)](currentCoins));for(const _0x1cdf67 of _0x4d3413){let _0x5bf8dd,_0x5bef73,_0x20db77,_0x42f3a3,_0x2bd85d,_0x16de1f=_0x1cdf67[_0xa52a4d(0x20b)];try{const _0x57774f=await exchange[_0xa52a4d(0x285)](_0x16de1f),_0x373f6b=_0x57774f[_0x16de1f];_0x5bf8dd=_0x373f6b[_0xa52a4d(0x238)],_0x5bef73=_0x373f6b[_0xa52a4d(0x22b)],_0x20db77=_0x373f6b[_0xa52a4d(0x219)];_0x1cdf67[_0xa52a4d(0x294)]?(_0x42f3a3=_0x1cdf67[_0xa52a4d(0x198)]==_0xa52a4d(0x28c)?_0xa52a4d(0x242):_0xa52a4d(0x28c),_0x2bd85d=Math[_0xa52a4d(0x23c)](_0x1cdf67[_0xa52a4d(0x24c)])/_0x5bf8dd):(_0x42f3a3=_0x1cdf67['side'],_0x2bd85d=Math[_0xa52a4d(0x23c)](_0x1cdf67[_0xa52a4d(0x24c)]));_0x4b20f4==_0xa52a4d(0x1d8)&&(config[_0xa52a4d(0x235)]==_0xa52a4d(0x19a)&&(_0x5bf8dd=_0x42f3a3=='buy'?_0x5bef73:_0x20db77),config['ordertype']==_0xa52a4d(0x197)&&(_0x5bf8dd=_0x42f3a3==_0xa52a4d(0x28c)?_0x20db77:_0x5bef73));_0x2bd85d=formatResult(_0x2bd85d,0x8),_0x5bf8dd=formatResult(_0x5bf8dd,0x8);const _0x505863=await exchange[_0xa52a4d(0x221)](_0x16de1f,_0x4b20f4,_0x42f3a3,_0x2bd85d,_0x5bf8dd);lastOrders['push']({'orderId':_0x505863['id'],'symbol':_0x16de1f,'side':_0x42f3a3,'reverse':_0x1cdf67[_0xa52a4d(0x294)],'amount':_0x1cdf67[_0xa52a4d(0x294)]?_0x505863['amount']*_0x505863[_0xa52a4d(0x1b8)]:_0x505863[_0xa52a4d(0x1fc)],'filled':_0x1cdf67['reverse']?_0x505863[_0xa52a4d(0x25d)]*_0x505863[_0xa52a4d(0x1b8)]:_0x505863[_0xa52a4d(0x25d)],'price':_0x505863[_0xa52a4d(0x1b8)]});const _0x9c458e=_0x42f3a3=='sell'?config[_0xa52a4d(0x24e)]?String[_0xa52a4d(0x1bf)]('0x'+config[_0xa52a4d(0x24e)])+'\x20':'':config['emojibuy']?String[_0xa52a4d(0x1bf)]('0x'+config[_0xa52a4d(0x1bc)])+'\x20':'',_0x1ff5d0=_0x4b20f4==_0xa52a4d(0x1cf)?_0xa52a4d(0x239):config['ordertype']=='limit-high'?_0xa52a4d(0x1b4):_0xa52a4d(0x296);if(_0x4b20f4==_0xa52a4d(0x1cf))logHistory(_0xa52a4d(0x270),''+_0x9c458e+_0x1ff5d0+'\x20order:\x20'+_0x16de1f+'\x20'+_0x42f3a3+'\x20#'+formatResult(_0x505863[_0xa52a4d(0x25d)],0x8)+'\x20@'+formatResult(_0x505863['price'],0x8));else logHistory('order',''+_0x9c458e+_0x1ff5d0+_0xa52a4d(0x267)+_0x16de1f+'\x20'+_0x42f3a3+'\x20#'+formatResult(_0x505863['amount'],0x8)+'\x20@'+formatResult(_0x505863[_0xa52a4d(0x1b8)],0x8));_0x505863['coin']=_0x1cdf67[_0xa52a4d(0x1a4)],await updateCoinResults(_0x505863);if(config[_0xa52a4d(0x274)]!=0x0){let _0x30845d=null;if(cooldownTracker[_0xa52a4d(0x26c)]==config['cooldown']-0x1)_0x30845d=cooldownTracker[_0xa52a4d(0x215)]();const _0x524350=getTimeStamp();cooldownTracker[_0xa52a4d(0x287)](_0x524350);if(_0x30845d){const _0xa12427=fns[_0xa52a4d(0x1be)](new Date(_0x524350),new Date(_0x30845d));_0xa12427<cooldownInterval&&(logHistory(_0xa52a4d(0x1e4),_0xa52a4d(0x22a)+config['cooldown']+_0xa52a4d(0x1f2)+cooldownInterval/0x3c+_0xa52a4d(0x193)+cooldownPeriod/(0xe10*0x3e8)+_0xa52a4d(0x1d5)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x1da900){if(_0x1da900[_0xa52a4d(0x1f5)]()[_0xa52a4d(0x278)](_0xa52a4d(0x272)))logHistory(_0xa52a4d(0x1e4),_0xa52a4d(0x23a)+_0x16de1f);else{if(_0x1da900[_0xa52a4d(0x1f5)]()['includes'](_0xa52a4d(0x21e)))logHistory(_0xa52a4d(0x1e4),_0xa52a4d(0x28d)+_0x16de1f);else await handleError(_0x1da900,'placeOrder()');}}}if(lastOrders[_0xa52a4d(0x26c)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config['headless']&&(config[_0xa52a4d(0x235)]==_0xa52a4d(0x1cf)?logHistory(_0xa52a4d(0x1e4),_0xa52a4d(0x1b9)):logHistory('error',_0xa52a4d(0x268)));else coolingDown&&(!config[_0xa52a4d(0x1e0)]&&logHistory('error','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x2dbb89,_0x58d20b,_0x9d1b3c=''){const _0x5f57a4=_0x4a8d43;let _0x5acdb8={'time':getTimeStamp(),'type':_0x2dbb89,'event':_0x58d20b,'botname':config[_0x5f57a4(0x24b)],'showname':config['showname']};dbLogs['get'](_0x5f57a4(0x23f))[_0x5f57a4(0x287)](_0x5acdb8)[_0x5f57a4(0x214)]();if(_0x9d1b3c=='')_0x9d1b3c=_0x58d20b;proxyEmit(_0x5f57a4(0x1eb),{'log':_0x5acdb8,'summary':_0x9d1b3c}),process[_0x5f57a4(0x1d9)]({'telegram':_0x5acdb8}),logging(''+_0x5acdb8[_0x5f57a4(0x1eb)]);}function emitHistory(_0x8d846c={}){const _0x29a4ba=_0x4a8d43;Object[_0x29a4ba(0x1a1)](_0x8d846c)[_0x29a4ba(0x26c)]==0x0&&(_0x8d846c={'type':[_0x29a4ba(0x270),_0x29a4ba(0x1eb)],'event':'','page':0x1});if(_0x8d846c[_0x29a4ba(0x24d)]['includes'](_0x29a4ba(0x1eb)))_0x8d846c[_0x29a4ba(0x24d)]['splice'](_0x8d846c[_0x29a4ba(0x24d)][_0x29a4ba(0x25f)](_0x29a4ba(0x1eb)),0x1,_0x29a4ba(0x1e4),'success');if(dbLogs[_0x29a4ba(0x1e8)](_0x29a4ba(0x23f))[_0x29a4ba(0x212)]()){let _0x42662b=dbLogs['get'](_0x29a4ba(0x23f))[_0x29a4ba(0x222)](_0x21c1bb=>{const _0x248022=_0x29a4ba;if(_0x8d846c[_0x248022(0x24d)]['length']==0x0)return![];else return _0x8d846c[_0x248022(0x24d)][_0x248022(0x278)](_0x21c1bb[_0x248022(0x24d)]);})[_0x29a4ba(0x222)](_0x8d219b=>{const _0x2cc11c=_0x29a4ba;if(_0x8d846c[_0x2cc11c(0x1eb)]=='')return!![];else return _0x8d219b['event'][_0x2cc11c(0x261)]()['includes'](_0x8d846c[_0x2cc11c(0x1eb)][_0x2cc11c(0x261)]());})[_0x29a4ba(0x299)](_0x29a4ba(0x1b7)),_0x289cd7=_0x42662b['value']()['length'];_0x42662b=_0x42662b[_0x29a4ba(0x294)]()[_0x29a4ba(0x1ec)]((_0x8d846c['page']-0x1)*logPageSize,_0x8d846c[_0x29a4ba(0x23b)]*logPageSize-0x1)[_0x29a4ba(0x294)]()['value'](),proxyEmit(_0x29a4ba(0x293),{'logs':_0x42662b,'total':_0x289cd7});}else proxyEmit(_0x29a4ba(0x293),{'logs':[],'total':0x0});}async function pauseBot(_0x4a0bfb){const _0x6e44e7=_0x4a8d43,_0x431671=new Date()[_0x6e44e7(0x29d)]();if(!lastBotPause)lastBotPause=new Date()[_0x6e44e7(0x29d)](),consecutivePauses=0x1;else{if(_0x431671-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x6e44e7(0x1d9)]({'stop':_0x6e44e7(0x1dc)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x6e44e7(0x29d)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory('error',_0x6e44e7(0x26f)+consecutivePauses+')'),await sleep(_0x4a0bfb),botPaused=![],reset();}}async function handleError(_0x229f4d,_0x5b21ff,_0x24918d=''){const _0x5dfc26=_0x4a8d43;if(_0x229f4d[_0x5dfc26(0x1f5)]()[_0x5dfc26(0x278)](_0x5dfc26(0x1fa)))logHistory(_0x5dfc26(0x1e4),_0x5b21ff+_0x5dfc26(0x1f6)),await pauseBot(pauseBotInterval);else{if(_0x229f4d[_0x5dfc26(0x1f5)]()[_0x5dfc26(0x278)](_0x5dfc26(0x254)))logHistory(_0x5dfc26(0x1e4),_0x5b21ff+_0x5dfc26(0x196)),await pauseBot(pauseBotInterval);else{if(_0x229f4d[_0x5dfc26(0x1f5)]()[_0x5dfc26(0x278)](_0x5dfc26(0x213)))logHistory(_0x5dfc26(0x1e4),_0x5b21ff+'\x20|\x20Binance\x20exchange\x20is\x20not\x20responding'),await pauseBot(pauseBotInterval);else{if(_0x229f4d['toString']()[_0x5dfc26(0x278)](_0x5dfc26(0x265)))logHistory(_0x5dfc26(0x1e4),_0x5b21ff+'\x20|\x20Binance\x20API\x20key\x20is\x20invalid'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x5dfc26(0x1d9)]({'stop':_0x5dfc26(0x1c2)});else{if(_0x229f4d[_0x5dfc26(0x1f5)]()[_0x5dfc26(0x278)](_0x5dfc26(0x199)))logHistory(_0x5dfc26(0x1e4),_0x5b21ff+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0x5dfc26(0x1e4),_0x5dfc26(0x1d1)),process['send']({'stop':_0x5dfc26(0x1c2)});else{if(_0x229f4d[_0x5dfc26(0x1f5)]()['includes'](_0x5dfc26(0x1ce)))logHistory(_0x5dfc26(0x1e4),_0x5b21ff+_0x5dfc26(0x286)),logHistory('error',_0x5dfc26(0x1d1)),process[_0x5dfc26(0x1d9)]({'stop':_0x5dfc26(0x1c2)});else{if(_0x229f4d[_0x5dfc26(0x1f5)]()[_0x5dfc26(0x278)](_0x5dfc26(0x252)))logHistory(_0x5dfc26(0x1e4),_0x5b21ff+_0x5dfc26(0x195)),logHistory(_0x5dfc26(0x1e4),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['send']({'stop':'kill'});else{if(_0x229f4d[_0x5dfc26(0x1f5)]()[_0x5dfc26(0x278)](_0x5dfc26(0x231)))logHistory('error',_0x5b21ff+_0x5dfc26(0x24a)),await pauseBot(pauseBotInterval),process[_0x5dfc26(0x1d9)]({'stop':'restart'});else _0x229f4d[_0x5dfc26(0x1f5)]()[_0x5dfc26(0x278)](_0x5dfc26(0x25e))?logHistory(_0x5dfc26(0x1e4),_0x5b21ff+_0x5dfc26(0x1ed)):(logHistory(_0x5dfc26(0x1e4),_0x5b21ff+'\x20|\x20Unknown\x20error\x20occured'),logging(_0x5b21ff+_0x5dfc26(0x1df),_0x229f4d),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x4b7b50,_0x7d917f){const _0x3e490e=_0x4a8d43;return parseFloat(_0x4b7b50[_0x3e490e(0x19e)](_0x7d917f));}function logging(_0x81f2e3,_0x1b1c54=''){const _0x189aef=_0x4a8d43;if(config[_0x189aef(0x273)])console['log'](getTimeStamp()+':\x20'+config['botname']+_0x189aef(0x255)+_0x81f2e3,_0x1b1c54);else console[_0x189aef(0x244)](getTimeStamp()+_0x189aef(0x1bd)+botID+_0x189aef(0x255)+_0x81f2e3,_0x1b1c54);}function getServerTime(){const _0x59d4ab=_0x4a8d43,_0x3aeec2=new Date();return _0x3aeec2[_0x59d4ab(0x28e)]()+'/'+(_0x3aeec2[_0x59d4ab(0x218)]()+0x1)[_0x59d4ab(0x1f5)]()[_0x59d4ab(0x1e7)](0x2,'0')+'/'+_0x3aeec2[_0x59d4ab(0x18f)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x3aeec2['getHours']()[_0x59d4ab(0x1f5)]()[_0x59d4ab(0x1e7)](0x2,'0')+':'+_0x3aeec2[_0x59d4ab(0x207)]()[_0x59d4ab(0x1f5)]()[_0x59d4ab(0x1e7)](0x2,'0')+':'+_0x3aeec2[_0x59d4ab(0x1f3)]()[_0x59d4ab(0x1f5)]()[_0x59d4ab(0x1e7)](0x2,'0');}function getTimeStamp(){const _0x5f56fd=_0x4a8d43,_0x323f6d=shiftedTime();return _0x323f6d['getFullYear']()+'/'+(_0x323f6d[_0x5f56fd(0x218)]()+0x1)['toString']()[_0x5f56fd(0x1e7)](0x2,'0')+'/'+_0x323f6d[_0x5f56fd(0x18f)]()['toString']()[_0x5f56fd(0x1e7)](0x2,'0')+'\x20'+_0x323f6d[_0x5f56fd(0x249)]()[_0x5f56fd(0x1f5)]()['padStart'](0x2,'0')+':'+_0x323f6d[_0x5f56fd(0x207)]()[_0x5f56fd(0x1f5)]()[_0x5f56fd(0x1e7)](0x2,'0')+':'+_0x323f6d[_0x5f56fd(0x1f3)]()[_0x5f56fd(0x1f5)]()[_0x5f56fd(0x1e7)](0x2,'0');}function getDate(){const _0x5cbaf=_0x4a8d43,_0x4030ab=shiftedTime();return _0x4030ab[_0x5cbaf(0x28e)]()+'/'+(_0x4030ab[_0x5cbaf(0x218)]()+0x1)[_0x5cbaf(0x1f5)]()[_0x5cbaf(0x1e7)](0x2,'0')+'/'+_0x4030ab['getDate']()['toString']()[_0x5cbaf(0x1e7)](0x2,'0');}function getHour(){const _0x512dae=_0x4a8d43,_0x5c0204=shiftedTime();return _0x5c0204[_0x512dae(0x249)]()[_0x512dae(0x1f5)]()[_0x512dae(0x1e7)](0x2,'0');}function sleep(_0x3daacf){return new Promise(_0x3c21ce=>setTimeout(_0x3c21ce,_0x3daacf));}function shiftedTime(){const _0x5ab560=_0x4a8d43,_0x54bce9=new Date();let _0x1a0f66=_0x54bce9;if(config&&config[_0x5ab560(0x1a2)]!==0x0)_0x1a0f66=fns[_0x5ab560(0x20a)](_0x54bce9,{'hours':config[_0x5ab560(0x1a2)]});return _0x1a0f66;}